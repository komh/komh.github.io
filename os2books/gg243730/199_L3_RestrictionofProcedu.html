<HTML>
<HEAD>
<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="TEXT/HTML; CHARSET=UTF-8">
<TITLE>Restriction of Procedure Entry Points</TITLE>
</HEAD>
<BODY>
<H1>Restriction of Procedure Entry Points</H1><!-- entering slot 222 -->
<P>
To achieve transfer of control between procedures on different privilege
levels, a special descriptor type called a <A HREF="294_L2_gate.html"><B>gate
</B></A>is provided.  Programs wishing to transfer control call the gate
by specifying the segment base address of the gate, rather than transferring
control directly to the required procedure.  Under OS/2 Version 2.0, where
a single segment is used to implement the flat memory model, the gate is
called by specifying its offset within the process address space.
<P>
The four types of gates are CALL gates, TASK gates, INTR (Interrupt) gates,
and TRAP gates.  The routine invoked when the gate is called simply redirects
control to a new address which contains the privileged routine to be executed.

<P>
From the program's point of view, this is no different from transferring
control to another code segment, since the calling instruction simply regards
the gate as another procedure.  However, it effectively isolates the calling
procedure from the called procedure, and since only the entry point address
of the gate is supplied in the calling instruction, the calling procedure
has no access to any point other than the defined entry point of the called
procedure.
<P>
Calls are verified to ensure that they satisfy two conditions:<!-- lm: 0x2 0 -->
<P>
 <LI><LI><!-- lm: 0x2 4 -->The call must enter the called procedure at the
beginning of that procedure; this is normally ensured by the gate descriptor
itself, which supplies the necessary offset to the entry point.<!-- lm: 0x2 0 -->
<P>
 <LI><LI><!-- lm: 0x2 4 -->The privilege level of the called procedure must
be the same as that of the gate descriptor.<!-- lm: 0x2 0 -->
<BR>


<P><HR>

<A HREF="198_L3_PrivilegeLevels.html">[Back: Privilege Levels]</A> <BR>
<A HREF="200_L3_ReservedInstructions.html">[Next: Reserved Instructions]</A> 
</BODY>
</HTML>
