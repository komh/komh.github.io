<HTML>
<HEAD>
<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="TEXT/HTML; CHARSET=UTF-8">
<TITLE>Exercise 3 - Multiple DOS Sessions</TITLE>
</HEAD>
<BODY>
<H1>Exercise 3 - Multiple DOS Sessions</H1><!-- entering slot 271 -->
<P>
This exercise demonstrates how an OS/2 protected mode program may start
a DOS program in a virtual DOS machine.  Furthermore, the growth of the
swap file is shown, as well as the decrease in the size of the swap file
after termination of the OS/2 program.
<P>
The program used in this exercise makes use of the DosStartSession() function.

<P>
In this exercise, the student is required to run the memory lab program:

<PRE>      <B>MEMLAB3.EXE</B>

Syntax: MEMLAB3 &lt;no. of DOS sessions&gt;
</PRE>

<P>
The steps in the program are as follows:<!-- lm: 0x2 0 -->
<P>
 <LI><LI><!-- lm: 0x2 4 -->If a parameter is passed to the program, it will
use this as the number of DOS sessions to start. If no parameter is provided,
four DOS sessions are started.<!-- lm: 0x2 0 -->
<P>
 <LI><LI><!-- lm: 0x2 4 -->The program reads a file named:<I> MEMLAB3.PRO</I>.

<P>
A sample<I> MEMLAB3.PRO</I> is shown in <A HREF="248_L3_SampleInputFileforME.html">Sample
Input File for MEMLAB3.EXE</A>.
<P>
The file must be created using an ASCII editor such as the OS/2 V2.0 System
Editor and consists of three lines as follows:<!-- lm: 0x2 3 -->
<UL>
<P>
 a)<!-- lm: 0x2 7 -->
<UL>The full path and file name of the swap file.
<!-- lm: 0x2 3 -->
</UL> b)<!-- lm: 0x2 7 -->
<UL>The name of the DOS program to be executed
in each of the started sessions.
<P>
In the example this is EDLIN.COM.<!-- lm: 0x2 3 -->
</UL> c)<!-- lm: 0x2 7 -->
<UL>The parameter string which is to be passed
to the DOS program.
<P>
If no parameters are to be passed, an empty line must still appear in the
file.  In the example this is AUTOEXEC.BAT<!-- lm: 0x2 4 --><!-- lm: 0x2 0 -->
</UL>
3.<!-- lm: 0x2 4 -->
<UL>The program starts the specified number of DOS
sessions, if possible, with the current system resources.  Before starting
any sessions, the program displays the size of the swap file.  After each
session is started the new size of the swap file is displayed.<!-- lm: 0x2 0 -->
</UL>
4.<!-- lm: 0x2 4 -->
<UL>When the requested number of DOS sessions is started
or the system resources are exhausted, the program will wait for a keystroke
in order to terminate.<!-- lm: 0x2 0 -->
</UL>  5.<!-- lm: 0x2 4 -->
<UL>When
the keystroke is received by the program all the DOS sessions are terminated.
 After terminating each session the swap file size is displayed.  The program
continues to monitor and display the swap file every 10 seconds until it
remains unchanged for a period of 100 seconds.<!-- lm: 0x2 0 -->
</UL>
<P>
The program listing is shown in <A HREF="247_L3_SourceCodeMEMLAB3C.html">Source
Code MEMLAB3.C</A>.
<P>
You should perform the following steps:<!-- lm: 0x2 0 -->
<P>
 <LI><LI><!-- lm: 0x2 4 -->Although MEMLAB3 does give information about
the swap file size, you may also want to use the SWAPSIZE program which
is described in <A HREF="252_L2_ProgramtoDisplaySwap.html">Program to Display
Swap File Size</A> to monitor the changes in the size of SWAPPER.DAT. If
so start this program now.<!-- lm: 0x2 0 -->
<P>
 <LI><LI><!-- lm: 0x2 4 -->Run the MEMLAB3 program and notice how the swap
file size increases as the sessions are started.<!-- lm: 0x2 0 -->
<P>
 <LI><LI><!-- lm: 0x2 4 -->Terminate the program and watch the decrease
in size of the swap file over time.<!-- lm: 0x2 0 -->
<P>
Note the 512KB steps in which the swap file size increases and decreases.

<P>
<B>If you are able to do the exercise </B> Please do so now. If not, refer
to the following explanation.<!-- lm: 0x2 0 -->
<P>


<P><HR>

<A HREF="244_L3_SourceCodeMEMLAB2C.html">[Back: Source Code MEMLAB2.C]</A> <BR>
<A HREF="246_L2_ExpectedResultsfromE.html">[Next: Expected Results from Exercise 3]</A> 
</BODY>
</HTML>
