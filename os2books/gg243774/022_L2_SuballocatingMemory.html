<HTML>
<HEAD>
<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="TEXT/HTML; CHARSET=UTF-8">
<TITLE>Suballocating Memory</TITLE>
</HEAD>
<BODY>
<H1>Suballocating Memory</H1><!-- entering slot 23 -->
<PRE>#define       POOLSIZE   8192              /* Size of storage pool       */
PVOID         pPool;                       /* Base address of pool       */

CTRLSTRUCT1   *Struct1;                    /* Control structure 1        */
CTRLSTRUCT2   *Struct2;                    /* Control structure 2        */

DosAllocMem(&amp;pPool,                        /* Allocate storage for pool  */
            POOLSIZE,                      /* Size of memory object      */
            PAG_READ  |                    /* Allow read access          */
            PAG_WRITE |                    /* Allow write access         */
            PAG_COMMIT);                   /* Commit storage immediately */

DosSubSet(pPool,                           /* Initialize for suballoc    */
          DOS_SUBINIT,                     /* Initialize flag            */
          POOLSIZE);                       /* Size of pool               */

DosSubAlloc(pPool,                         /* Suballocate storage        */
            &amp;Struct1,                      /* Pointer to memory object   */
            sizeof(CTRLSTRUCT1));          /* Size of storage required   */
DosSubAlloc(pPool,                         /* Suballocate storage        */
            &amp;Struct2,                      /* Pointer to memory object   */
            sizeof(CTRLSTRUCT2));          /* Size of storage required   */
</PRE>


<P><HR>

<A HREF="021_L2_RegisteringaGuardPag.html">[Back: Registering a Guard Page Exception Handler]</A> <BR>
<A HREF="023_L2_AllocatingSharedMemo.html">[Next: Allocating Shared Memory]</A> 
</BODY>
</HTML>
