<HTML>
<HEAD>
<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="TEXT/HTML; CHARSET=UTF-8">
<TITLE>DosFreeThreadLocalMemory</TITLE>
</HEAD>
<BODY>
<H1>DosFreeThreadLocalMemory</H1><!-- entering slot 54 --><!-- lm: 0x2 0 -->
<P>
<B>Description</B><!-- lm: 0x11 5 -->
<UL> Free memory allocated by DosAllocThreadLocalMemory.

<P>
<!-- lm: 0x2 0 -->
</UL><B>Calling Sequence</B><!-- lm: 0x11 5 -->
<UL> APIRET DosFreeThreadLocalMemory
(ULONG ProcNum, PULONG pStatus)
<P>
<!-- lm: 0x2 0 -->
</UL><B>Parameters</B><!-- lm: 0x11 5 -->
<UL><B> ProcNum</B> (<I>ULONG</I>)
- input    The processor number for which the status is to be set.
<BR>
<B>pStatus</B> (<I>PULONG</I>) - input
<BR>
   A pointer to the status for the specified processor.
<P>
<!-- lm: 0x2 0 -->
</UL><B>Returns</B><!-- lm: 0x11 5 -->
<UL> DosFreeThreadLocalMemory returns
the following values:<!-- lm: 0x2 3 -->
</UL> 0<!-- lm: 0x2 8 -->
<UL> NO_ERROR
<!-- lm: 0x2 3 -->
</UL>87<!-- lm: 0x2 8 -->
<UL> ERROR_INVALID_PARAMETER<!-- lm: 0x2 5 -->
</UL><!-- lm: 0x2 0 -->
</UL><B>Remarks</B><!-- lm: 0x11 5 -->
<UL> When a process is started, a
small block of memory is set aside to be used as a thread-local memory area.
This memory is at the same virtual address for each thread, but is backed
by different physical memory. This permits each thread to have a small block
of memory that is unique, or local, to that thread.
<P>
The thread-local memory area consists of 32 DWORDs (128 bytes), each DWORD
being 32-bits in size.
<P>
<!-- lm: 0x2 0 -->
</UL><B>Related Functions</B><!-- lm: 0x11 5 -->
<UL><!-- lm: 0x2 3 -->
</UL> o<!-- lm: 0x2 5 -->
<UL>DosAllocThreadLocalMemory
<!-- lm: 0x2 5 -->
<P>
<!-- lm: 0x2 0 -->
</UL><B>Example Code</B><!-- lm: 0x11 5 -->
<UL> The following code example
allocates a thread-local memory block of 6 DWORDs, then frees it.
<PRE> #define  INCL_DOSPROCESS  /* Memory Manager values */
 #include &lt;os2.h&gt;

 #include &lt;stdio.h&gt;  /* For printf */

 PVOID    pMemBlock;  /* Pointer to the memory block returned */
 APIRET   rc;         /* Return code */

    rc = DosAllocThreadLocalMemory(6, &amp;pMemBlock); /* Allocate 6 DWORDs */

    if (rc != NO_ERROR)
    {
        printf("DosAllocThreadLocalMemory error: return code = %ld", rc);
        return 1;
    }


    /* ... Use the thread-local memory block ... */

    rc = DosFreeThreadLocalMemory(pMemBlock); /* Free the memory block */

    if (rc != NO_ERROR)
    {
        printf("DosFreeThreadLocalMemory error: return code = %ld", rc);
        return 1;
    }

    return 0;
</PRE>
<!-- lm: 0x2 0 -->
</UL>

<P><HR>

<A HREF="052_L3_DosAllocThreadLocalM.html">[Back: DosAllocThreadLocalMemory]</A> <BR>
<A HREF="054_L3_DosQuerySysInfo.html">[Next: DosQuerySysInfo]</A> 
</BODY>
</HTML>
