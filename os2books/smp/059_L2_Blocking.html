<HTML>
<HEAD>
<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="TEXT/HTML; CHARSET=UTF-8">
<TITLE>Blocking</TITLE>
</HEAD>
<BODY>
<H1>Blocking</H1><!-- entering slot 61 -->
<P>
As shown in the last example, there are special considerations that must
be followed when blocking in an MP aware device driver. Because blocking
with a spinlock owned can cause deadlock, the DevHelp_Block service will
unlock spinlocks as part of the blocking sequence. When the run is done
and the blocked thread begins execution again, it must again lock any required
spinlocks.
<P>
All system components that use spinlocks must be aware of calls that may
block. For example, the file system, which calls a device driver to perform
I/O, will almost always block in the device driver. The file system therefore
should release all spinlocks before calling the device driver. In general,
release all spinlocks before making a call that could block.

<P><HR>

<A HREF="058_L2_BlockingWithSpinlock.html">[Back: Blocking With Spinlocks Locked]</A> <BR>
<A HREF="060_L2_InterruptProcessing.html">[Next: Interrupt Processing]</A> 
</BODY>
</HTML>
