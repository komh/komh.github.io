<HTML>
<HEAD>
<TITLE>System Default / User Default Locale ID</TITLE>
</HEAD>
<BODY>
<H1>System Default / User Default Locale ID</H1><!-- entering slot 157 -->
<P>
System Default / User Default Locale ID
<P>
This is a new feature which is not supported by the original US Open32.

<P>
Windows 95 asks the user to choose one language to use on the system at
installation time.  This language designates language ID and its associated
locale ID that are to be used as a default locale by application programs.
 (The language ID is a lower word of a double word locale ID).  In addition
to this user-selected (user default) language ID and locale ID, there's
a system default language ID and locale ID, which are usually not important
for user-invoked application programs but might be used by system programs.

<P>
On the other hand, at this moment, it is not clear on new OS/2 how language
or locale is selected by the user.  The installation program may or may
not display a panel for the user to select a language or locale, just like
Windows 95.  And, it is not clear how Open32 can know the system language
or locale although there might be no generally available method to retrieve
the information.  So, the following discussion assumes there's no good method
provided by the base operating system to determine the system and user-selected
language or locale.
<P>
On Open32, the system default locale ID is determined by country code of
a process (e.g. 0x0409 &lt;&lt;American English&lt;;&gt; is taken for 001
country &lt;&lt;USA&lt;;&gt;).  Of course, country code does not give us
enough information to determine the language of the base operating system
and they may or may not be changed by the user, but there's no better way
than using them.  On the other hand, the user default locale ID is determined
by<I> LANG</I> environment variable and, if necessary, by codepage of a
process.  If and only if the LANG environment variable is not set, Open32
utilizes country code and codepage of a process for the determination.  If
the LANG is not changed by the user, the user default locale ID usually
becomes the same as the system default locale ID, but for DBCS countries
that are providing two languages by switching codepages, reflecting the
current codepage brings a consistent result to the user.  Precisely speaking,
Open32  does not maintain those locale IDs but associated language IDs.
(Locale ID = Language ID + Sort ID)  Open32 makes a locale ID from a language
ID when requested.
<P>
<!-- Unable to decode bitmap format --><IMG SRC="149_L4_SystemDefaultUserDef_7.gif" WIDTH=687 HEIGHT=234>
<P>
As described above, Open32 utilizes<I> country code, LANG, codepage</I> to
determine default locale IDs.  From this, there's the following limitations:
<!-- lm: 0x2 3 -->
<UL>
<P>
<LI><!-- lm: 0x2 6 -->If the country has more than one languages, the system
default locale ID is set for the primary language of the country.<!-- lm: 0x2 3 -->
<P>
<LI><!-- lm: 0x2 6 -->If LANG is not set, the user default locale ID has
the same limitation as the system default locale ID.<!-- lm: 0x2 1 -->
</UL>
<P>
Therefore, there's no method to change the system default locale ID, other
than changing the country code in CONFIG.SYS file.  But, this is not recommended
because it may affect many other OS/2 programs' behavior.  As for the user
default locale ID, the user can either change LANG environment variable
in CONFIG.SYS or change its setting value at command shell to invoke a Open32
application program.  But, the user should be aware that changing the LANG
environment variable in CONFIG.SYS file may affect other LANG -aware application
programs' behavior (usually XPG/4 compliant programs).  To change a certain
Open32 application's user default locale ID only, the LANG setting value
at command shell is useful.

<P><HR>

<A HREF="148_L4_SupportedInstalledLo.html">[Back: Supported / Installed Locales]</A> <BR>
<A HREF="150_L4_ThreadLocaleID.html">[Next: Thread Locale ID]</A> 
</BODY>
</HTML>
