<HTML>
<HEAD>
<TITLE>Stream Input and Output</TITLE>
</HEAD>
<BODY>
<H1>Stream Input and Output</H1><!-- entering slot 26 -->
<PRE>ÚÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¿
³A stream can be accessed either by byte-based or by wchar_t based.    ³
³From an Internationalization's view point, wide-based access is       ³
³recommended.                                                          ³
ÀÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÙ
</PRE>

<P>
In the IBM Visual Age C++ for OS/2, all input and output are mapped into
logical data streams, either in text or in binary. An application can access
a text stream with multibyte based operations or wide character based operations.
 By using wide-based operations, the application can read and write wide
strings in the same manner as multibyte strings.  Moreover, wide-character
will make the application encoding and code page independent.
<P>
Coresspondence between byte-based and wide-based stream I/O functions. Equivalent
<B>stdio</B> I/O functions are available respectively.
<PRE>ÚÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÂÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÂÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¿
³byte-based          ³wide-based          ³Descriptions             ³
ÃÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÅÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÅÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ´
³getc/getchar        ³getwc/getwchar      ³Read a (wide) character  ³
³                    ³                    ³from the stdio.          ³
ÃÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÅÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÅÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ´
³fgetc               ³fgetwc              ³Read a (wide) character  ³
³                    ³                    ³from a specified input   ³
³                    ³                    ³stream.                  ³
ÃÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÅÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÅÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ´
³fgets               ³fgetws              ³Read a (wide) string from³
³                    ³                    ³a specified input stream.³
ÃÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÅÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÅÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ´
³putc/putchar        ³putwc/putwchar      ³Prints a (wide) character³
³                    ³                    ³to the stdio.            ³
ÃÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÅÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÅÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ´
³fputc               ³fputwc              ³Prints a (wide) character³
³                    ³                    ³to a specified output    ³
³                    ³                    ³stream.                  ³
ÃÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÅÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÅÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ´
³fputs               ³fputws              ³Prints a (wide) string to³
³                    ³                    ³a specified output       ³
³                    ³                    ³stream.                  ³
ÃÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÅÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÅÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ´
³ungetc              ³ungetwc             ³Pushes a (wide) character³
³                    ³                    ³back to a specified input³
³                    ³                    ³stream.                  ³
ÀÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÁÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÁÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÙ
</PRE>
In addition,<B> %lc</B> and<B> %ls</B> specifiers of the formatted I/O functions
such as<B> fprintf()</B> and<B> scanf()</B> can be used to perform wide-based
stream I/O.
<BR>
Reading a wide string from a text stream
<BR>

<PRE> ...
#include &lt;stdio.h&gt;
#include &lt;wchar.h&gt;

 ...
char* readProdFile()
{
FILE* fh;
wchar_t awcBuf[PROD_REC_MAXLEN+2];     /* +2 for '\n' &amp; '\0'      */

    ...
   if( (fh = fopen( pszFnameProd, "r" )) == NULL )
   {
      logError( ERR_FILE_OPEN, MPFROMP(pszFnameProd) );
      return NULL;
   }

   while( <B>fgetws( awcBuf, PROD_REC_MAXLEN+2, fh )</B> != NULL )
   {
       ...
   }
}
</PRE>

<P>
<B>Note: </B> Once you apply the wide-I/O functions to a stream, using non-wide-character
functions on the same stream results in an unexpected error in the<B> ungetwc()
</B>function.

<P><HR>

<A HREF="023_L3_InterfacebetweenWide.html">[Back: Interface between Wide-based Part and Multibyte-based Subsystems]</A> <BR>
<A HREF="025_L2_ProcessingStrings.html">[Next: Processing Strings]</A> 
</BODY>
</HTML>
