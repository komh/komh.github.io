<HTML>
<HEAD>
<TITLE>DosAllocShrSeg</TITLE>
</HEAD>
<BODY>
<H1>DosAllocShrSeg</H1><!-- entering slot 4 -->Bindings:  <A HREF="178_L2H_DosAllocShrSeg.html">C</A>,
<A HREF="353_L2H_DosAllocShrSeg.html">MASM</A>
<BR>

<P>
This call allocates a named shared memory segment to a process.<!-- lm: 0x2 1 -->
<UL>
<P>
DosAllocShrSeg<!-- lm: 0x2 20 -->
<UL> (Size, Name, Selector)<!-- lm: 0x2 1 -->
</UL><!-- lm: 0x2 1 -->
<P>
<B>Size</B> (USHORT) - input<!-- lm: 0x11 4 -->
<UL> Number of bytes requested.
 The value specified must be less than or equal to 65535.  A value of 0
indicates 65536 bytes.<!-- lm: 0x2 1 -->
</UL><B> Name</B> (PSZ) - input
<!-- lm: 0x11 4 -->
<UL>Address of the name string associated with the shared
memory segment to be allocated. Name specifies the symbolic name for the
shared memory segment. The name string is an ASCIIZ string in the format
of an OS/2 file name in a subdirectory called \SHAREMEM\. The name string
must include the prefix \SHAREMEM\. For example \SHAREMEM\name.<!-- lm: 0x2 1 -->
</UL><B> Selector
</B>(PSEL) - output<!-- lm: 0x11 4 -->
<UL> Address where the selector of
the allocated segment is returned.<!-- lm: 0x2 1 -->
</UL><B> rc</B> (USHORT)
- return<!-- lm: 0x11 4 -->
<UL> Return code descriptions are:<!-- lm: 0x2 4 -->
<P>
<LI><!-- lm: 0x2 14 -->NO_ERROR<!-- lm: 0x2 4 --> 8<!-- lm: 0x2 14 -->
<UL> ERROR_NOT_ENOUGH_MEMORY
<!-- lm: 0x2 4 -->
</UL>123<!-- lm: 0x2 14 -->
<UL> ERROR_INVALID_NAME<!-- lm: 0x2 4 -->
</UL>183<!-- lm: 0x2 14 -->
<UL> ERROR_ALREADY_EXISTS<!-- lm: 0x2 1 -->
</UL><B>Remarks</B>
<P>
DosAllocShrSeg allocates a named segment of up to 64KB in size, which is
movable and swappable. The segment can be shared by any process that knows
the name of the segment.
<P>
To access the shared segment, another process issues <A HREF="070_L2_DosGetShrSeg.html">DosGetShrSeg</A>,
specifying the segment name. The selector returned by <A HREF="070_L2_DosGetShrSeg.html">DosGetShrSeg
</A>is the same as the one returned by DosAllocShrSeg.
<P>
The maximum number of segments a process can define with DosAllocShrSeg
or access with <A HREF="070_L2_DosGetShrSeg.html">DosGetShrSeg</A> is 256.

<P>
<B>Note: </B> This request may be issued from privilege level 2.  However,
the segment is allocated as a privilege level 3 segment.<!-- lm: 0x2 1 -->
<P>


<P><HR>

<A HREF="002_L2_DosAllocSeg.html">[Back: DosAllocSeg]</A> <BR>
<A HREF="004_L2_DosBeep.html">[Next: DosBeep]</A> 
</BODY>
</HTML>
