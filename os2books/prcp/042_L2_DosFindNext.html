<HTML>
<HEAD>
<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="TEXT/HTML; CHARSET=UTF-8">
<TITLE>DosFindNext</TITLE>
</HEAD>
<BODY>
<H1>DosFindNext</H1><!-- entering slot 53 -->Bindings:  <A HREF="217_L2H_DosFindNext.html">C</A>,
<A HREF="392_L2H_DosFindNext.html">MASM</A>
<BR>

<P>
This call locates the next set of directory entries that match the name
specified in the previous <A HREF="040_L2_DosFindFirst.html">DosFindFirst</A>,
<A HREF="041_L2_DosFindFirst2.html">DosFindFirst2</A>, or DosFindNext call.
<!-- lm: 0x2 1 -->
<UL>
<P>
DosFindNext<!-- lm: 0x2 16 -->
<UL> (DirHandle, ResultBuf, ResultBufLen,
SearchCount)<!-- lm: 0x2 1 -->
</UL><!-- lm: 0x2 1 -->
<P>
<B>DirHandle</B> (HDIR) - input<!-- lm: 0x11 4 -->
<UL> Handle associated
with a previous <A HREF="040_L2_DosFindFirst.html">DosFindFirst</A> or DosFindNext
function call.<!-- lm: 0x2 1 -->
</UL><B> ResultBuf</B> (PFILEFINDBUF) -
output<!-- lm: 0x11 4 -->
<UL> Address of the directory search information
structure.  The information reflects the last <A HREF="012_L2_DosClose.html">DosClose
</A>or <A HREF="005_L2_DosBufReset.html">DosBufReset</A> call.
<P>
It is possible, if the EA information for a file is 64K, that the system
can never be able to return the full EA information for a file.
<P>
For the continuation of an FileInfoLevel 3 search, this buffer should contain
input in the same format as a <A HREF="041_L2_DosFindFirst2.html">DosFindFirst2
</A>FileInfoLevel 3 search.<!-- lm: 0x2 4 -->
<P>
<B>filedate</B> (FDATE)<!-- lm: 0x11 7 -->
<UL> Structure containing the
date of file creation.<!-- lm: 0x2 7 -->
<P>
Bit<!-- lm: 0x2 17 -->
<UL> Description<!-- lm: 0x2 7 -->
</UL>15-9<!-- lm: 0x2 17 -->
<UL> Year, in binary, of file creation<!-- lm: 0x2 7 -->
</UL>8-5<!-- lm: 0x2 17 -->
<UL> Month, in binary, of file creation<!-- lm: 0x2 7 -->
</UL>4-0<!-- lm: 0x2 17 -->
<UL> Day, in binary, of file creation.<!-- lm: 0x2 4 -->
</UL><B> filetime
</B>(FTIME)<!-- lm: 0x11 7 -->
<UL> Structure containing the time of file
creation.<!-- lm: 0x2 7 -->
<P>
Bit<!-- lm: 0x2 17 -->
<UL> Description<!-- lm: 0x2 7 -->
</UL>15-11<!-- lm: 0x2 17 -->
<UL> Hours, in binary, of file creation<!-- lm: 0x2 7 -->
</UL>10-5<!-- lm: 0x2 17 -->
<UL> Minutes, in binary, of file creation<!-- lm: 0x2 7 -->
</UL>4-0<!-- lm: 0x2 17 -->
<UL> Seconds, in binary number of two-second
increments, of file creation.<!-- lm: 0x2 4 -->
</UL><B> fileaccessdate
</B>(FDATE)<!-- lm: 0x11 7 -->
<UL> Structure containing the date of last
access. See FDATE in filedate.<!-- lm: 0x2 4 -->
</UL><B> fileaccesstime
</B>(FTIME)<!-- lm: 0x11 7 -->
<UL> Structure containing the time of last
access. See FTIME in filetime.<!-- lm: 0x2 4 -->
</UL><B> writeaccessdate
</B>(FDATE)<!-- lm: 0x11 7 -->
<UL> Structure containing the date of last
write. See FDATE in filedate.<!-- lm: 0x2 4 -->
</UL><B> writeaccesstime
</B>(FTIME)<!-- lm: 0x11 7 -->
<UL> Structure containing the time of last
write. See FTIME in filetime.<!-- lm: 0x2 4 -->
</UL><B> filesize</B> (ULONG)
<!-- lm: 0x11 7 -->
<UL>File size.<!-- lm: 0x2 4 -->
</UL><B> filealloc
</B>(ULONG)<!-- lm: 0x11 7 -->
<UL> Allocated file size.<!-- lm: 0x2 4 -->
</UL><B> fileattrib
</B>(USHORT)<!-- lm: 0x11 7 -->
<UL> Attributes of the file, defined in
<A HREF="145_L2_DosSetFileMode.html">DosSetFileMode</A>.<!-- lm: 0x2 4 -->
</UL><B> length
</B>(UCHAR)<!-- lm: 0x11 7 -->
<UL> Length of the ASCIIZ name string.<!-- lm: 0x2 4 -->
</UL><B> matchfilename
</B>(CHAR)<!-- lm: 0x11 7 -->
<UL> ASCIIZ name string for the first occurrence
of FileName.<!-- lm: 0x2 1 -->
</UL><B> ResultBufLen</B> (USHORT) - input
<!-- lm: 0x11 4 -->
<UL>Length of ResultBuf<!-- lm: 0x2 1 -->
</UL><B> SearchCount
</B>(PUSHORT) - input/output<!-- lm: 0x11 4 -->
<UL> Address of the number
of matching entries requested in ResultBuf. On return, this field contains
the number of entries placed into ResultBuf.<!-- lm: 0x2 1 -->
</UL><B> rc
</B>(USHORT) - return<!-- lm: 0x11 4 -->
<UL> Return code descriptions are:
<!-- lm: 0x2 4 -->
<P>
<LI><!-- lm: 0x2 14 -->NO_ERROR<!-- lm: 0x2 4 --> 6<!-- lm: 0x2 14 -->
<UL> ERROR_INVALID_HANDLE
<!-- lm: 0x2 4 -->
</UL>18<!-- lm: 0x2 14 -->
<UL> ERROR_NO_MORE_FILES<!-- lm: 0x2 4 -->
</UL>26<!-- lm: 0x2 14 -->
<UL> ERROR_NOT_DOS_DISK<!-- lm: 0x2 4 -->
</UL>87<!-- lm: 0x2 14 -->
<UL> ERROR_INVALID_PARAMETER<!-- lm: 0x2 4 -->
</UL>111<!-- lm: 0x2 14 -->
<UL> ERROR_BUFFER_OVERFLOW<!-- lm: 0x2 4 -->
</UL>275<!-- lm: 0x2 14 -->
<UL> ERROR_EAS_DIDNT_FIT<!-- lm: 0x2 1 -->
</UL><B>Remarks</B>
<P>
The file name in FileName can contain global file name characters. If no
more matching files are found, an error code is returned.
<P>
If an ERROR_BUFFER_OVERFLOW error is returned, further calls to DosFindNext
will start the search from the same entry.
<P>
If an ERROR_EAS_DIDNT_FIT error is returned, then the buffer was too small
to hold the EAs for the first matching entry being returned. A subsequent
call to DosFindNext will get the next matching entry. This enables the search
to continue if the EAs being returned are too big to fit in the buffer.
You may use <A HREF="119_L2_DosQPathInfo.html">DosQPathInfo</A> to retrieve
the EAs for the matching entry by using the EA arguments that were used
for the <A HREF="041_L2_DosFindFirst2.html">DosFindFirst2</A> call and the
name that was returned by <A HREF="041_L2_DosFindFirst2.html">DosFindFirst2</A>.

<P>
In the case of ERROR_EAS_DIDNT_FIT, only information for the first matching
entry is returned. This entry is the one whose EAs did not fit in the buffer.
The information returned is in the format of that returned for InfoLevel
2. No further entries are returned in the buffer even if they could fit
in the remaining space.
<P>

<BR>
<B>Family API Considerations</B>
<P>
Some options operate differently in the DOS mode than in OS/2 mode.  Therefore,
the following restriction applies to DosFindNext when coding for the DOS
mode:<!-- lm: 0x2 1 -->
<P>
o<!-- entering slot 54 --><!-- lm: 0x2 3 -->
<UL> DirHandle must always
equal 1.<!-- lm: 0x2 1 -->
</UL>

<P><HR>

<A HREF="041_L2_DosFindFirst2.html">[Back: DosFindFirst2]</A> <BR>
<A HREF="043_L2_DosFlagProcess.html">[Next: DosFlagProcess]</A> 
</BODY>
</HTML>
