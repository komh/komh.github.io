<HTML>
<HEAD>
<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="TEXT/HTML; CHARSET=UTF-8">
<TITLE>DosCallback</TITLE>
<STYLE>
PRE {
  FONT-FAMILY: Consolas, "Lucida Console", "Courier New", Courier, MONOSPACE;
}
</STYLE>
</HEAD>
<BODY>
<H1>DosCallback</H1><!-- entering slot 7 -->Bindings:  <A HREF="181_L2H_DosCallback.html">C</A>,
<A HREF="356_L2H_DosCallback.html">MASM</A>
<BR>

<P>
This call provides a privilege level 2 IOPL segment to call a privilege
level 3 application segment.<!-- lm: 0x2 1 -->
<UL>
<P>
DosCallback<!-- lm: 0x2 16 -->
<UL> (Ring3Routine)<!-- lm: 0x2 1 -->
</UL><!-- lm: 0x2 1 -->
<P>
<B>Ring3Routine</B> (PFN) - input<!-- lm: 0x11 4 -->
<UL> Address of the
privilege level 3 application routine to be called.<!-- lm: 0x2 1 -->
</UL><B>Remarks</B>
<P>
This function allows a routine executing with I/O privilege (at privilege
level 2) to call a segment that is executing at privilege level 3 and also
to have the target routine execute at privilege level 3; for example, not
to allow/require the target routine to be privilege level 2 conforming.

<P>
The requested routine is given control at privilege level 3 and when it
completes execution and returns, return is made to the privilege level 2
calling routine.
<P>
All registers except FLAGs are passed intact across this call return sequence
and may be used to pass parameters or data. Any addresses passed from privilege
level 2 to privilege level 3 must be based on privilege level 3 selectors
only as the privilege level 3 code does not have proper addressability to
any privilege level 2 data selectors.
<P>
The privilege level 2 stack can not be used to pass data to the privilege
level 3 routine.
<P>
If DosCallback is used in a nested fashion such that a privilege level 3
routine issues a call to a privilege level 2 routine while performing a
"Callback" operation (after being invoked by "Callback" but before having
issued a Far RET back to the privilege level 2 code), any subsequent DosCallback
requests must complete execution and issue their corresponding Far RETs
in last-in-first-out (LIFO) order.

<P><HR>

<A HREF="005_L2_DosBufReset.html">[Back: DosBufReset]</A> <BR>
<A HREF="007_L2_DosCallNmPipe.html">[Next: DosCallNmPipe]</A> 
</BODY>
</HTML>
