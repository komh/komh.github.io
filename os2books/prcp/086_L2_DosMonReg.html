<HTML>
<HEAD>
<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="TEXT/HTML; CHARSET=UTF-8">
<TITLE>DosMonReg</TITLE>
</HEAD>
<BODY>
<H1>DosMonReg</H1><!-- entering slot 103 -->Bindings:  <A HREF="261_L2H_DosMonReg.html">C</A>,
<A HREF="436_L2H_DosMonReg.html">MASM</A>
<BR>

<P>
This call establishes an input and output buffer structure to monitor an
I/O stream for a character device.<!-- lm: 0x2 1 -->
<UL>
<P>
DosMonReg<!-- lm: 0x2 15 -->
<UL> (Handle, BufferI, BufferO, Posflag, Index)
<!-- lm: 0x2 1 -->
</UL><!-- lm: 0x2 1 -->
<P>
<B>Handle</B> (HMONITOR) - input<!-- lm: 0x11 4 -->
<UL> Device handle returned
from a previous <A HREF="084_L2_DosMonOpen.html">DosMonOpen</A> call.<!-- lm: 0x2 1 -->
</UL><B> BufferI
</B>(PBYTE) - input<!-- lm: 0x11 4 -->
<UL> Address of the monitor's input
buffer.  The monitor dispatcher moves data records into this buffer from
the device driver (if the monitor is the first monitor in the monitor chain)
or from the previous monitor, if any, in the monitor chain.  The monitor
takes data from this buffer for filtering by calling <A HREF="085_L2_DosMonRead.html">DosMonRead</A>.
<!-- lm: 0x2 1 -->
</UL><B>BufferO</B> (PBYTE) - input<!-- lm: 0x11 4 -->
<UL> Address
of the monitor's output buffer.  The monitor places filtered data into this
buffer by calling <A HREF="087_L2_DosMonWrite.html">DosMonWrite</A>.  The
monitor dispatcher moves data records from this buffer to the device driver
(if the monitor is the last monitor in the monitor chain) or to the next
monitor, if any, in the monitor chain.<!-- lm: 0x2 1 -->
</UL><B> Posflag
</B>(USHORT) - input<!-- lm: 0x11 4 -->
<UL> Used to specify the placement
of a monitor's buffers with the monitor chain (FIRST, LAST or DEFAULT) and
whether one or two threads are created by the monitor dispatcher to handle
data movement.<!-- lm: 0x2 4 -->
<P>
Value<!-- lm: 0x2 14 -->
<UL> Definition<!-- lm: 0x2 4 -->
</UL>0<!-- lm: 0x2 14 -->
<UL> DEFAULT (no position preference) and one
thread for data movement.<!-- lm: 0x2 4 -->
</UL>1<!-- lm: 0x2 14 -->
<UL> FIRST (monitor placed at beginning of monitor
chain) and one thread for data movement.<!-- lm: 0x2 4 -->
</UL>2<!-- lm: 0x2 14 -->
<UL> LAST (monitor placed at end of monitor chain)
and one thread for data movement.<!-- lm: 0x2 4 -->
</UL>3<!-- lm: 0x2 14 -->
<UL> DEFAULT with two threads for data movement.
<!-- lm: 0x2 4 -->
</UL>4<!-- lm: 0x2 14 -->
<UL> FIRST with two threads for data movement.
<!-- lm: 0x2 4 -->
</UL>5<!-- lm: 0x2 14 -->
<UL> LAST with two threads for data movement.
<!-- lm: 0x2 1 -->
</UL> <!-- lm: 0x11 4 -->
<UL> The first monitor in a
monitor chain that registers as FIRST is placed at the head of the monitor
chain.  The next monitor that registers as FIRST follows the last monitor
registered as FIRST, and so on.  Similarly, the first monitor that registers
as LAST is placed at the end of the monitor chain. The next monitor that
registers as LAST is placed before the last monitor that registered as LAST,
and so on.  The first monitor that registers as DEFAULT is placed before
the last monitor, if any, that registered as LAST.  The next monitor that
registers as DEFAULT is placed before the last monitor that registered as
DEFAULT, and so on.<!-- lm: 0x2 1 -->
</UL><B> Index</B> (USHORT) - input
<!-- lm: 0x11 4 -->
<UL>Device specific value. For the keyboard it pertains
to the session you wish to register a monitor on.  For the printer it pertains
to the data or code page monitor chain.<!-- lm: 0x2 1 -->
</UL><B> rc</B> (USHORT)
- return<!-- lm: 0x11 4 -->
<UL> Return code descriptions are:<!-- lm: 0x2 4 -->
<P>
<LI><!-- lm: 0x2 14 -->NO_ERROR<!-- lm: 0x2 4 --> 8<!-- lm: 0x2 14 -->
<UL> ERROR_NOT_ENOUGH_MEMORY
<!-- lm: 0x2 4 -->
</UL>165<!-- lm: 0x2 14 -->
<UL> ERROR_MONITORS_NOT_SUPPORTED<!-- lm: 0x2 4 -->
</UL>379<!-- lm: 0x2 14 -->
<UL> ERROR_MON_INVALID_PARMS<!-- lm: 0x2 4 -->
</UL>381<!-- lm: 0x2 14 -->
<UL> ERROR_MON_INVALID_HANDLE<!-- lm: 0x2 4 -->
</UL>382<!-- lm: 0x2 14 -->
<UL> ERROR_MON_BUFFER_TOO_SMALL<!-- lm: 0x2 1 -->
</UL><B>Remarks</B>
<P>
For a detailed description of this call see the chapter "Character Device
Monitors" in the IBM Operating System/2 Version 1.2 I/O Subsystems And Device
Support Volume 1.

<P><HR>

<A HREF="085_L2_DosMonRead.html">[Back: DosMonRead]</A> <BR>
<A HREF="087_L2_DosMonWrite.html">[Next: DosMonWrite]</A> 
</BODY>
</HTML>
