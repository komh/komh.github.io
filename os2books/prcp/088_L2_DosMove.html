<HTML>
<HEAD>
<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="TEXT/HTML; CHARSET=UTF-8">
<TITLE>DosMove</TITLE>
</HEAD>
<BODY>
<H1>DosMove</H1><!-- entering slot 105 -->Bindings:  <A HREF="263_L2H_DosMove.html">C</A>,
<A HREF="438_L2H_DosMove.html">MASM</A>
<BR>

<P>
This call moves a file object to another location and changes its name.
<!-- lm: 0x2 1 -->
<UL>
<P>
DosMove<!-- lm: 0x2 12 -->
<UL> (OldPathName, NewPathName, Reserved)<!-- lm: 0x2 1 -->
</UL><!-- lm: 0x2 1 -->
<P>
<B>OldPathName</B> (PSZ) - input<!-- lm: 0x11 4 -->
<UL> Address of the
old path name of the file to be moved.<!-- lm: 0x2 1 -->
</UL><B> NewPathName
</B>(PSZ) - input<!-- lm: 0x11 4 -->
<UL> Address of the new path name of
the file.<!-- lm: 0x2 1 -->
</UL><B> Reserved</B> (ULONG) - input<!-- lm: 0x11 4 -->
<UL> Reserved
and must be set to zero.<!-- lm: 0x2 1 -->
</UL><B> rc</B> (USHORT) - return
<!-- lm: 0x11 4 -->
<UL>Return code descriptions are:<!-- lm: 0x2 4 -->
<P>
<LI><!-- lm: 0x2 14 -->NO_ERROR<!-- lm: 0x2 4 --> 2<!-- lm: 0x2 14 -->
<UL> ERROR_FILE_NOT_FOUND
<!-- lm: 0x2 4 -->
</UL>3<!-- lm: 0x2 14 -->
<UL> ERROR_PATH_NOT_FOUND<!-- lm: 0x2 4 -->
</UL>5<!-- lm: 0x2 14 -->
<UL> ERROR_ACCESS_DENIED<!-- lm: 0x2 4 -->
</UL>17<!-- lm: 0x2 14 -->
<UL> ERROR_NOT_SAME_DEVICE<!-- lm: 0x2 4 -->
</UL>26<!-- lm: 0x2 14 -->
<UL> ERROR_NOT_DOS_DISK<!-- lm: 0x2 4 -->
</UL>32<!-- lm: 0x2 14 -->
<UL> ERROR_SHARING_VIOLATION<!-- lm: 0x2 4 -->
</UL>36<!-- lm: 0x2 14 -->
<UL> ERROR_SHARING_BUFFER_EXCEEDED<!-- lm: 0x2 4 -->
</UL>87<!-- lm: 0x2 14 -->
<UL> ERROR_INVALID_PARAMETER<!-- lm: 0x2 4 -->
</UL>108<!-- lm: 0x2 14 -->
<UL> ERROR_DRIVE_LOCKED<!-- lm: 0x2 4 -->
</UL>206<!-- lm: 0x2 14 -->
<UL> ERROR_FILENAME_EXCED_RANGE<!-- lm: 0x2 4 -->
</UL>250<!-- lm: 0x2 14 -->
<UL> ERROR_CIRCULARITY_REQUESTED<!-- lm: 0x2 4 -->
</UL>251<!-- lm: 0x2 14 -->
<UL> ERROR_DIRECTORY_IN_CDS<!-- lm: 0x2 1 -->
</UL><B>Remarks</B>
<P>
This call is often used to change only the name of a file or subdirectory,
allowing the file object to remain in the same subdirectory. Global file
name characters are not allowed in the source or target name.
<P>
If the paths specified are different, this allows the subdirectory location
of the file object to be changed as well. If a drive is specified for the
target, it must be the same as the one specified or implied by the source.

<P>
Any attempts to move a parent subdirectory to one of its descendant subdirectories
are rejected, because a subdirectory cannot be both an ancestor and a descendant
of the the same subdirectory. Any attempts by a process to move the current
subdirectory or any of its ancestors are also rejected.
<P>
Attributes (times and dates) of the source file object are moved to the
target. If read-only files exist in the target path, they are not replaced.

<P>
<A HREF="120_L2_DosQSysInfo.html">DosQSysInfo</A> is called during initialization
by an application to determine the maximum path length allowed by OS/2.

<P>
DosMove can be used to change the case of a file on an FSD drive. The following
example  would change the name of the file to "File.Txt".
<PRE>DosMove("file.txt","File.Txt")
</PRE>

<P>

<BR>
<B>Family API Considerations</B>
<P>
Some options operate differently in the DOS mode than in the OS/2 mode.
 Therefore, the following restriction applies to DosMove when coding for
the DOS mode:
<P>
File names passed to OldPathName and NewPathName are truncated by the system
in the DOS mode only.  The application must truncate all files passed to
OldPathName and NewPathName in the OS/2 mode or an error code is returned.


<P><HR>

<A HREF="087_L2_DosMonWrite.html">[Back: DosMonWrite]</A> <BR>
<A HREF="089_L2_DosMuxSemWait.html">[Next: DosMuxSemWait]</A> 
</BODY>
</HTML>
