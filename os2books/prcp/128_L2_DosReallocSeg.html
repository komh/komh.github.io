<HTML>
<HEAD>
<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="TEXT/HTML; CHARSET=UTF-8">
<TITLE>DosReallocSeg</TITLE>
<STYLE>
PRE {
  FONT-FAMILY: Consolas, "Lucida Console", "Courier New", Courier, MONOSPACE;
}
</STYLE>
</HEAD>
<BODY>
<H1>DosReallocSeg</H1><!-- entering slot 158 -->Bindings:  <A HREF="303_L2H_DosReallocSeg.html">C</A>,
<A HREF="478_L2H_DosReallocSeg.html">MASM</A>
<BR>

<P>
This call reallocates a segment after discard or changes the size of a segment
already allocated.<!-- lm: 0x2 1 -->
<UL>
<P>
DosReallocSeg<!-- lm: 0x2 19 -->
<UL> (Size, Selector)<!-- lm: 0x2 1 -->
</UL><!-- lm: 0x2 1 -->
<P>
<B>Size</B> (USHORT) - input<!-- lm: 0x11 4 -->
<UL> New requested segment
size (in bytes). A value of 0 indicates 65536 bytes.<!-- lm: 0x2 1 -->
</UL><B> Selector
</B>(SEL) - input<!-- lm: 0x11 4 -->
<UL> Segment to be resized.<!-- lm: 0x2 1 -->
</UL><B> rc
</B>(USHORT) - return<!-- lm: 0x11 4 -->
<UL> Return code descriptions are:
<!-- lm: 0x2 4 -->
<P>
<LI><!-- lm: 0x2 14 -->NO_ERROR<!-- lm: 0x2 4 --> 5<!-- lm: 0x2 14 -->
<UL> ERROR_ACCESS_DENIED
<!-- lm: 0x2 4 -->
</UL>8<!-- lm: 0x2 14 -->
<UL> ERROR_NOT_ENOUGH_MEMORY<!-- lm: 0x2 1 -->
</UL><B>Remarks</B>
<P>
DosReallocSeg is called to change the size of an unshared or shared segment
allocated with a <A HREF="002_L2_DosAllocSeg.html">DosAllocSeg</A> request.

<P>
Normally, segments allocated as shared (AllocFlags bits 0 and 1 were set)
cannot be decreased in size. However, if AllocFlags bit 3 was also set,
the shared segment's size can be decreased.
<P>
DosReallocSeg is also called to reallocate a segment allocated as discardable
(AllocFlags bit 2 set) after the segment is discarded by the system. The
call to DosReallocSeg automatically locks the segment for access by the
caller, the same as if a <A HREF="077_L2_DosLockSeg.html">DosLockSeg</A> had
been issued.
<P>
<B>Note: </B> This request may be issued from privilege level 2 or 3, and
the segment being resized can be either a privilege level 2 or privilege
level 3 segment.<!-- lm: 0x2 1 -->
<P>

<P>
To change the size of huge memory allocated by <A HREF="001_L2_DosAllocHuge.html">DosAllocHuge</A>,
see <A HREF="127_L2_DosReallocHuge.html">DosReallocHuge</A>.
<P>

<BR>
<B>Family API Considerations</B>
<P>
Some options operate differently in the DOS mode than in the OS/2 mode.
Therefore, the following restriction applies to DosReallocSeg when coding
for the DOS mode.  The requested Size value is rounded up to the next paragraph
(16-byte).

<P><HR>

<A HREF="127_L2_DosReallocHuge.html">[Back: DosReallocHuge]</A> <BR>
<A HREF="129_L2_DosResumeThread.html">[Next: DosResumeThread]</A> 
</BODY>
</HTML>
