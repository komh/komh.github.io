<HTML>
<HEAD>
<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="TEXT/HTML; CHARSET=UTF-8">
<TITLE>VioGetConfig</TITLE>
</HEAD>
<BODY>
<H1>VioGetConfig</H1><!-- entering slot 707 -->Bindings:  <A HREF="703_L2H_VioGetConfig.html">C</A>,
<A HREF="747_L2H_VioGetConfig.html">MASM</A>
<BR>

<P>
This call returns the video display configuration.<!-- lm: 0x2 1 -->
<UL>
<P>
VioGetConfig<!-- lm: 0x2 17 -->
<UL> (ConfigID, ConfigData, VioHandle)<!-- lm: 0x2 1 -->
</UL><!-- lm: 0x2 1 -->
<P>
<B>ConfigID</B> (USHORT) - input<!-- lm: 0x11 4 -->
<UL> Identifies for
which display configuration information is being requested:<!-- lm: 0x2 4 -->
<P>
Value<!-- lm: 0x2 14 -->
<UL> Definition<!-- lm: 0x2 4 -->
</UL>0<!-- lm: 0x2 14 -->
<UL> Current configuration<!-- lm: 0x2 4 -->
</UL>1<!-- lm: 0x2 14 -->
<UL> Primary configuration<!-- lm: 0x2 4 -->
</UL>2<!-- lm: 0x2 14 -->
<UL> Secondary configuration.<!-- lm: 0x2 1 -->
</UL>  
<!-- lm: 0x11 4 -->
<UL>For OS/2 1.2, when ConfigID = 0, the current configuration
is returned rather than the primary configuration (as was returned in OS/2
1.0 and 1.1).  This change makes the OS/2 mode version of VioGetConfig match
the family API version that has returned the current configuration starting
with OS/2 1.0. OS/2 1.0 and 1.1 applications that issued VioGetConfig to
determine the display configuration benefit from this change.  The application
can run on the configuration selected by the operator (by issuing the MODE
command before invoking the application) rather than switching away from
the operator selected display.<!-- lm: 0x2 1 -->
</UL><B> ConfigData</B> (PVIOCONFIGINFO)
- output<!-- lm: 0x11 4 -->
<UL> Address of structure where the display
configuration is returned.<!-- lm: 0x2 4 -->
<P>
<B>length</B> (USHORT)<!-- lm: 0x11 7 -->
<UL> Input parameter to VioGetConfig.
 Length specifies the length of the data structure in bytes including Length
itself.  The maximum size structure required in OS/2 1.0 and 1.1 is 10 bytes.

<P>
The maximum size structure required in OS/2 1.2 is variable and can be determined
by issuing VioGetConfig with Length set to 2. When Length is set to 2 on
input, VioGetConfig returns the size of the maximum structure required in
the Length field on output.  When Length is not equal to 2 on input, the
Length field is modified on output to reflect the actual number of bytes
returned.  That is, if more than the maximum size was specified, the maximum
size is returned.  However, if less than the maximum size is specified,
the value returned reflects the number of bytes of complete fields returned.
<!-- lm: 0x2 4 -->
</UL><B>adaptertype</B> (USHORT)<!-- lm: 0x11 7 -->
<UL> Display
adapter type.<!-- lm: 0x2 7 -->
<P>
Value<!-- lm: 0x2 17 -->
<UL> Definition<!-- lm: 0x2 7 -->
</UL>0<!-- lm: 0x2 17 -->
<UL> Monochrome-compatible<!-- lm: 0x2 7 -->
</UL>1<!-- lm: 0x2 17 -->
<UL> Color Graphics Adapter (CGA)<!-- lm: 0x2 7 -->
</UL>2<!-- lm: 0x2 17 -->
<UL> Enhanced Graphics Adapter (EGA)<!-- lm: 0x2 7 -->
</UL>3<!-- lm: 0x2 17 -->
<UL> VGA or PS/2 Display Adapter<!-- lm: 0x2 7 -->
</UL>4-6<!-- lm: 0x2 17 -->
<UL> Reserved<!-- lm: 0x2 7 -->
</UL>7<!-- lm: 0x2 17 -->
<UL> IBM Personal System/2 Display Adapter 8514/A.
<!-- lm: 0x2 7 -->
</UL>8<!-- lm: 0x2 17 -->
<UL> IBM PS/2 Image Adapter/A<!-- lm: 0x2 7 -->
</UL>9<!-- lm: 0x2 17 -->
<UL> IBM PS/2 XGA Display Adapter<!-- lm: 0x2 4 -->
</UL>  
<!-- lm: 0x11 7 -->
<UL>Values ranging from 0-4095 are reserved for IBM.
<!-- lm: 0x2 4 -->
</UL><B>displaytype</B> (USHORT)<!-- lm: 0x11 7 -->
<UL> Display
or monitor type.<!-- lm: 0x2 7 -->
<P>
Value<!-- lm: 0x2 17 -->
<UL> Definition<!-- lm: 0x2 7 -->
</UL>0<!-- lm: 0x2 17 -->
<UL> Monochrome display<!-- lm: 0x2 7 -->
</UL>1<!-- lm: 0x2 17 -->
<UL> Color display<!-- lm: 0x2 7 -->
</UL>2<!-- lm: 0x2 17 -->
<UL> Enhanced Color Display<!-- lm: 0x2 7 -->
</UL>3<!-- lm: 0x2 17 -->
<UL> PS/2 Monochrome Display 8503<!-- lm: 0x2 7 -->
</UL>4<!-- lm: 0x2 17 -->
<UL> PS/2 Color Displays 8512 and 8513<!-- lm: 0x2 7 -->
</UL>5-8<!-- lm: 0x2 17 -->
<UL> Reserved<!-- lm: 0x2 7 -->
</UL>9<!-- lm: 0x2 17 -->
<UL> PS/2 Color Display 8514<!-- lm: 0x2 7 -->
</UL>10<!-- lm: 0x2 17 -->
<UL> IBM Plasma Display Panel<!-- lm: 0x2 7 -->
</UL>11<!-- lm: 0x2 17 -->
<UL> Monochrome Displays 8507 and 8604<!-- lm: 0x2 7 -->
</UL>12<!-- lm: 0x2 17 -->
<UL> PS/2 Color Display 8515<!-- lm: 0x2 7 -->
</UL>13<!-- lm: 0x2 17 -->
<UL> Reserved<!-- lm: 0x2 4 -->
</UL>  <!-- lm: 0x11 7 -->
<UL> Values
ranging from 0-4095 are reserved for IBM.<!-- lm: 0x2 4 -->
</UL><B> adaptmem
</B>(ULONG)<!-- lm: 0x11 7 -->
<UL> Amount of memory, in bytes, on the adapter.
<!-- lm: 0x2 4 -->
</UL><B>Configuration</B># (USHORT)<!-- lm: 0x11 7 -->
<UL> Number
of the display configuration that this data corresponds to. This is assigned
by the video subsystem, not the Base Video Handler (BVH).<!-- lm: 0x2 4 -->
</UL><B> VDHVersion
</B>(USHORT)<!-- lm: 0x11 7 -->
<UL> This field is reserved.<!-- lm: 0x2 4 -->
</UL><B> Flag
bits</B> (USHORT)<!-- lm: 0x11 7 -->
<UL> Are defined as follows:<!-- lm: 0x2 7 -->
<P>
Bit<!-- lm: 0x2 17 -->
<UL> Description<!-- lm: 0x2 7 -->
</UL>15-1<!-- lm: 0x2 17 -->
<UL> Reserved<!-- lm: 0x2 7 -->
</UL>0<!-- lm: 0x2 17 -->
<UL> Power up display configuration.<!-- lm: 0x2 4 -->
</UL><B> Hardware
state buffer size</B> (ULONG)<!-- lm: 0x11 7 -->
<UL> Size of the buffer
required by the Base Video Handler (BVH) to save the full hardware state
excluding the physical display buffer.<!-- lm: 0x2 4 -->
</UL><B> Max buffer
size - full save</B> (ULONG)<!-- lm: 0x11 7 -->
<UL> Maximum size buffer
required by the BVH to save the full physical display buffer.<!-- lm: 0x2 4 -->
</UL><B> Max
buffer size - partial save</B> (ULONG)<!-- lm: 0x11 7 -->
<UL> Maximum size
buffer required by the BVH to save the portion of the physical display buffer
that is overlaid by a pop-up.<!-- lm: 0x2 4 -->
</UL><B> Offset to emulated
adapter types</B> (USHORT)<!-- lm: 0x11 7 -->
<UL> Offset within the configuration
data structure to the following information describing what other display
adapters are emulated by this display adapter.<!-- lm: 0x2 7 -->
<P>
<B>Number of Data words</B> (USHORT)<!-- lm: 0x11 10 -->
<UL> Contains a
one word field specifying a count of data words to follow.<!-- lm: 0x2 7 -->
</UL><B> Data
word 1</B> (USHORT)<!-- lm: 0x11 10 -->
<UL> Bits set in the data words
identify display adapters emulated.  Data word 1 has the following definition:
<!-- lm: 0x2 10 -->
<P>
Bit<!-- lm: 0x2 20 -->
<UL> Description<!-- lm: 0x2 10 -->
</UL>0<!-- lm: 0x2 20 -->
<UL> Monochrome/printer adapter<!-- lm: 0x2 10 -->
</UL>1<!-- lm: 0x2 20 -->
<UL> Color graphics adapter<!-- lm: 0x2 10 -->
</UL>2<!-- lm: 0x2 20 -->
<UL> Enhanced graphics adapter<!-- lm: 0x2 10 -->
</UL>3<!-- lm: 0x2 20 -->
<UL> VGA or PS/2 display adapter<!-- lm: 0x2 10 -->
</UL>4-6<!-- lm: 0x2 20 -->
<UL> Reserved<!-- lm: 0x2 10 -->
</UL>7<!-- lm: 0x2 20 -->
<UL> 8514/A Adapter<!-- lm: 0x2 10 -->
</UL>8<!-- lm: 0x2 20 -->
<UL> IBM PS/2 Image Adapter/A<!-- lm: 0x2 10 -->
</UL>9<!-- lm: 0x2 20 -->
<UL> IBM PS/2 XGA Adapter<!-- lm: 0x2 10 -->
</UL>10-15<!-- lm: 0x2 20 -->
<UL> Reserved.<!-- lm: 0x2 7 -->
</UL><B> Data
word 2</B> (USHORT)<!-- lm: 0x11 10 -->
<UL> Reserved.<!-- lm: 0x2 7 -->
</UL><B> Data
word N</B> (USHORT)<!-- lm: 0x11 10 -->
<UL> Reserved.<!-- lm: 0x2 4 -->
</UL><B> Offset
to emulated display types</B> (USHORT)<!-- lm: 0x11 7 -->
<UL> Offset within
the configuration data structure to the following information describing
what other displays are emulated by this display.<!-- lm: 0x2 7 -->
<P>
<B>Number of Data words</B> (USHORT)<!-- lm: 0x11 10 -->
<UL> One word field
specifying a count of data words to follow.<!-- lm: 0x2 7 -->
</UL><B> Data
word 1</B> (USHORT)<!-- lm: 0x11 10 -->
<UL> Bits set in the data words
identify displays emulated.  Data word 1 has the following definition:<!-- lm: 0x2 10 -->
<P>
Bit<!-- lm: 0x2 20 -->
<UL> Description<!-- lm: 0x2 10 -->
</UL>0<!-- lm: 0x2 20 -->
<UL> 5151 monochrome display<!-- lm: 0x2 10 -->
</UL>1<!-- lm: 0x2 20 -->
<UL> 5153 color<!-- entering slot 708 -->  display
<!-- lm: 0x2 10 -->
</UL>2<!-- lm: 0x2 20 -->
<UL> 5154 enhanced color display<!-- lm: 0x2 10 -->
</UL>3<!-- lm: 0x2 20 -->
<UL> 8503 monochrome display<!-- lm: 0x2 10 -->
</UL>4<!-- lm: 0x2 20 -->
<UL> 8512 or 8513 color display<!-- lm: 0x2 10 -->
</UL>5-8<!-- lm: 0x2 20 -->
<UL> Reserved<!-- lm: 0x2 10 -->
</UL>9<!-- lm: 0x2 20 -->
<UL> 8514 color display<!-- lm: 0x2 10 -->
</UL>10<!-- lm: 0x2 20 -->
<UL> IBM Plasma Display Panel<!-- lm: 0x2 10 -->
</UL>11<!-- lm: 0x2 20 -->
<UL> Monochrome Displays 8507 and 8604<!-- lm: 0x2 10 -->
</UL>12<!-- lm: 0x2 20 -->
<UL> 8515 color display<!-- lm: 0x2 10 -->
</UL>13-15<!-- lm: 0x2 20 -->
<UL> Reserved.<!-- lm: 0x2 7 -->
</UL><B> Data
word 2</B> (USHORT)<!-- lm: 0x11 10 -->
<UL> Reserved<!-- lm: 0x2 7 -->
</UL><B> Data
word N</B> (USHORT)<!-- lm: 0x11 10 -->
<UL> Reserved.<!-- lm: 0x2 1 -->
</UL><B> VioHandle
</B>(HVIO) - input<!-- lm: 0x11 4 -->
<UL> This must be zero unless the
caller is a Presentation Manager application, in which case it must be the
value returned by VioGetPs.<!-- lm: 0x2 1 -->
</UL><B> rc</B> (USHORT) -
return<!-- lm: 0x11 4 -->
<UL> Return code descriptions are:<!-- lm: 0x2 4 -->
<P>
<LI><!-- lm: 0x2 14 -->NO_ERROR<!-- lm: 0x2 4 --> 421<!-- lm: 0x2 14 -->
<UL> ERROR_VIO_INVALID_PARMS
<!-- lm: 0x2 4 -->
</UL>436<!-- lm: 0x2 14 -->
<UL> ERROR_VIO_INVALID_HANDLE<!-- lm: 0x2 4 -->
</UL>438<!-- lm: 0x2 14 -->
<UL> ERROR_VIO_INVALID_LENGTH<!-- lm: 0x2 4 -->
</UL>465<!-- lm: 0x2 14 -->
<UL> ERROR_VIO_DETACHED<!-- lm: 0x2 1 -->
</UL><B>Remarks</B>
<P>
The values returned may not be correct if the adapter cannot be properly
identified by the Base Video Handler (BVH) selected at system installation
time.  It can also be incorrect if the physical setup does not match that
indicated by the presence of the adapter or by adapter switches.  For example,
it is impossible to detect the absence of a display on a CGA or the display
attached to an EGA, despite the setup switches.

<P><HR>

<A HREF="658_L2_VioGetBuf.html">[Back: VioGetBuf]</A> <BR>
<A HREF="660_L2_VioGetCp.html">[Next: VioGetCp]</A> 
</BODY>
</HTML>
