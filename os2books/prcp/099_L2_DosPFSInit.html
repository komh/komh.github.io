<HTML>
<HEAD>
<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="TEXT/HTML; CHARSET=UTF-8">
<TITLE>DosPFSInit</TITLE>
</HEAD>
<BODY>
<H1>DosPFSInit</H1><!-- entering slot 122 -->Bindings:  <A HREF="274_L2H_DosPFSInit.html">C</A>,
<A HREF="449_L2H_DosPFSInit.html">MASM</A>
<BR>

<P>
This call allows the Font Switcher to initialize code page and font switching
for a specified printer.<!-- lm: 0x2 1 -->
<UL>
<P>
DosPFSInit<!-- lm: 0x2 14 -->
<UL> (CPHdw, FontFileName, PrinterType, PrinterName,
Instances, Reserved)<!-- lm: 0x2 1 -->
</UL><!-- lm: 0x2 1 -->
<P>
<B>CPHdw</B> (PUSHORT) - input<!-- lm: 0x11 4 -->
<UL> Address of the pointer
list, in the following format, that specifies the hardware code page and
fonts on the printer.<!-- lm: 0x2 4 -->
<P>
Word<!-- lm: 0x2 16 -->
<UL> Description<!-- lm: 0x2 4 -->
</UL> Word 0
<!-- lm: 0x2 16 -->
<UL>Number of definitions that follow.<!-- lm: 0x2 4 -->
</UL> DWord
1/N<!-- lm: 0x2 16 -->
<UL> Code page number (1st Word of DWord) and Font
ID (2nd Word of DWord) for each hardware font in order corresponding to
the hardware code page and font selection numbers. (For example, the first
code page and font ID value corresponds to the default hardware font 0,
the second, to hardware font 1, the third, to hardware font 2, and so on.
 If the default hardware font is not known, 0 should be specified for the
default code page and font).<!-- lm: 0x2 1 -->
</UL><B> FontFileName</B> (PSZ)
- input<!-- lm: 0x11 4 -->
<UL> Address of the pathname of the font file
of the specified printer that initiates the code page and font switching.
<!-- lm: 0x2 1 -->
</UL><B>PrinterType</B> (PSZ) - input<!-- lm: 0x11 4 -->
<UL> Address
of the printer type ID.<!-- lm: 0x2 1 -->
</UL><B> PrinterName</B> (PSZ)
- input<!-- lm: 0x11 4 -->
<UL> Address of the name of the printer that
initiates code page and font switching.<!-- lm: 0x2 1 -->
</UL><B> Instances
</B>(USHORT) - input<!-- lm: 0x11 4 -->
<UL> Maximum number of different
instances of use tracking code page and font switching. This value is advisory
for the Font Switcher allocating enough resources for the specified number
of instances being tracked.<!-- lm: 0x2 1 -->
</UL><B> Reserved</B> (ULONG)
- input<!-- lm: 0x11 4 -->
<UL> Reserved must be set to zero.<!-- lm: 0x2 1 -->
</UL><B> rc
</B>(USHORT) - return<!-- lm: 0x11 4 -->
<UL> Return code descriptions are
listed in the following section.<!-- lm: 0x2 1 -->
</UL><B>Remarks</B>
<P>
DosPFSInit is intended for use only by applications that replace the spooler
as a print monitor and that do code page switching. Other applications should
use printer IOCTLs to manipulate printer code page switching.
<P>
DosPFSInit is located in SPOOLCP.DLL (not DOSCALLS.LIB) and requires an
import statement in the module definition file.  Refer to the IBM Operating
System/2 Version 1.2 Building Programs, Module Definition File Statements
section for information regarding the import statement.
<P>
Return values are:<!-- lm: 0x2 1 -->
<P>
<LI><!-- lm: 0x2 11 -->Code page switcher already initialized<!-- lm: 0x2 1 -->
<BR>
<LI><!-- lm: 0x2 11 -->User entered too many ROMs in DEVINFO, initialization
continued with the rest<!-- lm: 0x2 1 -->
<BR>
<LI><!-- lm: 0x2 11 -->Wrong or missing font file ID<!-- lm: 0x2 1 -->
<BR>
<LI><!-- lm: 0x2 11 -->Code page switcher internal error<!-- lm: 0x2 1 -->
<BR>
10<!-- lm: 0x2 11 -->
<UL> Invalid printer name as input<!-- lm: 0x2 1 -->
</UL>11<!-- lm: 0x2 11 -->
<UL> Printer type input does not match that in
font file<!-- lm: 0x2 1 -->
</UL>12<!-- lm: 0x2 11 -->
<UL> Could not get storage for control blocks
<!-- lm: 0x2 1 -->
</UL>14<!-- lm: 0x2 11 -->
<UL> Could not open font file during initialization
<!-- lm: 0x2 1 -->
</UL>17<!-- lm: 0x2 11 -->
<UL> Switcher reports too many system file number
entries<!-- lm: 0x2 1 -->
</UL>19<!-- lm: 0x2 11 -->
<UL> I/O error reading font file control sequence
section<!-- lm: 0x2 1 -->
</UL>20<!-- lm: 0x2 11 -->
<UL> I/O error reading font file header<!-- lm: 0x2 1 -->
</UL>21<!-- lm: 0x2 11 -->
<UL> I/O error reading font file font definition
block<!-- lm: 0x2 1 -->
</UL>22<!-- lm: 0x2 11 -->
<UL> Some fonts bad due to error in font file,
initialization continued.<!-- lm: 0x2 1 -->
</UL>

<P><HR>

<A HREF="098_L2_DosPFSCloseUser.html">[Back: DosPFSCloseUser]</A> <BR>
<A HREF="100_L2_DosPFSQueryAct.html">[Next: DosPFSQueryAct]</A> 
</BODY>
</HTML>
