<HTML>
<HEAD>
<TITLE>VioSetMode</TITLE>
</HEAD>
<BODY>
<H1>VioSetMode</H1><!-- entering slot 743 -->Bindings:  <A HREF="733_L2H_VioSetMode.html">C</A>,
<A HREF="777_L2H_VioSetMode.html">MASM</A>
<BR>

<P>
This call sets the mode of the display.<!-- lm: 0x2 1 -->
<UL>
<P>
VioSetMode<!-- lm: 0x2 15 -->
<UL> (ModeData, VioHandle)<!-- lm: 0x2 1 -->
</UL><!-- lm: 0x2 1 -->
<P>
<B>ModeData</B> (PVIOMODEINFO) - input<!-- lm: 0x11 4 -->
<UL> Address of
the mode characteristics structure:<!-- lm: 0x2 4 -->
<P>
<B>length</B> (USHORT)<!-- lm: 0x11 7 -->
<UL> Input parameter to VioSetMode.
 Length specifies the length of the data structure in bytes including Length
itself.  The minimum structure size required is 3 bytes. OS/2 sets to the
first mode (in the list of modes supported by this display configuration)
with a data structure matching the mode data specified.<!-- lm: 0x2 4 -->
</UL><B> type
</B>(UCHAR)<!-- lm: 0x11 7 -->
<UL> Mode characteristics bit mask:<!-- lm: 0x2 7 -->
<P>
Bit<!-- lm: 0x2 17 -->
<UL> Description<!-- lm: 0x2 7 -->
</UL> 7-4<!-- lm: 0x2 17 -->
<UL> Reserved,
set to zero.<!-- lm: 0x2 7 -->
</UL> 3<!-- lm: 0x2 17 -->
<UL> 0 = VGA-compatible
modes 0 thru 13H.
<P>
1 = Native mode.<!-- lm: 0x2 7 -->
</UL> 2<!-- lm: 0x2 17 -->
<UL> 0 = Enable
color burst
<P>
1 = Disable color burst.<!-- lm: 0x2 7 -->
</UL> 1<!-- lm: 0x2 17 -->
<UL> 0
= Text mode.
<P>
1 = Graphics mode.<!-- lm: 0x2 7 -->
</UL> 0<!-- lm: 0x2 17 -->
<UL> 0 =
Monochrome compatible mode.
<P>
1 = Other.<!-- lm: 0x2 4 -->
</UL><B> numcolors</B> (UCHAR)<!-- lm: 0x11 7 -->
<UL> Number
of colors defined as a power of 2.  This is equivalent to the number of
color bits that define the color, for example:<!-- lm: 0x2 7 -->
<P>
Value<!-- lm: 0x2 17 -->
<UL> Definition<!-- lm: 0x2 7 -->
</UL>0<!-- lm: 0x2 17 -->
<UL> Monochrome modes 7, 7+, and F.<!-- lm: 0x2 7 -->
</UL>1<!-- lm: 0x2 17 -->
<UL> 2 colors.<!-- lm: 0x2 7 -->
</UL>2<!-- lm: 0x2 17 -->
<UL> 4 colors.<!-- lm: 0x2 7 -->
</UL>4<!-- lm: 0x2 17 -->
<UL> 16 colors.<!-- lm: 0x2 7 -->
</UL>8<!-- lm: 0x2 17 -->
<UL> 256 colors.<!-- lm: 0x2 4 -->
</UL><B> textcols
</B>(USHORT)<!-- lm: 0x11 7 -->
<UL> Number of text columns.<!-- lm: 0x2 4 -->
</UL><B> textrows
</B>(USHORT)<!-- lm: 0x11 7 -->
<UL> Number of text rows.<!-- lm: 0x2 4 -->
</UL><B> pelcols
</B>(USHORT)<!-- lm: 0x11 7 -->
<UL> Horizontal resolution, number of pel
columns.<!-- lm: 0x2 4 -->
</UL><B> pelrows</B> (USHORT)<!-- lm: 0x11 7 -->
<UL> Vertical
resolution, number of pel rows.<!-- lm: 0x2 4 -->
</UL><B> Attribute Format
</B>(UCHAR)<!-- lm: 0x11 7 -->
<UL> Identifies the format of the attributes.
<!-- lm: 0x2 4 -->
</UL><B>Number of Attributes</B> (UCHAR)<!-- lm: 0x11 7 -->
<UL> Identifies
the number of attributes in a character cell.<!-- lm: 0x2 4 -->
</UL><B> Buffer
Address</B> (ULONG)<!-- lm: 0x11 7 -->
<UL> 32-bit physical address of the
physical display buffer for this mode.<!-- lm: 0x2 4 -->
</UL><B> Buffer
Length</B> (ULONG)<!-- lm: 0x11 7 -->
<UL> Length of the physical display
buffer for this mode.<!-- lm: 0x2 4 -->
</UL><B> Full Buffer Size</B> (ULONG)
<!-- lm: 0x11 7 -->
<UL>Size of the buffer required for a full save of the
physical display buffer for this mode.<!-- lm: 0x2 4 -->
</UL><B> Partial
Buffer Size</B> (ULONG)<!-- lm: 0x11 7 -->
<UL> Size of the buffer required
for a partial (pop-up) save of the physical display buffer for this mode.
<!-- lm: 0x2 4 -->
</UL><B>Extended Data Area Address</B> (PCH)<!-- lm: 0x11 7 -->
<UL> Far
address to an extended mode data structure or zero if none.  The format
of the extended mode data structure is determined by the device driver and
is unknown to OS/2.<!-- lm: 0x2 1 -->
</UL><B> VioHandle</B> (HVIO) - input
<!-- lm: 0x11 4 -->
<UL>Reserved word of 0s.<!-- lm: 0x2 1 -->
</UL><B> rc
</B>(USHORT) - return<!-- lm: 0x11 4 -->
<UL> Return code descriptions are:
<!-- lm: 0x2 4 -->
<P>
<LI><!-- lm: 0x2 14 -->NO_ERROR<!-- lm: 0x2 4 --> 355<!-- lm: 0x2 14 -->
<UL> ERROR_VIO_MODE
<!-- lm: 0x2 4 -->
</UL>430<!-- lm: 0x2 14 -->
<UL> ERROR_VIO_ILLEGAL_DURING_POPUP<!-- lm: 0x2 4 -->
</UL>436<!-- lm: 0x2 14 -->
<UL> ERROR_VIO_INVALID_HANDLE<!-- lm: 0x2 4 -->
</UL>438<!-- lm: 0x2 14 -->
<UL> ERROR_VIO_INVALID_LENGTH<!-- lm: 0x2 4 -->
</UL>465<!-- lm: 0x2 14 -->
<UL> ERROR_VIO_DETACHED<!-- lm: 0x2 4 -->
</UL>467<!-- lm: 0x2 14 -->
<UL> ERROR_VIO_FONT<!-- lm: 0x2 4 -->
</UL>468<!-- lm: 0x2 14 -->
<UL> ERROR_VIO_USER_FONT<!-- lm: 0x2 4 -->
</UL>494<!-- lm: 0x2 14 -->
<UL> ERROR_VIO_EXTENDED_SG<!-- lm: 0x2 1 -->
</UL><B>Remarks</B>
<P>
VioSetMode initializes the cursor position and type.
<P>
VioSetMode does not clear the screen. To clear the screen, use one of the
VioScrollxx calls.
<P>
The disable color burst bit in the Type field in the VioSetMode data structure
is functional only for the CGA and VGA. This bit causes the color portion
of the video signal to be suppressed, producing a black and white mode on
composite monitors attached to the CGA.  On VGA, the bit causes the color
lookup table to be loaded with values that produce shades of gray instead
of colors, again producing a black and white mode. For all other combinations
of adapters and displays, the setting of this bit is recorded and returned
on any subsequent <A HREF="664_L2_VioGetMode.html">VioGetMode</A> call,
but otherwise is ignored.
<P>
For text modes in full-screen sessions, the number of rows on the screen
is determined by the availability of fonts<!-- entering slot 744 -->  of
the correct size.  For any specified mode, the size of the character defined
by the font must be (Horizontal Resolution)/(Text Columns) dots wide and
(Vertical Resolution)/(Text Rows) dots high. For example, an 8x8 font would
support 39 through 43 text rows if the screen resolution were 640x350.
<P>
If <A HREF="690_L2_VioSetState.html">VioSetState</A> request type 6 has
been issued previously to select the target display configuration for VioSetMode,
the mode is set on the display configuration selected. If that display configuration
does not support the mode specified, an error is returned.
<P>
Assuming no target display configuration for VioSetMode is selected, the
mode is set on the primary configuration. If the primary configuration does
not support the mode specified, the mode is set on the secondary configuration.

<P>
The table below shows the VioSetMode parameters required to set all the
modes supported by the CGA, EGA, VGA, and PS/2 Display Adapters.  The modes
native to the 8514/A and other advanced video adapters are set with the
Adapter (programming) Interface to these adapters, not VioSetMode.
<P>
<B>Note: </B> Although graphics mode support is provided in VioSetMode,
this support is not provided by the Base Video Handlers provided with OS/2.
<!-- lm: 0x2 1 -->
<P>

<PRE>컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
 Table  5-1. Display Mode Attributes Supported by Adapters
컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
 BIOS  TYPE  COLOR  COLS  ROWS  HRES  VRES   VALID ADAPTER/DISPLAY
 MODE                                        COMBINATIONS [EMULATED]
컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
 0     5     4      40    25    320   200    [CGA/CD], CGA/Comp,
                                             [EGA/CD], [EGA/ECD],
                                             VGA/Mono, VGA/Color,
                                             VGA/Plasma
컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
 0*    5     4      40    25    320   350    [EGA/ECD], VGA/Mono,
                                             VGA/Color, VGA/Plasma
컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
 0+    5     4      40    25    360   400    VGA/Mono, VGA/Color
컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
 0#    5     4      40    25    320   400    VGA/Mono, VGA/Color,
                                             VGA/Plasma
컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
 1     1     4      40    25    320   200    CGA/CD, CGA/Comp,
                                             EGA/CD, EGA/ECD,
                                             [VGA/Mono], VGA/Color,
                                             [VGA/Plasma]
컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
 1*    1     4      40    25    320   350    EGA/ECD, [VGA/Mono],
                                             VGA/Color, [VGA/Plasma]
컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
 1+    1     4      40    25    360   400    [VGA/Mono], VGA/Color
컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
 1#    1     4      40    25    320   400    [VGA/Mono], VGA/Color,
                                             [VGA/Plasma]
컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
 2     5     4      80    25    640   200    [CGA/CD], CGA/Comp,
                                             [EGA/CD], [EGA/ECD],
                                             VGA/Mono, VGA/Color,
                                             VGA/Plasma
컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
 2*    5     4      80    25    640   350    [EGA/ECD], VGA/Mono,
                                             VGA/Color, VGA/Plasma
컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
 2+    5     4      80    25    720   400    VGA/Mono, VGA/Color
컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
 2#    5     4      80    25    640   400    VGA/Mono, VGA/Color,
                                             VGA/Plasma
컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
 3     1     4      80    25    640   200    CGA/CD, CGA/Comp,
                                             EGA/CD, EGA/ECD,
                                             [VGA/Mono], VGA/Color,
                                             [VGA/Plasma]
컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
 3*    1     4      80    25    640   350    EGA/ECD, [VGA/Mono],
                                             VGA/Color, [VGA/Plasma]
컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
 3+    1     4      80    25    720   400    [VGA/Mono], VGA/Color
컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
 3#    1     4      80    25    640   400    [VGA/Mono], VGA/Color,
                                             [VGA/Plasma]
-컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
 7     0     0      80    25    720   350    MPA/MD, EGA/MD,
                                             VGA/Mono, VGA/Color
컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
 7+    0     0      80    25    720   400    VGA/Mono, VGA/Color
컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
 7#    0     0      80    25    640   400    VGA/Mono, VGA/Color,
                                             VGA/Plasma
컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
 n/a   0     0      80    25    640   350    VGA/Mono, VGA/Color,
                                             VGA/Plasma
컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
 n/a   1     4      80    30    720   480    [VGA/Mono], VGA/Color
컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
 n/a   1     4      80    30    640   480    [VGA/Mono], VGA/Color,
                                             [VGA/Plasma]
컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
 4     3     2      [40]  [25]  320   200    CGA/CD, CGA/Comp,
                                             EGA/CD, EGA/ECD,
                                             [VGA/Mono], VGA/Color,
                                             [VGA/Plasma]
컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
 5     7     2      [40]  [25]  320   200    [CGA/CD], CGA/Comp,
                                             [EGA/CD], [EGA/ECD],
                                             VGA/Mono, VGA/Color,
                                             VGA/Plasma
컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
 6     3     1      [80]  [25]  640   200    CGA/CD, CGA/Comp,
                                             EGA/CD, EGA/ECD,
                                             VGA/Mono, VGA/Color,
                                             VGA/Plasma
컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
 D     3     4      [40]  [25]  320   200    EGA/CD, EGA/ECD,
                                             [VGA/Mono], VGA/Color,
                                             [VGA/Plasma]
컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
 E     3     4      [80]  [25]  640   200    EGA/CD, EGA/ECD,
                                             [VGA/Mono], VGA/Color,
                                             [VGA/Plasma]
컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
 F     2     0      [80]  [25]  640   350    EGA/MD, VGA/Mono,
                                             VGA/Color, VGA/Plasma
컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
 10    3     4      [80]  [25]  640   350    EGA/ECD, [VGA/Mono],
                                             VGA/Color, [VGA/Plasma]
컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
 11    3     1      [80]  [30]  640   480    VGA/Mono, VGA/Color,
                                             VGA/Plasma
컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
 12    3     4      [80]  [30]  640   480    [VGA/Mono], VGA/Color,
                                             [VGA/Plasma]
컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
 13    3     8      [40]  [25]  320   200    [VGA/Mono], VGA/Color,
                                             [VGA/Plasma]
컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
 n/a   11    8      [80]  [30]  640   480    [8514A/Mono],
                                             8514A/Color
컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
 n/a   11    4      [80]  [30]  640   480    [8514A/Mono],
                                             8514A/Color
컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
 n/a   11    8      [85]  [38]  1024  768    [8514A/HMono],
                                             8514A/HColor
컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
 n/a   11    4      [85]  [38]  1024  768    [8514A/HMono],
                                             8514A/HColor
컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
 Display Adapters:

 MPA       Monochrome/Printer Adapter
 CGA       Color Graphics Adapter
 EGA       Enhanced Graphics Adapter
 VGA       Video Graphics Array, PS/2 Display Adapter
 8514A     8514/A Display Adapter
컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
 Displays:

 MD        5151 Monochrome Display
 CD        5153 Color Display
 ECD       5154 Enhanced Color Display
 MONO      8503 PS/2 Monochrome Display, 8507/8604 Display
 HMONO     8507/8604 Display
 COLOR     8512/13 PS/2 Color Display, 8514 Display
 HCOLOR    8514 Display
 PLASMA    Plasma Display Panel
 COMP      Composite Video Monitor

 Notes:

 1.  Types 0, 1, and 5 are text modes; types 2, 3, 7, and 11 are
     graphics modes.
 2.  For BIOS modes 0, 2, 5, the color burst is disabled on the
     CGA and VGA.
 3.  The Personal System/2 Display Adapter 8514/A(TM) has advanced
     function modes, which are supported through the 8514/A display
     adapter interface, not the VIO Subsystem.  Refer to the
     Personal System/2 Display Adapter 8514/A Technical Reference
     for details of this support.

컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
</PRE>

<P>
<B>Note: </B> For text modes in full-screen, the number of rows may differ
from the
<BR>
mode table due to the availability of fonts of the correct size as described

<BR>
above.<!-- lm: 0x2 1 -->
<P>

<P>

<BR>
<B>PM Considerations<!-- entering slot 745 --></B> 
<P>
Windowable VIO sessions support only 80-column, color text modes. When VioSetMode
is called from a Windowable VIO session, it only verifies that an 80-column
text mode was requested, with Text Rows between 1 and 255.  The resulting
mode, which can be queried using <A HREF="664_L2_VioGetMode.html">VioGetMode</A>,
always has Type = 1, Color = 4, Text Columns = 80,
<BR>
Text Rows = requested Text Rows, Horizontal Resolution = 640, and Vertical

<BR>
Resolution = 16 * (Text Rows).
<P>

<BR>
<B>Family API Considerations</B>
<P>
Some options operate differently in the DOS mode than in the OS/2 mode.
 Therefore, the following consideration applies to VioSetMode when coding
for the DOS mode:
<P>
VioSetMode clears the screen.

<P><HR>

<A HREF="688_L2_VioSetFont.html">[Back: VioSetFont]</A> <BR>
<A HREF="690_L2_VioSetState.html">[Next: VioSetState]</A> 
</BODY>
</HTML>
