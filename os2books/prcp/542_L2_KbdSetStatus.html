<HTML>
<HEAD>
<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="TEXT/HTML; CHARSET=UTF-8">
<TITLE>KbdSetStatus</TITLE>
<STYLE>
PRE {
  FONT-FAMILY: Consolas, "Lucida Console", "Courier New", Courier, MONOSPACE;
}
</STYLE>
</HEAD>
<BODY>
<H1>KbdSetStatus</H1><!-- entering slot 587 -->Bindings:  <A HREF="561_L2H_KbdSetStatus.html">C</A>,
<A HREF="580_L2H_KbdSetStatus.html">MASM</A>
<BR>

<P>
This call sets the characteristics of the keyboard.<!-- lm: 0x2 1 -->
<UL>
<P>
KbdSetStatus<!-- lm: 0x2 17 -->
<UL> (StatData, KbdHandle)<!-- lm: 0x2 1 -->
</UL><!-- lm: 0x2 1 -->
<P>
<B>StatData</B> (PKBDINFO) - input<!-- lm: 0x11 4 -->
<UL> Address of the
keyboard status structure:<!-- lm: 0x2 4 -->
<P>
<B>length</B> (USHORT)<!-- lm: 0x11 7 -->
<UL> Length, in bytes, of this
data structure, including length.<!-- lm: 0x2 7 -->
<P>
10<!-- lm: 0x2 17 -->
<UL> Only valid value.<!-- lm: 0x2 4 -->
</UL><B> sysstate
</B>(USHORT)<!-- lm: 0x11 7 -->
<UL> The system state altered by this call.
If bits 0 and 1 are off, the echo state of the system is not altered. If
bits 2 and 3 are off, the binary and ASCII state of the system is not altered.
 If bits 0 and 1 are on, or if bits 2 and 3 are on, the function returns
an error.  If binary mode is set, echo is ignored.<!-- lm: 0x2 7 -->
<P>
Bit<!-- lm: 0x2 17 -->
<UL> Description<!-- lm: 0x2 7 -->
</UL>15-9<!-- lm: 0x2 17 -->
<UL> Reserved, set to zero<!-- lm: 0x2 7 -->
</UL>8<!-- lm: 0x2 17 -->
<UL> Shift return is on<!-- lm: 0x2 7 -->
</UL>7<!-- lm: 0x2 17 -->
<UL> Length of the turn-around character (meaningful
only if bit 6 is on).<!-- lm: 0x2 7 -->
</UL>6<!-- lm: 0x2 17 -->
<UL> Turn-around character is modified<!-- lm: 0x2 7 -->
</UL>5<!-- lm: 0x2 17 -->
<UL> Interim character flags are modified<!-- lm: 0x2 7 -->
</UL>4<!-- lm: 0x2 17 -->
<UL> Shift state is modified<!-- lm: 0x2 7 -->
</UL>3<!-- lm: 0x2 17 -->
<UL> ASCII mode is on<!-- lm: 0x2 7 -->
</UL>2<!-- lm: 0x2 17 -->
<UL> Binary mode is on<!-- lm: 0x2 7 -->
</UL>1<!-- lm: 0x2 17 -->
<UL> Echo off<!-- lm: 0x2 7 -->
</UL>0<!-- lm: 0x2 17 -->
<UL> Echo on<!-- lm: 0x2 4 -->
</UL><B> turnchardef
</B>(USHORT)<!-- lm: 0x11 7 -->
<UL> Definition of the turn-around character.
In ASCII and extended-ASCII format, the turn-around character is defined
as the carriage return.  In ASCII format only, the turn-around character
is defined in the low-order byte.<!-- lm: 0x2 4 -->
</UL><B> intcharflag
</B>(USHORT)<!-- lm: 0x11 7 -->
<UL> Interim character flags:<!-- lm: 0x2 7 -->
<P>
Bit<!-- lm: 0x2 17 -->
<UL> Description<!-- lm: 0x2 7 -->
</UL>15-8<!-- lm: 0x2 17 -->
<UL> NLS shift state.<!-- lm: 0x2 7 -->
</UL>7<!-- lm: 0x2 17 -->
<UL> Interim character flag is on<!-- lm: 0x2 7 -->
</UL>6<!-- lm: 0x2 17 -->
<UL> Reserved, set to zero<!-- lm: 0x2 7 -->
</UL>5<!-- lm: 0x2 17 -->
<UL> Application requested immediate conversion
<!-- lm: 0x2 7 -->
</UL>4-0<!-- lm: 0x2 17 -->
<UL> Reserved, set to zero<!-- lm: 0x2 4 -->
</UL><B> shiftstate
</B>(USHORT)<!-- lm: 0x11 7 -->
<UL> Shift state.<!-- lm: 0x2 7 -->
<P>
Bit<!-- lm: 0x2 17 -->
<UL> Description<!-- lm: 0x2 7 -->
</UL>15<!-- lm: 0x2 17 -->
<UL> SysReq key down<!-- lm: 0x2 7 -->
</UL>14<!-- lm: 0x2 17 -->
<UL> CapsLock key down<!-- lm: 0x2 7 -->
</UL>13<!-- lm: 0x2 17 -->
<UL> NumLock key down<!-- lm: 0x2 7 -->
</UL>12<!-- lm: 0x2 17 -->
<UL> ScrollLock key down<!-- lm: 0x2 7 -->
</UL>11<!-- lm: 0x2 17 -->
<UL> Right Alt key down<!-- lm: 0x2 7 -->
</UL>10<!-- lm: 0x2 17 -->
<UL> Right Ctrl key down<!-- lm: 0x2 7 -->
</UL>9<!-- lm: 0x2 17 -->
<UL> Left Alt key down<!-- lm: 0x2 7 -->
</UL>8<!-- lm: 0x2 17 -->
<UL> Left Ctrl key down<!-- lm: 0x2 7 -->
</UL>7<!-- lm: 0x2 17 -->
<UL> Insert on<!-- lm: 0x2 7 -->
</UL>6<!-- lm: 0x2 17 -->
<UL> CapsLock on<!-- lm: 0x2 7 -->
</UL>5<!-- lm: 0x2 17 -->
<UL> NumLock on<!-- lm: 0x2 7 -->
</UL>4<!-- lm: 0x2 17 -->
<UL> ScrollLock on<!-- lm: 0x2 7 -->
</UL>3<!-- lm: 0x2 17 -->
<UL> Either Alt key down<!-- lm: 0x2 7 -->
</UL>2<!-- lm: 0x2 17 -->
<UL> Either Ctrl key down<!-- lm: 0x2 7 -->
</UL>1<!-- lm: 0x2 17 -->
<UL> Left Shift key down<!-- lm: 0x2 7 -->
</UL>0<!-- lm: 0x2 17 -->
<UL> Right Shift key down<!-- lm: 0x2 1 -->
</UL><B> KbdHandle
</B>(HKBD) - input<!-- lm: 0x11 4 -->
<UL> Default keyboard or the logical
keyboard.<!-- lm: 0x2 1 -->
</UL><B> rc</B> (USHORT) - return<!-- lm: 0x11 4 -->
<UL> Return
code descriptions are:<!-- lm: 0x2 4 -->
<P>
<LI><!-- lm: 0x2 14 -->NO_ERROR<!-- lm: 0x2 4 --> 376<!-- lm: 0x2 14 -->
<UL> ERROR_KBD_INVALID_LENGTH
<!-- lm: 0x2 4 -->
</UL>377<!-- lm: 0x2 14 -->
<UL> ERROR_KBD_INVALID_ECHO_MASK<!-- lm: 0x2 4 -->
</UL>378<!-- lm: 0x2 14 -->
<UL> ERROR_KBD_INVALID_INPUT_MASK<!-- lm: 0x2 4 -->
</UL>439<!-- lm: 0x2 14 -->
<UL> ERROR_KBD_INVALID_HANDLE<!-- lm: 0x2 4 -->
</UL>445<!-- lm: 0x2 14 -->
<UL> ERROR_KBD_FOCUS_REQUIRED<!-- lm: 0x2 4 -->
</UL>447<!-- lm: 0x2 14 -->
<UL> ERROR_KBD_KEYBOARD_BUSY<!-- lm: 0x2 4 -->
</UL>464<!-- lm: 0x2 14 -->
<UL> ERROR_KBD_DETACHED<!-- lm: 0x2 4 -->
</UL>504<!-- lm: 0x2 14 -->
<UL> ERROR_KBD_EXTENDED_SG<!-- lm: 0x2 1 -->
</UL><B>Remarks</B>
<P>
Shift return (bit 8 in sysstate) must be disabled in ASCII mode.
<P>
KbdSetStatus is ignored for a Vio-windowed application.
<P>

<BR>
<B>Family API Considerations</B>
<P>
Some options operate differently in the DOS mode than in the OS/2 mode.
 Therefore, the following restrictions apply to KbdSetStatus when coding
in the DOS mode:<!-- lm: 0x2 1 -->
<P>
o<!-- lm: 0x2 3 -->
<UL>KbdSetStatus does not accept a bit mask of 10 (ASCII
on, Echo Off).<!-- lm: 0x2 1 -->
</UL>o<!-- lm: 0x2 3 -->
<UL>Raw (binary) Mode and Echo On are not supported
and return an error if requested.<!-- lm: 0x2 1 -->
</UL>o<!-- lm: 0x2 3 -->
<UL>KbdHandle is ignored.<!-- lm: 0x2 1 -->
</UL>o<!-- lm: 0x2 3 -->
<UL>Interim character is not supported.<!-- lm: 0x2 1 -->
</UL>o<!-- lm: 0x2 3 -->
<UL>Turnaround character is not supported.<!-- lm: 0x2 1 -->
</UL>

<P><HR>

<A HREF="541_L2_KbdSetFgnd.html">[Back: KbdSetFgnd]</A> <BR>
<A HREF="543_L2_KbdStringIn.html">[Next: KbdStringIn]</A> 
</BODY>
</HTML>
