<HTML>
<HEAD>
<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="TEXT/HTML; CHARSET=UTF-8">
<TITLE>KbdStringIn</TITLE>
<STYLE>
PRE {
  FONT-FAMILY: Consolas, "Lucida Console", "Courier New", Courier, MONOSPACE;
}
</STYLE>
</HEAD>
<BODY>
<H1>KbdStringIn</H1><!-- entering slot 588 -->Bindings:  <A HREF="562_L2H_KbdStringIn.html">C</A>,
<A HREF="581_L2H_KbdStringIn.html">MASM</A>
<BR>

<P>
This call reads a character string (character codes only) from the keyboard.
<!-- lm: 0x2 1 -->
<UL>
<P>
KbdStringIn<!-- lm: 0x2 15 -->
<UL> (CharBuffer, StringLength, IOWait, KbdHandle)
<!-- lm: 0x2 1 -->
</UL><!-- lm: 0x2 1 -->
<P>
<B>CharBuffer</B> (PCH) - output<!-- lm: 0x11 4 -->
<UL> Address of the
character string buffer.<!-- lm: 0x2 1 -->
</UL><B> StringLength</B> (PSTRINGINBUF)
- input/output<!-- lm: 0x11 4 -->
<UL> Address of the length of the character
string buffer.  On entry, buflen is the maximum length, in bytes, of the
buffer. The maximum length that can be specified is 255. Template processing
has meaning only in the ASCII mode.<!-- lm: 0x2 4 -->
<P>
<B>buflen</B> (USHORT)<!-- lm: 0x11 7 -->
<UL> Length of the input buffer.
<!-- lm: 0x2 4 -->
</UL><B>inputlen</B> (USHORT)<!-- lm: 0x11 7 -->
<UL> Number
of bytes read into the buffer.<!-- lm: 0x2 1 -->
</UL><B> IOWait</B> (USHORT)
- input<!-- lm: 0x11 4 -->
<UL> Wait if a character is not available.<!-- lm: 0x2 4 -->
<P>
Value<!-- lm: 0x2 14 -->
<UL> Definition<!-- lm: 0x2 4 -->
</UL> 0<!-- lm: 0x2 14 -->
<UL> Wait.
 In Binary input mode, the requestor waits until CharBuffer is full.  In
ASCII input mode, the requestor waits until a carriage return is pressed.
<!-- lm: 0x2 4 -->
</UL>1<!-- lm: 0x2 14 -->
<UL> No wait.  The requestor
gets an immediate return if no characters are available.  If characters
are available, KbdStringIn returns immediately with as many characters as
are available (up to the maximum).  No wait is not supported in ASCII input
mode.<!-- lm: 0x2 1 -->
</UL><B> KbdHandle</B> (HKBD) - input<!-- lm: 0x11 4 -->
<UL> Default
keyboard or the logical keyboard.<!-- lm: 0x2 1 -->
</UL><B> rc</B> (USHORT)
- return<!-- lm: 0x11 4 -->
<UL> Return code descriptions are:<!-- lm: 0x2 4 -->
<P>
<LI><!-- lm: 0x2 14 -->NO_ERROR<!-- lm: 0x2 4 --> 375<!-- lm: 0x2 14 -->
<UL> ERROR_KBD_INVALID_IOWAIT
<!-- lm: 0x2 4 -->
</UL>439<!-- lm: 0x2 14 -->
<UL> ERROR_KBD_INVALID_HANDLE<!-- lm: 0x2 4 -->
</UL>445<!-- lm: 0x2 14 -->
<UL> ERROR_KBD_FOCUS_REQUIRED<!-- lm: 0x2 4 -->
</UL>464<!-- lm: 0x2 14 -->
<UL> ERROR_KBD_DETACHED<!-- lm: 0x2 4 -->
</UL>504<!-- lm: 0x2 14 -->
<UL> ERROR_KBD_EXTENDED_SG<!-- lm: 0x2 1 -->
</UL><B>Remarks</B>
<P>
The character strings may be optionally echoed on the display if echo mode
is set. When echo is on each character is echoed as it is read from the
keyboard. Echo mode and BINARY mode are mutually exclusive. Reference <A HREF="542_L2_KbdSetStatus.html">KbdSetStatus
</A>and <A HREF="535_L2_KbdGetStatus.html">KbdGetStatus</A> for more information.

<P>
The default input mode is ASCII. In ASCII mode, 2-byte character codes only
return in complete form. An extended ASCII code is returned in a 2-byte
string. The first byte is 0DH or E0H and the next byte is an extended code.

<P>
In input mode (BINARY, ASCII), The following returns can be set and retrieved
with <A HREF="542_L2_KbdSetStatus.html">KbdSetStatus</A> and <A HREF="535_L2_KbdGetStatus.html">KbdGetStatus</A>:
<!-- lm: 0x2 1 -->
<P>
Turnaround Character
<BR>
Echo Mode
<BR>
Interim Character Flag
<BR>
Shift State<!-- lm: 0x2 1 -->
<BR>

<P>
The received input length is also used by the KbdStringIn line edit functions
for re-displaying and entering a caller specified string. On the next KbdStringIn
call the received input length indicates the length of the input buffer
that may be recalled by the user using the line editing keys. A value of
0 inhibits the line editing function for the current KbdStringIn request.

<P>
KbdStringIn completes when the handle has access to the physical keyboard
(focus), or is equal to zero and no other handle has the focus.
<P>

<BR>
<B>Family API Considerations</B>
<P>
Some options operate differently in the DOS mode than in the OS/2 mode.
 Therefore, the following restrictions apply to KbdStringIn when coding
in the DOS mode:<!-- lm: 0x2 1 -->
<P>
o<!-- lm: 0x2 3 -->
<UL>KbdHandle is ignored<!-- lm: 0x2 1 -->
</UL>
<P>
Refer to the DosRead Family API Considerations for differences between DOS
and OS/2 node when reading from a handle opened to the CON device.

<P><HR>

<A HREF="542_L2_KbdSetStatus.html">[Back: KbdSetStatus]</A> <BR>
<A HREF="544_L2_KbdSynch.html">[Next: KbdSynch]</A> 
</BODY>
</HTML>
