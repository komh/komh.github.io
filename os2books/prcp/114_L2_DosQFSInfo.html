<HTML>
<HEAD>
<TITLE>DosQFSInfo</TITLE>
</HEAD>
<BODY>
<H1>DosQFSInfo</H1><!-- entering slot 142 -->Bindings:  <A HREF="289_L2H_DosQFSInfo.html">C</A>,
<A HREF="464_L2H_DosQFSInfo.html">MASM</A>
<BR>

<P>
This call queries information from a file system device.<!-- lm: 0x2 1 -->
<UL>
<P>
DosQFSInfo<!-- lm: 0x2 15 -->
<UL>  (DriveNumber, FSInfoLevel, FSInfoBuf,
FSInfoBufSize)<!-- lm: 0x2 1 -->
</UL><!-- lm: 0x2 1 -->
<P>
<B>DriveNumber</B> (USHORT) - input<!-- lm: 0x11 4 -->
<UL> Logical drive
number (0 = default, 1 = A, and so on).
<P>
When a logical drive is specified, the media in the drive is examined (local
drive only) and the request is passed to the FSD responsible for managing
that media or to the FSD that is attached to the drive.<!-- lm: 0x2 1 -->
</UL><B> FSInfoLevel
</B>(USHORT) - input<!-- lm: 0x11 4 -->
<UL> Level of file information required.
<!-- lm: 0x2 1 -->
</UL><B>FSInfoBuf</B> (PBYTE) - output<!-- lm: 0x11 4 -->
<UL> Address
of the storage area where the system returns the requested level of file
information.<!-- lm: 0x2 4 -->
<P>
<B>Level 1 Information</B><!-- lm: 0x11 7 -->
<UL> For FSInfoLevel = 1,
information is returned in the following structure:<!-- lm: 0x2 7 -->
<P>
<B>filesysid</B> (ULONG)<!-- lm: 0x11 10 -->
<UL> File system ID.<!-- lm: 0x2 7 -->
</UL><B> sectornum
</B>(ULONG)<!-- lm: 0x11 10 -->
<UL> Number of sectors per allocation unit.
<!-- lm: 0x2 7 -->
</UL><B>unitnum</B> (ULONG)<!-- lm: 0x11 10 -->
<UL> Number
of allocation units.<!-- lm: 0x2 7 -->
</UL><B> unitavail</B> (ULONG)<!-- lm: 0x11 10 -->
<UL> Number
of allocation units available.<!-- lm: 0x2 7 -->
</UL><B> bytesnum</B> (USHORT)
<!-- lm: 0x11 10 -->
<UL>Number of bytes per sector.<!-- lm: 0x2 4 -->
</UL><B> Level
2 Information</B><!-- lm: 0x11 7 -->
<UL> For FSInfoLevel = 2, the information
is returned in the following format:<!-- lm: 0x2 7 -->
<P>
<B>reserved</B> (ULONG)<!-- lm: 0x11 10 -->
<UL> Reserved<!-- lm: 0x2 7 -->
</UL><B> volumelength
</B>(BYTE)<!-- lm: 0x11 10 -->
<UL> Length of the volume label, not including
the null.<!-- lm: 0x2 7 -->
</UL><B> volumelabel</B> (CHAR)<!-- lm: 0x11 10 -->
<UL> Volume
label ASCIIZ string.<!-- lm: 0x2 1 -->
</UL><B> FSInfoBufSize</B> (USHORT)
<!-- lm: 0x11 4 -->
<UL>Length of the buffer.<!-- lm: 0x2 1 -->
</UL><B> rc
</B>(USHORT) - return<!-- lm: 0x11 4 -->
<UL> Return code descriptions are:
<!-- lm: 0x2 4 -->
<P>
<LI><!-- lm: 0x2 14 -->NO_ERROR<!-- lm: 0x2 4 --> 15<!-- lm: 0x2 14 -->
<UL> ERROR_INVALID_DRIVE
<!-- lm: 0x2 4 -->
</UL>111<!-- lm: 0x2 14 -->
<UL> ERROR_BUFFER_OVERFLOW<!-- lm: 0x2 4 -->
</UL>124<!-- lm: 0x2 14 -->
<UL> ERROR_INVALID_LEVEL<!-- lm: 0x2 4 -->
</UL>125<!-- lm: 0x2 14 -->
<UL> ERROR_NO_VOLUME_LABEL<!-- lm: 0x2 1 -->
</UL><B>Remarks</B>
<P>
Trailing blanks supplied at volume label definition time are not considered
to be part of the label and are therefore not returned as valid label data.
Volume label is limited to a length of 11 bytes.
<P>
Volume Serial Number is a unique 32-bit number used by OS/2 to positively
identify its disk/diskette volumes.  The hard error prompts the user for
an unmounted removable volume by displaying both the Volume Serial Number
(as an 8 digit hexadecimal number) and the Volume Label.
<P>
If there is no volume serial number on the disk/diskette, the volume serial
number information is returned as binary zeros.  If there is no volume label
on the disk/diskette, the volume label information is returned as blank
spaces.  If there is no volume serial number and/or volume label for disk/diskette
volumes formatted by DOS 3.X, this information is not displayed by the Hard
Error Handler.

<P><HR>

<A HREF="113_L2_DosQFSAttach.html">[Back: DosQFSAttach]</A> <BR>
<A HREF="115_L2_DosQHandType.html">[Next: DosQHandType]</A> 
</BODY>
</HTML>
