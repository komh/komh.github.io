<HTML>
<HEAD>
<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="TEXT/HTML; CHARSET=UTF-8">
<TITLE>New and Changed Commands</TITLE>
<STYLE>
PRE {
  FONT-FAMILY: Consolas, "Lucida Console", "Courier New", Courier, MONOSPACE;
}
</STYLE>
</HEAD>
<BODY>
<H1>New and Changed Commands</H1><!-- entering slot 252 -->
<P>
All kernel debugger commands work as before, but a few have been modified
to display or use multiprocessor-specific information. New commands have
also been added.
<P>
The new and changed commands are:<!-- lm: 0x2 1 -->
<UL>
<P>
<B><LI>DP</B> (processor status)<!-- lm: 0x11 11 -->
<UL> The<B> .DP</B>
command has been added to dump out a processor control block verbosely,
that is, to display a processor's status.  The command takes as an argument:
<!-- lm: 0x2 11 -->
<P>
<LI><!-- lm: 0x11 26 -->Displays status based on the real current slot<!-- lm: 0x2 11 -->
<BR>
<LI><!-- lm: 0x11 26 -->Displays status based on the currently selected
slot<!-- lm: 0x2 11 -->
<BR>
<LI><LI>based processor number<!-- lm: 0x11 26 -->
<UL> Displays status
for a specific processor. <B> .DP 3</B> would display the status of processor
3.<!-- lm: 0x2 11 -->
</UL>blank<!-- lm: 0x11 26 -->
<UL> Displays the status of all processors.
<!-- lm: 0x2 11 --><!-- lm: 0x2 1 -->
</UL><B>.DL</B> (display processor
spinlocks)<!-- lm: 0x11 11 -->
<UL> The<B> .DL</B> command has been added
to display the spinlocks owned by a particular processor.  Valid arguments
are:<!-- lm: 0x2 11 -->
<P>
<LI><!-- lm: 0x11 26 -->Displays spinlocks based on the real current slot
<!-- lm: 0x2 11 -->#<!-- lm: 0x11 26 -->
<UL> Displays spinlocks based on
the currently selected slot<!-- lm: 0x2 11 -->
</UL>0-based processor number<!-- lm: 0x11 26 -->
<UL> Displays spinlocks
for a specific processor.<B> .DL 1</B> would display the spinlocks held
on processor 1.<!-- lm: 0x2 11 -->
</UL>Address of a spinlock<!-- lm: 0x11 26 -->
<UL> Displays a specific
spinlock.<!-- lm: 0x2 11 -->
</UL>blank<!-- lm: 0x11 26 -->
<UL> Displays all spinlocks.<!-- lm: 0x2 11 --><!-- lm: 0x2 1 -->
</UL><B> .DS
</B><!-- lm: 0x11 11 -->
<UL>Dumps the Inter-Processor Interrupt (IPI) statistics
for each processor, including the IPI type and IPI delivery method.<!-- lm: 0x2 1 -->
</UL><B> .DSH
</B><!-- lm: 0x11 11 -->
<UL>Dumps the IPI history, which is the last 256
IPIs generated in the system.  The source, destination, and type of the
IPI are displayed as well as the IPI delivery method and the address and
symbol name where the IPI was generated.<!-- lm: 0x2 1 -->
</UL><B> .PQ
</B><!-- lm: 0x11 11 -->
<UL>Dumps the scheduler's priority queues based
on the debugger's slot number.<!-- lm: 0x2 1 -->
</UL><B> .R</B> and<B> R
</B>(register commands)<!-- lm: 0x11 11 -->
<UL> The register commands have
been enhanced to indicate which processor the currently selected slot is
running on.  This information is displayed at the end of the third register
line in the form<B> p=xxyy</B> where<B> xx</B> is the 1-based processor
number, and<B> yy</B> are the flags.  A processor number of 00 means that
the currently selected slot is not running on any processor, or is blocked.
 The flags are:<!-- lm: 0x2 11 -->
<P>
<B>s</B><!-- lm: 0x2 20 -->
<UL> processor is currently spinning.<!-- lm: 0x2 11 -->
</UL><B>r</B><!-- lm: 0x2 20 -->
<UL> processor is attempting to grab the
ring 0 suspend lock.<!-- lm: 0x2 11 --><!-- lm: 0x2 1 -->
</UL><B> .SS</B> (change
current slot)<!-- lm: 0x11 11 -->
<UL> The<B> .SS</B> command has been modified
to reference the proper PSA (processor save area) when displaying a variable
on a different processor.  value of that variable on that particular processor).
<!-- lm: 0x2 1 -->
</UL><B>.S</B><!-- lm: 0x11 11 -->
<UL> The<B> .S</B>
command is now identical to the<B> .SS</B> command.  The PLMA is displayed
properly for each processor.<!-- lm: 0x2 1 -->
</UL>
<P>


<P><HR>

<A HREF="240_L1_KernelDebugger.html">[Back: Kernel Debugger]</A> <BR>
<A HREF="242_L2_KDBCommunicationsPro.html">[Next: KDB Communications Protocol]</A> 
</BODY>
</HTML>
