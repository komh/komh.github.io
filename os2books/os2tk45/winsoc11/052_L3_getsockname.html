<HTML>
<HEAD>
<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="TEXT/HTML; CHARSET=UTF-8">
<TITLE>getsockname()</TITLE>
</HEAD>
<BODY>
<H1>getsockname()</H1><!-- entering slot 55 -->
<P>
<B>Description</B>
<P>
Get the local name for a socket.
<P>

<PRE>#include &lt;winsock.h&gt;</PRE>
 
<P>
<B>int PASCAL FAR getsockname(SOCKET</B> s<B>, struct sockaddr FAR *</B><I> name</I><B>,
int FAR *</B><I> namelen</I><B>);</B><!-- lm: 0x2 1 -->
<UL>
<P>
<I>s</I><!-- lm: 0x11 3 -->
<UL> A descriptor identifying a bound socket.
<!-- lm: 0x2 1 -->
</UL><I>name</I><!-- lm: 0x11 3 -->
<UL> Receives the
address (name) of the socket.<!-- lm: 0x2 1 -->
</UL><I> namelen</I><!-- lm: 0x11 3 -->
<UL> The
size of the<I> name</I> buffer.<!-- lm: 0x2 1 -->
</UL>
<P>
<B>Remarks</B>
<P>
<B>getsockname()</B> retrieves the current name for the specified socket
descriptor in<I> name</I>.  It is used on a bound and/or connected socket
specified by the<I> s</I> parameter.  The local association is returned.
 This call is especially useful when a <A HREF="050_L3_connect.html">connect()
</A>call has been made without doing a <A HREF="048_L3_bind.html">bind()
</A>first; this call provides the only means by which you can determine
the local association which has been set by the system.
<P>
    On return, the<I> namelen</I>     argument contains the actual size
of the name returned in bytes.
<P>
If a socket was bound to INADDR_ANY, indicating that any of the host's IP
addresses should be used for the socket,<B> getsockname()</B> will not necessarily
return information about the host IP address, unless the socket has been
connected with <A HREF="050_L3_connect.html">connect()</A> or <A HREF="047_L3_accept.html">accept()
</A>A Windows Sockets application must not assume that the IP address will
be changed from INADDR_ANY unless the socket is connected.  This is because
for a multi-homed host the IP address that will be used for the socket is
unknown unless the socket is connected.
<P>
<B>Return Value</B>
<P>
If no error occurs,<B> getsockname()</B> returns 0. Otherwise, a value of
SOCKET_ERROR is returned, and a specific error code may be retrieved by
calling <A HREF="089_L3_WSAGetLastError.html">WSAGetLastError()</A>
<P>
<B>Error Codes</B>
<P>
<!-- lm: 0x2 1 -->
<P>
WSANOTINITIALISED<!-- lm: 0x11 11 -->
<UL> A successful <A HREF="093_L3_WSAStartup.html">WSAStartup()
</A>must occur before using this API.<!-- lm: 0x2 1 -->
</UL> WSAENETDOWN
<!-- lm: 0x11 11 -->
<UL>The Windows Sockets implementation has detected
that the network subsystem has failed.<!-- lm: 0x2 1 -->
</UL> WSAEFAULT
<!-- lm: 0x11 11 -->
<UL>The<I> namelen</I> argument is not large enough.
<!-- lm: 0x2 1 -->
</UL>WSAEINPROGRESS<!-- lm: 0x11 11 -->
<UL> A blocking
Windows Sockets operation is in progress.<!-- lm: 0x2 1 -->
</UL> WSAENOTSOCK
<!-- lm: 0x11 11 -->
<UL>The descriptor is not a socket.<!-- lm: 0x2 1 -->
</UL> WSAEINVAL
<!-- lm: 0x11 11 -->
<UL>The socket has not been bound to an address with
<A HREF="048_L3_bind.html">bind()</A><!-- lm: 0x2 1 -->
</UL> 
<P>
<B>See Also</B>
<P>
<A HREF="048_L3_bind.html">bind()</A><B>,</B> <A HREF="069_L3_socket.html">socket()</A><B>,
</B><A HREF="051_L3_getpeername.html">getpeername()</A>
<P>


<P><HR>

<A HREF="051_L3_getpeername.html">[Back: getpeername()]</A> <BR>
<A HREF="053_L3_getsockopt.html">[Next: getsockopt()]</A> 
</BODY>
</HTML>
