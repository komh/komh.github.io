<HTML>
<HEAD>
<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="TEXT/HTML; CHARSET=UTF-8">
<TITLE>getservbyname()</TITLE>
</HEAD>
<BODY>
<H1>getservbyname()</H1><!-- entering slot 88 -->
<P>
<B>Description</B>
<P>
Get service information corresponding to a service name and protocol.
<P>

<PRE>#include &lt;winsock.h&gt;</PRE>
 
<P>
<B>struct servent FAR * PASCAL FAR getservbyname ( const char FAR *</B><I> name</I><B>,
const char FAR *</B><I> proto</I><B>);</B><!-- lm: 0x2 1 -->
<UL>
<P>
<I>name</I><!-- lm: 0x11 3 -->
<UL> A pointer to a service name.<!-- lm: 0x2 1 -->
</UL><I> proto
</I><!-- lm: 0x11 3 -->
<UL>An optional pointer to a protocol name.  If
this is NULL,<B> getservbyname()</B> returns the first service entry for
which the<I> name</I> matches the s_name or one of the s_aliases.  Otherwise
<B>getservbyname()</B> matches both the<I> name</I> and the<I> proto</I>.
<!-- lm: 0x2 1 -->
</UL>
<P>
<B>Remarks</B>
<P>
<B>getservbyname()</B> returns a pointer to the following structure which
contains the name(s) and service number which correspond to the given service
<I>name</I>.
<P>

<PRE>struct servent {        char FAR *      s_name;
        char FAR * FAR *s_aliases;
        short           s_port;
        char FAR *      s_proto;
};
</PRE>

<P>
The members of this structure are:<!-- lm: 0x2 1 -->
<P>
<I>s_name</I><!-- lm: 0x11 3 -->
<UL> Official name of the service.<!-- lm: 0x2 1 -->
</UL><I> s_aliases
</I><!-- lm: 0x11 3 -->
<UL>A NULL-terminated array of alternate names.
<!-- lm: 0x2 1 -->
</UL><I>s_port</I><!-- lm: 0x11 3 -->
<UL> The port number
at which the service may be contacted.  Port numbers are in network byte
order.<!-- lm: 0x2 1 -->
</UL><I> s_proto</I><!-- lm: 0x11 3 -->
<UL> The
name of the protocol to use when contacting the service.<!-- lm: 0x2 1 -->
</UL>
<P>
The pointer which is returned points to a structure which is allocated by
the Windows Sockets library.  The application must never attempt to modify
this structure or to free any of its components.  Furthermore only one copy
of this structure is allocated per thread, and so the application should
copy any information which it needs before issuing any other Windows Sockets
API calls.
<P>
<B>Return Value</B>
<P>
If no error occurs,<B> getservbyname()</B> returns a pointer to the servent
structure described above.  Otherwise it returns a NULL pointer and a specific
error number may be retrieved by calling <A HREF="089_L3_WSAGetLastError.html">WSAGetLastError()
</A>
<P>
<B>Error Codes</B>
<P>
<!-- lm: 0x2 1 -->
<P>
WSANOTINITIALISED<!-- lm: 0x11 11 -->
<UL> A successful<B> WSAStartup()
</B>must occur before using this API.<!-- lm: 0x2 1 -->
</UL> WSAENETDOWN
<!-- lm: 0x11 11 -->
<UL>The Windows Sockets implementation has detected
that the network subsystem has failed.<!-- lm: 0x2 1 -->
</UL> WSANO_RECOVERY
<!-- lm: 0x11 11 -->
<UL>Non recoverable errors, FORMERR, REFUSED, NOTIMP.
<!-- lm: 0x2 1 -->
</UL>WSANO_DATA<!-- lm: 0x11 11 -->
<UL> Valid name,
no data record of requested type.<!-- lm: 0x2 1 -->
</UL> WSAEINPROGRESS
<!-- lm: 0x11 11 -->
<UL>A blocking Windows Sockets operation is in progress.
<!-- lm: 0x2 1 -->
</UL>WSAEINTR<!-- lm: 0x11 11 -->
<UL> The (blocking)
call was canceled via <A HREF="087_L3_WSACancelBlockingCal.html">WSACancelBlockingCall()
</A><!-- lm: 0x2 1 -->
</UL>
<P>
<B>See Also</B>
<P>
<A HREF="083_L3_WSAAsyncGetServByNam.html">WSAAsyncGetServByName()</A>,
<A HREF="077_L3_getservbyport.html">getservbyport()</A>
<P>


<P><HR>

<A HREF="075_L3_getprotobynumber.html">[Back: getprotobynumber()]</A> <BR>
<A HREF="077_L3_getservbyport.html">[Next: getservbyport()]</A> 
</BODY>
</HTML>
