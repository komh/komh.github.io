<HTML>
<HEAD>
<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="TEXT/HTML; CHARSET=UTF-8">
<TITLE>getpeername()</TITLE>
<STYLE>
PRE {
  FONT-FAMILY: Consolas, "Lucida Console", "Courier New", Courier, MONOSPACE;
}
</STYLE>
</HEAD>
<BODY>
<H1>getpeername()</H1><!-- entering slot 54 -->
<P>
<B>Description</B>
<P>
Get the address of the peer to which a socket is connected.
<P>

<PRE>#include &lt;winsock.h&gt;</PRE>
 
<P>
<B>int PASCAL FAR getpeername(SOCKET</B><I> s</I><B>, struct sockaddr FAR
*</B><I> name</I><B>, int FAR *</B><I> namelen</I><B>);</B><!-- lm: 0x2 1 -->
<UL>
<P>
<I>s</I><!-- lm: 0x11 3 -->
<UL> A descriptor identifying a connected socket.
<!-- lm: 0x2 1 -->
</UL><I>name</I><!-- lm: 0x11 3 -->
<UL> The structure
which is to receive the name of the peer.<!-- lm: 0x2 1 -->
</UL><I> namelen
</I><!-- lm: 0x11 3 -->
<UL>A pointer to the size of the<I> name</I> structure.
<!-- lm: 0x2 1 -->
</UL>
<P>
<B>Remarks</B>
<P>
<B>getpeername()</B> retrieves the name of the peer connected to the socket
<I>s</I> and stores it in the struct sockaddr identified by<I> name</I>.
 It is used on a connected datagram or stream socket. On return, the<I> namelen
</I>argument contains the actual size of the name returned in bytes.
<P>
<B>Return Value</B>
<P>
If no error occurs,<B> getpeername()</B> returns 0. Otherwise, a value of
SOCKET_ERROR is returned, and a specific error code may be retrieved by
calling <A HREF="089_L3_WSAGetLastError.html">WSAGetLastError()</A>
<P>
<B>Error Codes</B>
<P>
<!-- lm: 0x2 1 -->
<P>
WSANOTINITIALISED<!-- lm: 0x11 11 -->
<UL> A successful <A HREF="093_L3_WSAStartup.html">WSAStartup()
</A>must occur before using this API.<!-- lm: 0x2 1 -->
</UL> WSAENETDOWN
<!-- lm: 0x11 11 -->
<UL>The Windows Sockets implementation has detected
that the network subsystem has failed.<!-- lm: 0x2 1 -->
</UL> WSAEFAULT
<!-- lm: 0x11 11 -->
<UL>The namelen argument is not large enough.<!-- lm: 0x2 1 -->
</UL> WSAEINPROGRESS
<!-- lm: 0x11 11 -->
<UL>A blocking Windows Sockets call is in progress.
<!-- lm: 0x2 1 -->
</UL>WSAENOTCONN<!-- lm: 0x11 11 -->
<UL> The socket
is not connected.<!-- lm: 0x2 1 -->
</UL> WSAENOTSOCK<!-- lm: 0x11 11 -->
<UL> The
descriptor is not a socket.<!-- lm: 0x2 1 -->
</UL> 
<P>
<B>See Also</B>
<P>
<A HREF="048_L3_bind.html">bind()</A><B>,</B> <A HREF="069_L3_socket.html">socket()</A><B>,
</B><A HREF="052_L3_getsockname.html">getsockname()</A>
<P>


<P><HR>

<A HREF="050_L3_connect.html">[Back: connect()]</A> <BR>
<A HREF="052_L3_getsockname.html">[Next: getsockname()]</A> 
</BODY>
</HTML>
