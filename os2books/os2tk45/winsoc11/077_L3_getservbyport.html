<HTML>
<HEAD>
<TITLE>getservbyport()</TITLE>
</HEAD>
<BODY>
<H1>getservbyport()</H1><!-- entering slot 89 -->
<P>
<B>Description</B>
<P>
Get service information corresponding to a port and protocol.
<P>

<PRE>#include &lt;winsock.h&gt;</PRE>
 
<P>
<B>struct servent FAR * PASCAL FAR getservbyport ( int</B><I> port</I><B>,
const char FAR *</B><I> proto</I><B>);</B><!-- lm: 0x2 1 -->
<UL>
<P>
<I>port</I><!-- lm: 0x11 3 -->
<UL> The port for a service, in network byte
order.<!-- lm: 0x2 1 -->
</UL><I> proto</I><!-- lm: 0x11 3 -->
<UL> An optional
pointer to a protocol name.  If this is NULL,<B> getservbyport()</B> returns
the first service entry for which the<I> port</I> matches the s_port.  Otherwise
<B>getservbyport()</B> matches both the<I> port</I> and the<I> proto</I>.
<!-- lm: 0x2 1 -->
</UL>
<P>
<B>Remarks</B>
<P>
<B>getservbyport()</B> returns a pointer a servent structure as described
above for <A HREF="076_L3_getservbyname.html">getservbyname()</A>.  The
pointer which is returned points to a structure which is allocated by the
Windows Sockets implementation.  The application must never attempt to modify
this structure or to free any of its components.  Furthermore, only one
copy of this structure is allocated per thread, and so the application should
copy any information which it needs before issuing any other Windows Sockets
API calls.
<P>
<B>Return Value</B>
<P>
If no error occurs,<B> getservbyport()</B> returns a pointer to the servent
structure described above.  Otherwise it returns a NULL pointer and a specific
error number may be retrieved by calling <A HREF="089_L3_WSAGetLastError.html">WSAGetLastError()
</A>
<P>
<B>Error Codes</B>
<P>
<!-- lm: 0x2 1 -->
<P>
WSANOTINITIALISED<!-- lm: 0x11 11 -->
<UL> A successful <A HREF="093_L3_WSAStartup.html">WSAStartup()
</A>must occur before using this API.<!-- lm: 0x2 1 -->
</UL> WSAENETDOWN
<!-- lm: 0x11 11 -->
<UL>The Windows Sockets implementation has detected
that the network subsystem has failed.<!-- lm: 0x2 1 -->
</UL> WSANO_RECOVERY
<!-- lm: 0x11 11 -->
<UL>Non recoverable errors, FORMERR, REFUSED, NOTIMP.
<!-- lm: 0x2 1 -->
</UL>WSANO_DATA<!-- lm: 0x11 11 -->
<UL> Valid name,
no data record of requested type.<!-- lm: 0x2 1 -->
</UL> WSAEINPROGRESS
<!-- lm: 0x11 11 -->
<UL>A blocking Windows Sockets operation is in progress.
<!-- lm: 0x2 1 -->
</UL>WSAEINTR<!-- lm: 0x11 11 -->
<UL> The (blocking)
call was canceled via<B> WSACancelBlockingCall()</B><!-- lm: 0x2 1 -->
</UL>
<P>
<B>See Also</B>
<P>
<A HREF="084_L3_WSAAsyncGetServByPor.html">WSAAsyncGetServByPort()</A><B>,
</B><A HREF="076_L3_getservbyname.html">getservbyname()</A>
<P>


<P><HR>

<A HREF="076_L3_getservbyname.html">[Back: getservbyname()]</A> <BR>
<A HREF="078_L2_MicrosoftWindowsspec.html">[Next: Microsoft Windows-specific Extensions]</A> 
</BODY>
</HTML>
