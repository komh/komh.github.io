<HTML XPOS=30% YPOS=TOP WIDTH=70% HEIGHT=100%HIDDEN>
<HEAD>
<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="TEXT/HTML; CHARSET=UTF-8">
<!-- extra bytes: 03 00 14 1E 00 04 00 11 46 00 64 00 --><TITLE>SMH_REGISTER - Example Code</TITLE>
<STYLE>
PRE {
  FONT-FAMILY: Consolas, "Lucida Console", "Courier New", Courier, MONOSPACE;
}
</STYLE>
</HEAD>
<BODY>
<H1>SMH_REGISTER - Example Code</H1><!-- entering slot 607 -->
<P>
The following code illustrates how to register a stream handler with the
Sync/Stream Manager.
<PRE>    #include        "os2.h"
    #include        "os2me.h"

    #define         RegName      "C:\PATH\TESTSH" /* Handler name and path  */

  ULONG         ulRC;                         /* Error return code          */
  HID           hidSource,                    /* Source handler ID          */
                hidTarget;                    /* Target handler ID          */
  PARM_REG      parm_reg;                     /* Register parameter block   */
  PSMHFN        SMHEntryPoint;                /* Pointer to SMH entry point */

/*--------------------------------------------------------------------------*/
/*  Register a stream handler as both source and target.                    */
/*--------------------------------------------------------------------------*/

  parm_reg.ulFunction = SMH_REGISTER;         /* Set function.        */
  parm_reg.pszSHName = (PSZ) RegName;         /* Set handler name.    */
  parm_reg.phidSrc = &amp;hidMSrc;                /* Returns source hid.          */
  parm_reg.phidTgt = &amp;hidMTgt;                /* Returns target hid.          */
  parm_reg.ulFlags = REGISTER_TGT_HNDLR | REGISTER_SRC_HNDLR;
                                              /* Register as a source
                                                 and target stream handler. */
  parm_reg.pshcfnEntry = (PSHCFN) main;       /* Entry point address.    */

  if (ulRC = SMHEntryPoint (&amp;parm_reg))
     return(ulRC);                               /* Error! */
</PRE>


<P><HR>

<A HREF="605_L2H_SMH_REGISTERRelatedM.html">[Back: SMH_REGISTER - Related Messages]</A> <BR>
<A HREF="607_L2H_SMH_REGISTERTopics.html">[Next: SMH_REGISTER - Topics]</A> 
</BODY>
</HTML>
