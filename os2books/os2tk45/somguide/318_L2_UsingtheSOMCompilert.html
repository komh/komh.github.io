<HTML>
<HEAD>
<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="TEXT/HTML; CHARSET=UTF-8">
<TITLE>Using the SOM Compiler to Build an Interface Repository</TITLE>
</HEAD>
<BODY>
<H1>Using the SOM Compiler to Build an Interface Repository</H1><!-- entering slot 364 -->
<P>
The SOMobjects Toolkit includes an Interface Repository emitter that is
invoked whenever the SOM Compiler is run using an<B> sc</B> command with
the<B> -u</B> option (which "updates" the interface repository). The IR
emitter can be used to create or update an Interface Repository file. The
IR emitter expects that an environment variable, SOMIR, was first set to
designate a file name for the Interface Repository. For example, to compile
an IDL source file named "newcls.idl" and create an Interface Repository
named "newcls.ir", use a command sequence similar to the following:
<P>
For OS/2:
<PRE>set SOMIR=c:\myfiles\newcls.ir
sc -u newcls
</PRE>

<P>
For AIX:
<PRE>export SOMIR=~/newcls.ir
sc -u newcls
</PRE>

<P>
If the SOMIR environment variable is not set, the Interface Repository emitter
creates a file named "som.ir" in the current directory.
<P>
The<B> sc</B> or<B> somc</B> command runs the Interface Reposito emitter
plus any other emitters indicated by the environment variable SMEMIT (described
in the topic "Running the SOM Compiler" in Chapter 4, "Implementing SOM
Classes"). To run the Interface Repository emitter by itself, issue the
<B>sc</B> command with the -s option (which overrides SMEMIT) set to "ir".
For example:
<PRE>sc -u -sir newcls        (ON OS/2 or AIX)
somc -u -sir newcls      (On Windows)
</PRE>
or equivalently,
<PRE>sc -usir newcls          (On OS/2 or AIX)
somc -usir newcls        (On Windows)
</PRE>

<P>
The Interface Repository emitter uses the SOMIR environment variable to
locate the designated IR file. If the file does not exist, the IR emitter
creates it. If the named interface repository already exists, the IR emitter
checks all of the "type" information in the IDL source file being compiled
for internal consistency, and then changes the contents of the interface
repository file to agree with with the new IDL definition. For this reason,
the use of the -u compiler flag requires that all of the types mentioned
in the IDL source file must be fully defined within the scope of the compilation.
Warning messages from the SOM Compiler about undefined types result in actual
error messages when using the -u flag.
<P>
The additional type checking and file updating activity implied by the -u
flag increases the time it takes to run the SOM Compiler. Thus, when developing
an IDL class description from scratch, where iterative changes are to be
expected, it may be preferable<I> not</I> to use the -u compiler option
until the class definition has stabilized.

<P><HR>

<A HREF="317_L2_Introduction.html">[Back: Introduction]</A> <BR>
<A HREF="319_L2_ManagingInterfaceRep.html">[Next: Managing Interface Repository files]</A> 
</BODY>
</HTML>
