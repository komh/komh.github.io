<HTML>
<HEAD>
<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="TEXT/HTML; CHARSET=UTF-8">
<TITLE>If you change the parents of a class...</TITLE>
</HEAD>
<BODY>
<H1>If you change the parents of a class...</H1><!-- entering slot 177 -->
<P>
Because the implementation-file emitters never change any existing code
within a previously generated implementation file, changing the parents
of a class requires extremely careful attention by the programmer. For example,
for overridden methods, changing a class's parents may invalidate previous
parent-method calls provided by the template, and require the addition of
new parent-method calls. Neither of these issues is addressed by the incremental
update of previously generated method-procedure templates.
<P>
The greatest danger from changing the parents of a class, however, concerns
the ancestor-initializer calls provided in the stub procedures for initializer
methods. (For further information on ancestor initializer calls, see "Initializing
and Uninitializing Objects" later in this chapter.) Unlike parent-method
calls, ancestor-initializer calls are not optional - they must be made t
all classes specified in a<B> directinitclasses</B> modifier, and these
calls should always include the parents of the class (the default when no
<B>directinitclasses</B> modifier is given). When the parents of a class
are changed, however, the ancestor-initializer calls (which must be made
in a specific order) are not updated.
<P>
The easiest way to deal with this problem is to change the method name of
the previously generated initializer stub procedure in the implementation
template file. Then, the SOM Compiler can correctly generate a completely
new initializer stub procedure (while ignoring the renamed procedure). Once
this is done, your customization code from the renamed initializer procedure
can be "merged" into the newly generated one, after which the renamed initializer
procedure can be deleted.

<P><HR>

<A HREF="145_L4_Considerationstoensu.html">[Back: Considerations to ensure that updates work]</A> <BR>
<A HREF="147_L3_Compilingandlinking.html">[Next: Compiling and linking]</A> 
</BODY>
</HTML>
