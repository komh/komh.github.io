<HTML>
<HEAD>
<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="TEXT/HTML; CHARSET=UTF-8">
<TITLE>Registration steps Using 'regimpl'</TITLE>
</HEAD>
<BODY>
<H1>Registration steps Using 'regimpl'</H1><!-- entering slot 310 -->
<P>
Registering a server implementation and its classes requires the steps described
in the following paragraphs.
<P>
First, make sure the SOMDDIR environment variable is defined to the name
of the Implementation Repository directory, as discussed in the section
"Preparing the Environment."
<P>
Then, to run the<B> regimpl</B> utility, at the system prompt enter:
<P>
<B>&gt; regimpl</B>
<P>
This brings up the DSOM Implementation Registration Utility menu, shown
below. To begin registering the new implementation, select "1.Add" from
the IMPLEMENTATION OPERATIONS section; that is, at the "Enter operation:"
prompt, enter "1" (as shown in bold):
<PRE>DSOM IMPLEMENTATION REGISTRATION UTILITY
(C) Copyright IBM Corp. 1992,1993.  All rights reserved.

Implementation data being loaded from: /u/xyz/dsomRepos/

[ IMPLEMENTATION OPERATIONS ]
 1.Add  2.Delete  3.Change
 4.Show one  5.Show all  6.List aliases
[ CLASS OPERATIONS ]
 7.Add  8.Delete  9.Delete from all  10.List classes
[ SAVE &amp; EXIT OPERATIONS ]
 11.Save data  12.Exit
Enter operation: <B>1</B>
</PRE>

<P>
The<B> regimpl</B> utility then issues several prompts for information about
the server implementation (typical responses are shown in bold as an example).

<P>
<U>Implementation alias</U>.  Enter a "shorthand" name for conveniently
referencing the registered server implementation while using<B> regimpl:
</B>
<PRE>Enter an alias for new implementation:  <B>myServer</B>
</PRE>

<P>
<U>Program name</U>.  Enter the name of the program that will execute as
the server. This may be the name of one of the DSOM generic servers (discussed
under the later topic "Running DSOM Servers") or a user-defined name for
one of these servers. If the program is located in PATH, only the program
name needs to be specified. Otherwise, the pathname must be specified.
<PRE>Enter server program name:(default: somdsvr)  <B>&lt;return&gt;</B>
</PRE>

<P>
<U>Multi-threading</U>.  Specify whether or not the server expects the SOM
Object Adapter<B> (SOMOA)</B> to run each method in a separate thread or
not. Notes: You must ensure that methods executed by the server are "thread
safe". On AIX or Windows, you must also register a thread package to use
a multi-threaded server. See "Customizing Multi-threading Services" in Chapter
5, "Implementing Classes in SOM".
<P>

<PRE>Allow multiple threads in the server? [y/n]
(default: n) : <B>n</B>
</PRE>

<P>
<U>Server class</U>.  Enter the name of the<B> SOMDServer</B> class or subclass
that will manage the objects in the server.
<PRE>Enter server class (default: SOMDServer) : <B>&lt;return&gt;</B>
</PRE>

<P>
<U>Reference data file name</U>.  Enter the full pathname of the file used
to store ReferenceData associated with object references created by this
server. Note: A file name is required only  if the server is using the<B> create
</B>method to generate object references.
<PRE>Enter object reference file name (optional) :  <B>&lt;return&gt;</B>
</PRE>
<U>Backup reference data file name</U>.  Enter the full pathname of the
backup file used to mirror the primary ReferenceData file for this server.
<B>Note:</B> a file name is required only if (1) a primary reference data
file has been specified, and (2) the application<!-- entering slot 311 --> desires
an online backup to be maintained. This file can be used to restore a copy
of the primary file should it become corrupted.
<PRE>Enter object reference backup file name (optional) : <B>&lt;return&gt;</B>
</PRE>

<P>
<U>Host machine name</U>.  This is the name of the machine on which the
server program code is stored. The same name should be indicated in the
HOSTNAME environment variable. (If "localhost" is entered, the contents
of the HOSTNAME environment variable will be used.
<PRE>Enter host machine name:(default: localhost)  <B>&lt;return&gt;</B>
</PRE>

<P>
The<B> regimpl</B> system next displays a summary of the information defined
thus far, and asks for confirmation before adding it. Enter "y" to save
the implementation information in the Implementation Repository.
<PRE>
================================================================
Implementation id.........: 2befc82b-13a11e00-7f-00-10005ac9272a
Implementation alias......: myServer
Program name..............: somdsvr
Multithreaded.............: No
Server class..............:<B>SOMDServer</B>
Object reference file.....:
Object reference backup...:
Host Name.................: localhost

The above implementation is about to be added. Add? [y/n]<B> y</B>
Implementation 'myServer' successfully added
</PRE>
<U>Add class</U>.  Once the server implementation is added, the complete
menu reappears. The next series of prompts and entries will identify the
classes associated with this server. To begin, from the CLASS OPERATIONS
section, select "7.Add":
<PRE>
[ IMPLEMENTATION OPERATIONS ]
 1.Add  2.Delete  3.Change
 4.Show one  5.Show all  6.List aliases
[ CLASS OPERATIONS ]
 7.Add  8.Delete  9.Delete from all  10.List classes
[ SAVE &amp; EXIT OPERATIONS ]
 11.Save data  12.Exit

Enter operation: <B>7</B>
</PRE>
<U>Class name</U>.  Enter the name of a class associated with the implementation
alias.
<PRE>Enter name of class:  <B>class1</B>
</PRE>

<P>
<U>Implementation alias.</U>  Enter the alias for the server that implements
the new class (this should be the same alias as given above).
<PRE>Enter alias of implementation that implements class:  <B>myServer</B>

Class 'class1' now associated with implementation 'myServer'
</PRE>

<P>
The top-level menu will then reappear. Repeat the previous three steps until
all classes have been associated with the server.
<P>
Then, from the SAVE &amp; EXIT OPERATIONS section, select "11.Save data"
to complete the registration. Finally, select "12.Exit" to exit the<B> regimpl
</B>utility.
<PRE>[ IMPLEMENTATION OPERATIONS ]
 1.Add  2.Delete  3.Change
 4.Show one  5.Show all  6.List aliases
[ CLASS OPERATIONS ]
 7.Add  8.Delete  9.Delete from all  10.List classes
[ SAVE &amp; EXIT OPERATIONS ]
 11.Save data  12.Exit

Enter operation:  <B>11</B>

Enter operation:  <B>12</B>
</PRE>


<P><HR>

<A HREF="270_L3_Theregimplpregimplwr.html">[Back: The 'regimpl', 'pregimpl', 'wregimpl' registration utilities]</A> <BR>
<A HREF="272_L4_Commandlineinterface.html">[Next: Command line interface to 'regimpl']</A> 
</BODY>
</HTML>
