<HTML>
<HEAD>
<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="TEXT/HTML; CHARSET=UTF-8">
<TITLE>Building and registering class libraries</TITLE>
<STYLE>
PRE {
  FONT-FAMILY: Consolas, "Lucida Console", "Courier New", Courier, MONOSPACE;
}
</STYLE>
</HEAD>
<BODY>
<H1>Building and registering class libraries</H1><!-- entering slot 304 -->
<P>
The generic server uses SOM's run-time facilities to load class libraries
dynamically. Thus,<I> dynamically linked libraries</I> (DLLs) should be
created for the classes, just as they would be for non-distributed SOM-based
applications. For more information, see the topic Creating a SOM class library
in Chapter 5 "Implementing classes in SOM."
<P>
During the development of the DLL, it is important to remember the following
steps:<!-- lm: 0x2 3 -->
<UL>
<P>
<LI><!-- lm: 0x2 6 -->Export a routine called<B> SOMInitModule</B> in the
DLL, which will be called by SOM to initialize the class objects implemented
in that library.<B> SOMInitModule</B> should contain a &lt;className&gt;<B>NewClass
</B>call for each class in the DLL.<!-- lm: 0x2 3 -->
<P>
<LI><!-- lm: 0x2 6 -->For each class in the DLL, specify the DLL name in
the class's IDL file. The DLL name is specified using the<B> dllname</B>=&lt;name&gt;
modifier in the<I> implementation statement</I> of the interface definition.
If not specified, the DLL filename is assumed to be the same as the class
name.<!-- lm: 0x2 3 -->
<P>
<LI><!-- lm: 0x2 6 -->For each class in the DLL, compile the IDL description
of the class into the Interface Repository. This is accomplished by invoking
the following command syntax:
<PRE>
        sc -sir -u stack.idl       (On AIX or OS/2)

</PRE>

<P>
<B>Note: </B> If the classes are not compiled into the Interface Repository,
DSOM will generate a run-time error (30056: SOMDERROR_BadDescriptor) when
an attempt is made to lookup the signature of a method in the class (for
example, on a method call).<!-- lm: 0x2 6 -->
<UL><!-- lm: 0x2 3 -->
</UL> <!-- lm: 0x2 6 -->
<UL>Put
the DLL in one of the directories listed in LIBPATH for AIX or OS/2, or
listed in PATH for Windows.  This is necessary for both OS/2, AIX, and Windows.)
<!-- lm: 0x2 1 -->
</UL>

<P><HR>

<A HREF="264_L3_Parametermemorymanag.html">[Back: Parameter memory management]</A> <BR>
<A HREF="266_L2_ConfiguringDSOMAppli.html">[Next: Configuring DSOM Applications]</A> 
</BODY>
</HTML>
