<HTML>
<HEAD>
<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="TEXT/HTML; CHARSET=UTF-8">
<TITLE>Initializing the server's ImplementationDef</TITLE>
<STYLE>
PRE {
  FONT-FAMILY: Consolas, "Lucida Console", "Courier New", Courier, MONOSPACE;
}
</STYLE>
</HEAD>
<BODY>
<H1>Initializing the server's ImplementationDef</H1><!-- entering slot 276 -->
<P>
Next, the server program is responsible for initializing its<B> implementationDef,
</B>referred to by the global variable<B> SOMD_ImplDefObject.</B> It is
initialized to NULL by<B> SOMD_Init.</B> (For client programs it should
be left as NULL.) If the server implementation was registered with the Implementation
Repository before the server program was activated (as will be the case
for all servers that are activated automatically by<B> somdd),</B> then
the<B> ImplementationDef</B> can be retrieved from the Implementation Repository.
Otherwise, the server program can register its implementation with the Implementation
Repository dynamically (as shown in section 6.6, "Configuring DSOM applications").

<P>
The server can retrieve its<B> ImplementationDef</B> from the Implementation
Repository by invoking the<B> find_impldef</B> method on<B> SOMD_ImplRepObject.
</B> It supplies, as a key, the implementation ID of the desired<B> ImplementationDef.
</B>
<P>
The following code shows how a server program might initialize the DSOM
run-time environment and retrieve its<B> ImplementationDef</B> from the
Implementation Repository.
<PRE>#include &lt;somd.h&gt; /* needed by all servers */
main(int argc, char **argv)
{
   Environment ev;
   SOM_InitEnvironment(&amp;ev);

/* Initialize the DSOM run-time environment */
   SOMD_Init(&amp;ev);

/* Retrieve its ImplementationDef from the Implementation
   Repository by passing its implementation ID as a key */
   SOMD_ImplDefObject =
      _find_impldef(SOMD_ImplRepObject, &amp;ev, argv[1]);
...
}
</PRE>


<P><HR>

<A HREF="238_L4_InitializingtheDSOMr.html">[Back: Initializing the DSOM run-time environment]</A> <BR>
<A HREF="240_L4_InitializingtheSOMOb.html">[Next: Initializing the SOM Object Adapter]</A> 
</BODY>
</HTML>
