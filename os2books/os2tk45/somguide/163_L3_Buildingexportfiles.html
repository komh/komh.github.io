<HTML>
<HEAD>
<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="TEXT/HTML; CHARSET=UTF-8">
<TITLE>Building export files</TITLE>
<STYLE>
PRE {
  FONT-FAMILY: Consolas, "Lucida Console", "Courier New", Courier, MONOSPACE;
}
</STYLE>
</HEAD>
<BODY>
<H1>Building export files</H1><!-- entering slot 197 -->
<P>
The SOM Compiler provides an "exp" emitter for AIX and a "def" emitter for
OS/2 to produce the necessary exported symbols for each class. For example,
to generate the necessary exports for a class "A", issue the<B> sc</B> or
<B>somc</B> command with one of the following<B> -s</B> options. (For a
discussion of the<B> sc</B> or<B> somc</B> command and options, see "Running
the SOM Compiler" in Chapter 4, "SOM IDL and the SOM Compiler.")
<P>
<B>For AIX,</B> this command generates an "a.exp" file:
<PRE>   sc -sexp a.idl
</PRE>

<P>
<B>For OS/2,</B> this command generates an "a.def" file:
<PRE>   sc -sdef a.idl
</PRE>

<P>
Typically, a class library contains multiple classes. To produce an appropriate
export file for each class that the library will contain, you can create
a new export file for the library itself by combining the exports from each
"exp" or "def" file into a single file. Following are examples of a combined
export "exp" file for AIX and a combined "def" file for OS/2. Each example
illustrates a class library composed of three classes, "A", "B", and "C".

<P>
<B>AIX</B> "exp" file:
<PRE>   #! abc.dll
   ACClassData
   AClassData
   ANewClass
   BCClassData
   BClassData
   BNewClass
   CCClassData
   CClassData
   CNewClass
</PRE>

<P>
<B>OS/2</B> "def" file:
<PRE>   LIBRARY abc INITINSTANCE
   DESCRIPTION 'abc example class library'
   PROTMODE
   DATA MULTIPLE NONSHARED LOADONCALL
   EXPORTS
     ACClassData
     AClassData
     ANewClass
     BCClassData
     BClassData
     BNewClass
     CCClassData
     CClassData
     CNewClass
</PRE>

<P>
Other symbols in addition to those generated by the "def" or "exp" emitter
can be included if needed, but this is not required by SOM. One feature
of SOM is that a class library needs no more than three exports per class
(by contrast, many OOP systems require externals for every method as well).
One required export is the name of a procedure to create the class (&lt;<I>className</I>&gt;<B>NewClass</B>),
and the others are two external data structures that are referenced by the
SOM bindings.

<P><HR>

<A HREF="162_L3_Typesofclasslibrarie.html">[Back: Types of class libraries]</A> <BR>
<A HREF="164_L3_Specifyingtheinitial.html">[Next: Specifying the initialization function]</A> 
</BODY>
</HTML>
