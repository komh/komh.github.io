<HTML>
<HEAD>
<TITLE>Debugging</TITLE>
</HEAD>
<BODY>
<H1>Debugging</H1><!-- entering slot 75 -->
<P>
The following macros are used to conditionally generate output for debugging.
All output generated by these macros is written using the replaceable character-output
procedure pointed to by the global variable<B> SOMOutCharRoutine</B>. The
default procedure simply writes the character to<I> stdout</I>, but it can
be replaced to change the output destination of the methods and functions
below. (See Chapter 5 for more information on customizing SOM.)
<P>
Debugging output is produced or suppressed based on the settings of three
global variables,<B> SOM_TraceLevel, SOM_WarnLevel,</B> and<B> SOM_AssertLevel:
</B><!-- lm: 0x2 3 -->
<UL>
<P>
<LI><!-- lm: 0x2 6 --><B>SOM_TraceLevel</B> controls the behavior of the
&lt;<I>className</I>&gt;<B>MethodDebug</B> macro;<!-- lm: 0x2 3 -->
<P>
<LI><!-- lm: 0x2 6 --><B>SOM_WarnLevel</B> controls the behavior of the
macros<B> SOM_WarnMsg</B>,<B> SOM_TestC,</B> and<B> SOM_Expect;</B> and
<!-- lm: 0x2 3 -->
<P>
<LI><!-- lm: 0x2 6 --><B>SOM_AssertLevel</B> controls the behavior of the
<B>SOM_Assert</B> macro.<!-- lm: 0x2 1 -->
</UL>
<P>
Available macros for generating debugging output are as follows:<!-- lm: 0x2 1 -->
<P>
&lt;<I>className</I>&gt;<B>MethodDebug</B><!-- lm: 0x12 26 -->
<UL> (macro
for C and C++ programmers using the SOM language bindings for &lt;<I>className</I>&gt;)
The arguments to this macro are a class name and a method name. If the<B> SOM_TraceLevel
</B>global variable has a nonzero value, the &lt;className&gt;<B>MethodDebug
</B>macro produces a message each time the specified method (as defined
by the specified class) is executed. This macro is typically used within
the procedure that implements the specified method. (The SOM Compiler automatically
generates calls to the &lt;<I>className</I>&gt;<B>MethodDebug</B> macro
within the implementation template files it produces.) u To suppress method
tracing for all methods of a class, put the following statement in the implementation
file after including the header file for the class:
<PRE>#define &lt;<I>className</I>&gt;MethodDebug(c,m) \
                   SOM_NoTrace(c,m)
</PRE>

<P>
This can yield a slight performance improvement. The<B> SOMMTraced</B> metaclass,
discussed below, provides a more extensive tracing facility that includes
method parameters and returned values.<!-- lm: 0x2 1 -->
</UL><B> SOM_TestC
</B><!-- lm: 0x12 26 -->
<UL>The<B> SOM_TestC</B> macro takes as an argument
a boolean<B></B> expression. If the boolean expression is TRUE (nonzero)
and<B> SOM_AssertLevel</B> is greater than zero, then an informational message
is output. If the expression is FALSE (zero) and<B> SOM_WarnLevel</B> is
greater than zero, a warning message is produced.<!-- lm: 0x2 1 -->
</UL><B> SOM_WarnMsg
</B><!-- lm: 0x12 26 -->
<UL>The<B> SOM_WarnMsg</B> macro takes as an argument
a character string. If the value of<B> SOM_WarnLevel</B> is greater than
zero, the specified message is output.<!-- lm: 0x2 1 -->
</UL><B> SOM_Assert
</B><!-- lm: 0x12 26 -->
<UL>The<B> SOM_Assert</B> macro takes as arguments
a boolean expression and an error code (an integer). If the boolean<B></B> expression
is TRUE (nonzero) and<B> SOM_AssertLevel</B>  is greater than zero, then
an informational message is output. If the expression is FALSE (zero), and
the error code indicates a warning-level error and<B> SOM_WarnLevel</B> is
greater than zero, then a warning message is output. If the expression is
FALSE and the error code indicates a fatal error, then an error message
is produced and the process is terminated.<!-- lm: 0x2 1 -->
</UL><B> SOM_Expect
</B><!-- lm: 0x12 26 -->
<UL>The<B> SOM_Expect</B> macro takes as an argument
a boolean<B></B> expression. If the boolean expression is FALSE (zero) and
<B>SOM_WarnLevel</B> is set to be greater than zero, then a warning message
is output. If<I> condition</I> is TRUE and<B> SOM_AssertLevel</B> is set
to be greater than zero, then an informational message is output.<!-- lm: 0x2 1 -->
</UL>
<P>
See the<I> System Object Model Programming Reference</I> for more information
on a specific macro.
<P>
The<B> somDumpSelf</B> and<B> somPrintSelf</B> methods can be useful in
testing and debugging. The<B> somPrintSelf</B> method produces a brief description
of an object, and the<B> somDumpSelf</B> method produces a more detailed
description. See the<I> System Object Model Programming Reference</I> for
more information.

<P><HR>

<A HREF="057_L4_Functions.html">[Back: Functions]</A> <BR>
<A HREF="059_L3_Checkingthevalidityo.html">[Next: Checking the validity of method calls]</A> 
</BODY>
</HTML>
