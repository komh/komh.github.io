<HTML>
<HEAD>
<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="TEXT/HTML; CHARSET=UTF-8">
<TITLE>DBG_C_XchngOpcode</TITLE>
<STYLE>
PRE {
  FONT-FAMILY: Consolas, "Lucida Console", "Courier New", Courier, MONOSPACE;
}
</STYLE>
</HEAD>
<BODY>
<H1>DBG_C_XchngOpcode</H1><!-- entering slot 720 -->
<P>
<B>Debug Command 29 - Exchange Opcode and Go Command</B>
<P>
<B>Parameters</B><!-- lm: 0x2 1 -->
<UL>
<P>
Pid<!-- lm: 0x2 8 -->
<UL>= Process ID of debuggee<!-- lm: 0x2 1 -->
</UL>Tid<!-- lm: 0x2 8 -->
<UL>= Thread ID of thread<!-- lm: 0x2 1 -->
</UL>Cmd<!-- lm: 0x2 8 -->
<UL>= DBG_C_XchngOpcode<!-- lm: 0x2 1 -->
</UL>Value<!-- lm: 0x2 8 -->
<UL>= Opcode 1 for Single Step<!-- lm: 0x2 1 -->
</UL>Addr<!-- lm: 0x2 8 -->
<UL>= Opcode 2 for Go<!-- lm: 0x2 1 -->
</UL>
<P>
<B>Returns</B>
<P>
The sequence of operations for this Debug command is:<!-- lm: 0x2 2 -->
<UL>
<P>
 <LI><LI><!-- lm: 0x2 6 -->Replace the code at the EIP (instruction pointer)
with opcode 1.<!-- lm: 0x2 2 -->
<P>
 <LI><LI><!-- lm: 0x2 6 -->Single-step the thread specified by the Tid field.
Do not execute other threads. If the single-step operation goes into ring
0 code, consider the single-step operation complete at the first ring 0
instruction.<!-- lm: 0x2 2 -->
<P>
 <LI><LI><!-- lm: 0x2 6 -->Replace the code at the original EIP with opcode
2.<!-- lm: 0x2 2 -->
<P>
 <LI><LI><!-- lm: 0x2 6 -->Issue a Debug Go command on all non-frozen threads.
<!-- lm: 0x2 1 -->
</UL>
<P>
If an exception that<A><!-- external link: 1D 75 C3 29 --> DosDebug</A> is
to be notified about occurs during the single-step operation of this Debug
command, opcode 2 is placed at the original EIP, and<A><!-- external link: 1D 75 C3 29 --> DosDebug
</A>is notified of the exception. When the debugger issues the Debug Continue
command, the child process continues execution.
<P>
<B>Note: </B> If an exception that<A><!-- external link: 1D 75 C3 29 --> DosDebug
</A>is<I> not</I> to be notified about occurs, then the DBG_C_XchngOpcode
command executes as if no exception took place.<!-- lm: 0x2 1 -->
<P>
If opcode 1 and opcode 2 are identical, this Debug command executes only
operations 3 and 4 above. There is no need to single-step the thread specified
by the Tid field. This would be a "replace opcode and go" sequence using
only one<A><!-- external link: 1D 75 C3 29 --> DosDebug</A> function instead
of two.

<P><HR>

<A HREF="706_L3_DBG_C_AddrToObject.html">[Back: DBG_C_AddrToObject]</A> <BR>
<A HREF="708_L3_DBG_C_LinToSel.html">[Next: DBG_C_LinToSel]</A> 
</BODY>
</HTML>
