<HTML XPOS=30% YPOS=TOP WIDTH=70% HEIGHT=100%HIDDEN>
<HEAD>
<!-- extra bytes: 03 00 14 1E 00 04 00 11 46 00 64 00 --><TITLE>WinShutdownSystem - Example Code</TITLE>
</HEAD>
<BODY>
<H1>WinShutdownSystem - Example Code</H1><!-- entering slot 236 -->
<P>
This example performs an OS/2 System Shutdown from a program.
<PRE> #define INCL_WINWORKPLACE
 #define INCL_DOSFILEMGR
 #define INCL_DOSERRORS
 #include &lt;os2.h&gt;
 #include &lt;stdio.h&gt;

 int main(VOID)
   {

    HAB   hab      = NULLHANDLE;   /* Window handle */
    HMQ   hmq      = NULLHANDLE;   /* Message queue handle */
    BOOL  fSuccess = 0;            /* Win API success indicator */

    hab = WinInitialize( 0 );
    hmq = WinCreateMsgQueue( hab, 0 );

    /* Prevent our program from hanging the shutdown.  If this call is
       omitted, the system will wait for us to do a WinDestroyMsgQueue. */

    fSuccess = WinCancelShutdown( hmq, TRUE );

    /* Shutdown the system! */

    printf("System Shutdown will now be attempted...\n");
    fSuccess = WinShutdownSystem( hab, hmq );

    if (!fSuccess) {
       return 1;
    } else {
       return NO_ERROR;
    } /* endif */

    }
</PRE>


<P><HR>

<A HREF="235_L2H_WinShutdownSystemRel.html">[Back: WinShutdownSystem - Related Functions]</A> <BR>
<A HREF="237_L2H_WinShutdownSystemTop.html">[Next: WinShutdownSystem - Topics]</A> 
</BODY>
</HTML>
