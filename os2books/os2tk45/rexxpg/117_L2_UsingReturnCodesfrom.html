<HTML>
<HEAD>
<TITLE>Using Return Codes from Commands</TITLE>
</HEAD>
<BODY>
<H1>Using Return Codes from Commands</H1><!-- entering slot 124 -->
<P>
Information passes between REXX and the environment. REXX sends command
strings to the environment, and the environment can return information.
One piece of information that the environment passes to REXX is the return
code from the command.
<P>
With each command it processes, OS/2 produces a number called a<I> return
code.</I> When a REXX program is running, this return code is automatically
assigned to a special built-in REXX variable named RC.
<P>
If the command was processed with no problems, the return code is nearly
always 0. If something goes wrong, the return code issued is another, nonzero
number. What the number is depends on the command itself and the error encountered.

<P>
This example shows how to display a return code:
<PRE>/* GETRC.CMD report */
'TYPE nosuch.fil'
say 'the return code is' RC
</PRE>

<P>
The special variable RC can be used in expressions just like any other variable.
In the next example, an error message is displayed when a the TYPE command
returns a nonzero value in RC:
<PRE>/* Simple if/then error-handler */
say "Type a file name:"
pull filename
"TYPE" filename
if RC \= 0
then say "Could not find" filename
</PRE>

<P>
This program tells you only that OS/2 could not find a nonexistent file.
This program does not do much more than OS/2 does, but you have the basic
idea of how to capture a return code.
<P>
A system error alone does not stop the running of a REXX program. Without
some provision to stop the program, in this case a<I> trap</I>, REXX continues
running. You may have to press the Control (Ctrl)+Break keys to stop processing.
REXX includes the following instructions for trapping and controlling system
errors:<!-- lm: 0x2 3 -->
<UL>
<P>
<LI><!-- lm: 0x2 6 -->CALL ON ERROR<!-- lm: 0x2 3 -->
<BR>
<LI><!-- lm: 0x2 6 -->CALL ON FAILURE<!-- lm: 0x2 3 -->
<BR>
<LI><!-- lm: 0x2 6 -->SIGNAL ON ERROR<!-- lm: 0x2 3 -->
<BR>
<LI><!-- lm: 0x2 6 -->SIGNAL ON FAILURE<!-- lm: 0x2 1 -->
</UL>
<P>


<P><HR>

<A HREF="116_L2_ADDRESSInstruction.html">[Back: ADDRESS Instruction]</A> <BR>
<A HREF="118_L2_SubcommandProcessing.html">[Next: Subcommand Processing]</A> 
</BODY>
</HTML>
