<HTML>
<HEAD>
<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="TEXT/HTML; CHARSET=UTF-8">
<TITLE>The SOCKS Library</TITLE>
<STYLE>
PRE {
  FONT-FAMILY: Consolas, "Lucida Console", "Courier New", Courier, MONOSPACE;
}
</STYLE>
</HEAD>
<BODY>
<H1>The SOCKS Library</H1><!-- entering slot 98 -->
<P>
The SOCKS library calls establish connections to<B> sockd</B> on the firewall
and transmit information.  The<B> sockd</B> daemon performs the operation
as if it were originating the request. Any data<B> sockd</B> receives from
the external connection is then passed on to the original requestor.  To
the internal host everything appears as usual, but to the external host
<B>sockd</B> appears to be the originator of the communication.
<P>
The SOCKS library routines pass all network connections to<B> sockd,</B> which
is running on the firewall.  The functions that are provided are designated
by the letter R preceding the name of the regular C library socket calls
that they are replacing. The SOCKS routines take the same parameters as
the original functions, with the exception of Rbind(). Rbind() has an additional
parameter: the address of the remote host from which the connection is established.

<P>
The following routines are supported:<!-- lm: 0x2 0 -->
<P>
<B>Routine</B><!-- lm: 0x2 19 -->
<UL><B>Parameters</B><!-- lm: 0x2 0 -->
</UL>Raccept<!-- lm: 0x12 19 -->
<UL>(
intsocket ,structsockaddr * addr ,intaddrlen )<!-- lm: 0x2 0 -->
</UL>Rbind<!-- lm: 0x12 19 -->
<UL>(
intsocket ,structsockaddr * name ,intnamelen ,<I>structsockaddr * remote
)</I><!-- lm: 0x2 0 -->
</UL>Rconnect<!-- lm: 0x12 19 -->
<UL>( intsocket
,structsockaddr * name ,intnamelen )<!-- lm: 0x2 0 -->
</UL>Rgethostbyname<!-- lm: 0x12 19 -->
<UL>(
char* host )<!-- lm: 0x2 0 -->
</UL>Rgetsockname<!-- lm: 0x12 19 -->
<UL>(
intsocket ,structsockaddr * name ,intnamelen )<!-- lm: 0x2 0 -->
</UL>Rlisten<!-- lm: 0x12 19 -->
<UL>(
intsocket ,intbacklog )<!-- lm: 0x2 0 -->
</UL>
<P>
See the information for the regular calls in <A HREF="178_L1_ProtocolIndependentC.html">Protocol-Independent
C Sockets API</A>.
<P>
The following figure shows how a gethostbyname() call works. gethostbyname
<BR>
<!-- Unable to decode bitmap format --><IMG SRC="091_L3_TheSOCKSLibrary_7.gif" WIDTH=519 HEIGHT=1026>
<P>
The following figure shows how an Rbind() request works.
<BR>
Rbind() Request
<BR>
<!-- Unable to decode bitmap format --><IMG SRC="091_L3_TheSOCKSLibrary_8.gif" WIDTH=559 HEIGHT=378>

<P><HR>

<A HREF="090_L3_TheSOCKSServer.html">[Back: The SOCKS Server]</A> <BR>
<A HREF="092_L1_SocketsoverLocalIPC.html">[Next: Sockets over Local IPC]</A> 
</BODY>
</HTML>
