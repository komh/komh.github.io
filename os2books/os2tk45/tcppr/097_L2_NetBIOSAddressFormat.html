<HTML>
<HEAD>
<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="TEXT/HTML; CHARSET=UTF-8">
<TITLE>NetBIOS Address Format</TITLE>
<STYLE>
PRE {
  FONT-FAMILY: Consolas, "Lucida Console", "Courier New", Courier, MONOSPACE;
}
</STYLE>
</HEAD>
<BODY>
<H1>NetBIOS Address Format</H1><!-- entering slot 104 -->
<P>
A socket address in a NetBIOS address family is composed of the six fields
in the following sockaddr_nb structure: length, address family, address
type, a reserved field, adapter number, and NetBIOS name. This structure
is located in the &lt;NETNB\NB.H&gt; header file:
<PRE>struct       sockaddr_nb {
    u_char   snb_len;                  /* sizeof(struct sockaddr_nb) */
    u_char   snb_family;               /* AF_NETBIOS */
    short    snb_type;                 /* 0:unique or 1:group */
    char     snb_nbnetid[NB_NETIDLEN]; /* NetBIOS netid */
    char     snb_name[NAMELEN];        /* NetBIOS name */
}
</PRE>

<P>
The length field (<I>snb_len</I>) is set to sizeof(struct sockaddr_nb).

<P>
The family field (<I>snb_family</I>) is set to AF_NETBIOS or AF_NB.
<P>
The address type field (<I>snb_type</I>) is used to specify the name as
either a unique (NB_UNIQUE) or a group (NB_GROUP) name.
<P>
The network identifier field (<I>sub_netid</I>) is used by the protocol
stack to contain the NetBIOS netid, which is the logical adapter number
that the name is associated with.
<P>
The name field (<I>snb_name</I>) contains the 16-byte NetBIOS name, and
is used as is.
<P>
If a connect() socket call is received without an explicit bind() call,
an implicit bind is automatically performed.  The application can use any
name, and a unique NetBIOS name is generated by the system. A NetBIOS name
is generated for this socket by converting the 6-byte MAC address to an
ASCII hex string, and postpended with a 2-byte number that increments after
each use. You can retrieve the NetBIOS name by using the getsockname() call.

<P>
Note that for the NetBIOS domain, more than one socket can be bound to the
same local address to establish multiple connections to one or more remote
destinations. To enable this feature, the socket option SO_REUSEADDR must
be set (see <A HREF="202_L2_setsockopt.html">setsockopt()</A>). In addition,
you can bind more than one address to the same adapter.

<P><HR>

<A HREF="096_L2_GettingStartedwithSo.html">[Back: Getting Started with Sockets Over NetBIOS]</A> <BR>
<A HREF="098_L1_WindowsSocketsVersio.html">[Next: Windows Sockets Version 1.1 for OS/2]</A> 
</BODY>
</HTML>
