<HTML>
<HEAD>
<TITLE>Dynamic Trace Customizer (TRCUST)</TITLE>
</HEAD>
<BODY>
<H1>Dynamic Trace Customizer (TRCUST)</H1><!-- entering slot 443 -->
<P>
OS/2 provides a mechanism by which developers may dynamically apply tracepoints
in their module at run time.  This method eliminates all overhead of tracing
when tracing is disabled. It also allows the developer to add tracepoints
without modifying source code.  This reduces the possibility that adding
a tracepoint will induce errors into one's code.  OS/2 needs a binary file,
for each module being dynamically traced, which defines the tracepoints
for the module.
<P>
There are certain restrictions on the use of dynamic trace which should
be noted.  These are:<!-- lm: 0x2 3 -->
<UL>
<P>
<LI><!-- lm: 0x2 6 -->Executable (.EXE) programs running in processes other
than the trace command cannot have dynamic tracepoints applied.<!-- lm: 0x2 3 -->
<P>
<LI><!-- lm: 0x2 6 -->A dynamic tracepoint cannot be applied to a module
running under the Kernel Debugger that has a Breakpoint in place at the
same location as the trace point.<!-- lm: 0x2 3 -->
<P>
<LI><!-- lm: 0x2 6 -->The trace command is unable to apply dynamic tracepoints
to any module for whom DosLoadModule is not applicable. This precludes the
following:<!-- lm: 0x2 8 -->
<UL>
<P>
<LI><!-- lm: 0x2 11 -->Physical Device Drivers<!-- lm: 0x2 8 -->
<BR>
<LI><!-- lm: 0x2 11 -->Virtual Device Drivers<!-- lm: 0x2 8 -->
<BR>
<LI><!-- lm: 0x2 11 -->File System Device Drivers<!-- lm: 0x2 6 -->
</UL> The
DTRACE utility (shipped with the IBM Developer Connection and OS/2 Warp
4) provides a means of overcoming this particular restriction.<!-- lm: 0x2 1 -->
</UL>
<P>
The Trace Customizer (TRCUST) converts tracepoint definitions from a trace
source file (TSF) into dynamic tracepoints for the trace definition file
(TDF), and into formatting rules in the trace format file (TFF).
<P>
<B>Definitions</B><!-- lm: 0x2 1 -->
<P>
<LI>TSF<!-- lm: 0x2 15 -->
<UL> An ASCII file created by a developer which
defines all dynamic tracepoints for a given module. TRCUST currently allows
at most only one major code per TSF.<!-- lm: 0x2 1 -->
</UL> .TDF<!-- lm: 0x2 15 -->
<UL> A
binary file, created by TRCUST, using the<B> .TSF</B> file as input.  This
file defines all tracepoints in the module in a manner acceptable to OS/2.
This is used by the Trace Utility, TRACE.<!-- lm: 0x2 1 -->
</UL> .TFF<!-- lm: 0x2 15 -->
<UL> A
binary file also created by TRCUST using the<B> .TSF</B> file.  This file
defines how all tracepoints will be formatted.  This is used by the Trace
Formatter, TRACEFMT.<!-- lm: 0x2 1 -->
</UL> major code<!-- lm: 0x2 15 -->
<UL> A
byte value used to identify the module being traced. TRCUST allows at most
only one major code per TSF.<!-- lm: 0x2 1 -->
</UL> minor code<!-- lm: 0x2 15 -->
<UL> A
word value used to uniquely identify each tracepoint.<!-- lm: 0x2 1 -->
</UL> GROUP
<!-- lm: 0x2 15 -->
<UL>A value used to identify this tracepoint with tracepoints
of the same category.  Examples are MEM for memory management and PM for
Presentation Manager. For an example of uses of groups, see the online help
for the<B> TRACE</B> command.<!-- lm: 0x2 1 -->
</UL> TYPE<!-- lm: 0x2 15 -->
<UL> A
value used to associate a subset of dynamic trace events within a module.
Examples are PRE for pre-invocation, POST for post-invocation and API for
API calls within a module. For an explanation and examples of uses of types,
see the online help for the<B> trace</B> command.<!-- lm: 0x2 1 -->
</UL>

<P><HR>

<A HREF="428_L4_WINDOWTEMPLATEStatem.html">[Back: WINDOWTEMPLATE Statement]</A> <BR>
<A HREF="430_L2_FileNamingandLocatio.html">[Next: File Naming and Location]</A> 
</BODY>
</HTML>
