<HTML>
<HEAD>
<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="TEXT/HTML; CHARSET=UTF-8">
<TITLE>/STACKDOS</TITLE>
<STYLE>
PRE {
  FONT-FAMILY: Consolas, "Lucida Console", "Courier New", Courier, MONOSPACE;
}
</STYLE>
</HEAD>
<BODY>
<H1>/STACKDOS</H1><!-- entering slot 76 --><B>Set DOS Stack Allocation (/STACKDOS)</B>
<P>
Syntax:   /STACKDOS:<I>nnnn</I>
<P>
This option sets the size of the stack in the DOS header. The field<I> nnnn
</I>contains the stack size in bytes. This option is equivalent to the Control
Stack Size (/ST) (in LINK). DOS modules have a maximum stack size of 65,535.

<P>
Almost all OS/2 applications have a DOS header and DOS stub. The DOS stub
normally is found in 3 forms. The first stub type is the LINK386 default
stub.  This is a small DOS program that simply prints an error message of
the form "This program cannot be run in a DOS session." and exits. The second
common stub type is a FAPI (Family API) program. This allow the applications
to be run equally from a real DOS machine, an OS/2 or Windows DOS box, or
from an OS/2 protected mode session. Many of the OS/2 system utilities are
written with FAPI. The third stub type is that of a fully independant DOS
application preceding the OS/2 binary image, allowing the two programs to
share the same executable module. These DOS stubs are attached to the OS/2
module by using the <A HREF="221_L3_STUBStatement.html">STUB</A> statement
within a LINK386 .def file.
<P>
You can specify<I> nnnn</I> in decimal, hexadecimal, or octal radix using
standard C language notation. For instance, a DOS stack size of 4,096 bytes
can be expressed as any of the following:<!-- lm: 0x2 3 -->
<UL>
<P>
<LI><!-- lm: 0x2 6 --><LI>STACKDOS:4096<!-- lm: 0x2 3 -->
<P>
<LI><!-- lm: 0x2 6 --><LI>STACKDOS:0x1000<!-- lm: 0x2 3 -->
<P>
<LI><!-- lm: 0x2 6 --><LI>STACKDOS:010000<!-- lm: 0x2 1 -->
</UL>
<P>
Compare to <A HREF="075_L4_STACKOS2.html">/STACKOS2</A>.
<P>
<B>DO NOT USE /STACK</B>
<P>
There is an old EXEHDR option /STACK that performed a function similar to
/STACKDOS and /STACKOS2 combined. The /STACK option has serious limitations
and has the potential to corrupt the header of an executable module. It
it very strongly recommended that you<U><I> do not use /STACK</I></U>, and
begin using /STACKDOS and /STACKOS2 instead.<!-- lm: 0x2 3 -->
<UL>
<P>
<LI><!-- lm: 0x2 6 -->For a<B> DOS-only</B> application, the /STACK option
will work correctly.<!-- lm: 0x2 3 -->
<P>
<LI><!-- lm: 0x2 6 -->For a 32-bit OS/2 application, the /STACK option will
only change the stack value in the header of the DOS stub; it will<B> not
</B>modify the OS/2 header, which is what the user may have intended.<!-- lm: 0x2 3 -->
<P>
<LI><!-- lm: 0x2 6 -->For a 16-bit OS/2 application, the /STACK option will
attempt to change both the DOS stub and OS/2 application stack values to
the same<I> nnnn</I> value.  This can lead to application failures. The
headers of the DOS stub and the OS/2 application should therefore be modified
independently of each other using the /STACKDOS and /STACKOS2 options.<!-- lm: 0x2 1 -->
</UL>

<P><HR>

<A HREF="073_L4_RESETERROR.html">[Back: /R[ESETERROR]]</A> <BR>
<A HREF="075_L4_STACKOS2.html">[Next: /STACKOS2]</A> 
</BODY>
</HTML>
