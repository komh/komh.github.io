<HTML>
<HEAD>
<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="TEXT/HTML; CHARSET=UTF-8">
<TITLE>Custom Public Window Classes</TITLE>
</HEAD>
<BODY>
<H1>Custom Public Window Classes</H1><!-- entering slot 473 -->
<P>
An application can create a custom public window class, but it must do so
during system initialization.  Only the shell can register a public window
class, and it can do so only when the system starts.  Registering a public
window class requires a special load entry in the os2.ini file.  That entry
instructs the shell to load a dynamic link library whose initialization
routine registers the window class.  Custom public window classes must be
registered using WinRegisterClass and must have the class style CS_PUBLIC.
 If a custom public window class registered this way has the same name as
an existing public window class, the custom class replaces the original
class.
<P>
If a dynamic link library replaces an existing public window class, the
library can save the address of the original window procedure and use the
address to subclass the original window class.  The dynamic link library
retrieves the original window procedure address using the WinQueryClassInfo
function.  The custom window procedure then passes unprocessed messages
to the original window procedure instead of calling WinDefWindowProc.
<P>
When subclassing a public window class, the custom public window procedure
must not make the window data size smaller than the original window data
size, because all public window classes that the operating system defines
use 4 extra bytes for storing a pointer to custom window data.  This size
is guaranteed only for public window classes defined by the operating system
dynamic link libraries.

<P><HR>

<A HREF="466_L4_SystemDefinedPublicW.html">[Back: System-Defined Public Window Classes]</A> <BR>
<A HREF="468_L3_ClassData.html">[Next: Class Data]</A> 
</BODY>
</HTML>
