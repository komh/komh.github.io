<HTML>
<HEAD>
<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="TEXT/HTML; CHARSET=UTF-8">
<TITLE>Metafile Restrictions</TITLE>
</HEAD>
<BODY>
<H1>Metafile Restrictions</H1><!-- entering slot 513 -->
<P>
The following restrictions apply to the generation of all metafiles, and
also to the generation of a PM_Q_STD print file to a device:<!-- lm: 0x2 3 -->
<UL>
<P>
<LI><!-- lm: 0x2 6 -->If GpiWCBitBlt or GpiBitBlt is used to copy a bit
map to a device context in an application, the application should not delete
that bit map handle with GpiDeleteBitmap before the device context is closed
(metafile is closed).<!-- lm: 0x2 3 -->
<P>
<LI><!-- lm: 0x2 6 -->GpiSetPS must not be used.<!-- lm: 0x2 3 -->
<P>
<LI><!-- lm: 0x2 6 -->GpiSetPageViewport is ignored.<!-- lm: 0x2 1 -->
</UL>
<P>
The following section lists some general rules that must be followed when
creating a metafile that is to be acceptable to SAA-conforming implementations,
or replayed into a presentation space that is in<B> draw-and-retain</B> or
<B>retain</B> mode (see "GpiSetDrawingMode" in<I><I> Graphics Programming
Interface Programming Reference</I>).<!-- lm: 0x2 3 -->
<UL>
<P>
<LI><!-- lm: 0x2 6 -->These items must be established or defaulted before
any drawing occurs to the graphics presentation space, and not changed subsequently:
<!-- lm: 0x2 8 -->
<UL>
<P>
<LI><!-- lm: 0x2 11 -->The graphics field (GpiSetGraphicsField). For an
SAA-conforming metafile, the graphics field must be defaulted or set to
no clipping.<!-- lm: 0x2 8 --> -<!-- lm: 0x2 11 -->
<UL>The code page for
the default character set (GpiSetCp).<!-- lm: 0x2 8 -->
</UL>-<!-- lm: 0x2 11 -->
<UL>The color table or palette (GpiCreateLogColorTable
or GpiCreatePalette). The size of the color table must not exceed 31KB (KB
equals 1024 bytes).<!-- lm: 0x2 8 -->
</UL>-<!-- lm: 0x2 11 -->
<UL>The default viewing transform (GpiSetDefaultViewMatrix).
<!-- lm: 0x2 8 -->
</UL>-<!-- lm: 0x2 11 -->
<UL>The setting of the draw controls (GpiSetDrawControl).
DCTL_DISPLAY must be defaulted or set ON.<!-- lm: 0x2 8 -->
</UL>-<!-- lm: 0x2 11 -->
<UL>The default values of attributes (see "GpiSetDefAttrs"
in the<I><I> Graphics Programming Interface Programming Reference</I>),
viewing limits (see "GpiSetDefViewingLimits" in the<I><I> Graphics Programming
Interface Programming Reference</I>), primitive tag (see "GpiSetDefTag"
in the<I><I> Graphics Programming Interface Programming Reference</I>) and
arc parameters (see "GpiSetDefArcParams" in the<I><I> Graphics Programming
Interface Programming Reference</I>).<!-- lm: 0x2 6 --><!-- lm: 0x2 3 -->
</UL> <!-- lm: 0x2 6 -->
<UL>These
calls should not be used:<!-- lm: 0x2 8 -->
<UL>
<P>
<LI><!-- lm: 0x2 11 -->GpiBitBlt<!-- lm: 0x2 8 --> -<!-- lm: 0x2 11 -->
<UL>GpiDeleteSetId
(note that this means that local identifiers cannot be used again within
the picture)<!-- lm: 0x2 8 -->
</UL>-<!-- lm: 0x2 11 -->
<UL>GpiErase<!-- lm: 0x2 8 -->
</UL>-<!-- lm: 0x2 11 -->
<UL>GpiExcludeClipRectangle<!-- lm: 0x2 8 -->
</UL>-<!-- lm: 0x2 11 -->
<UL>GpiIntersectClipRectangle<!-- lm: 0x2 8 -->
</UL>-<!-- lm: 0x2 11 -->
<UL>GpiOffsetClipRegion<!-- lm: 0x2 8 -->
</UL>-<!-- lm: 0x2 11 -->
<UL>GpiPaintRegion<!-- lm: 0x2 8 -->
</UL>-<!-- lm: 0x2 11 -->
<UL>GpiResetPS<!-- lm: 0x2 8 -->
</UL>-<!-- lm: 0x2 11 -->
<UL>GpiSetClipRegion<!-- lm: 0x2 8 -->
</UL>-<!-- lm: 0x2 11 -->
<UL>GpiSetPel<!-- lm: 0x2 8 -->
</UL>-<!-- lm: 0x2 11 -->
<UL>GpiSetPS<!-- lm: 0x2 8 -->
</UL>-<!-- lm: 0x2 11 -->
<UL><A><!-- external link: 1D 5E C3 FC -->DevEscape
</A>(for an escape which is metafiled).<!-- lm: 0x2 6 --><!-- lm: 0x2 3 -->
</UL> <!-- lm: 0x2 6 -->
<UL>GpiCreateLogFont
must not redefine a local identifier that has previously been used within
the picture.<!-- lm: 0x2 3 -->
</UL> <!-- lm: 0x2 6 -->
<UL>The metafile
context must not be reassociated.<!-- lm: 0x2 3 -->
</UL> <!-- lm: 0x2 6 -->
<UL>If
a bit map is used as the source of a GpiWCBitBlt operation, or as an area-fill
pattern, it must not be modified or deleted (GpiDeleteBitmap) before the
metafile is closed.<!-- lm: 0x2 3 -->
</UL> <!-- lm: 0x2 6 -->
<UL>Only
these foreground mixes must be used (see "GpiSetMix" in the<I><I> Graphics
Programming Interface Programming Reference</I>):<!-- lm: 0x2 8 -->
<UL>
<P>
<LI><!-- lm: 0x2 11 -->FM_DEFAULT<!-- lm: 0x2 8 --> -<!-- lm: 0x2 11 -->
<UL>FM_OR
<!-- lm: 0x2 8 -->
</UL>-<!-- lm: 0x2 11 -->
<UL>FM_OVERPAINT<!-- lm: 0x2 8 -->
</UL>-<!-- lm: 0x2 11 -->
<UL>FM_LEAVEALONE<!-- lm: 0x2 6 --><!-- lm: 0x2 3 -->
</UL> <!-- lm: 0x2 6 -->
<UL>Only
these background mixes must be used (see "GpiSetBackMix" in the<I><I> Graphics
Programming Interface Programming Reference</I>):<!-- lm: 0x2 8 -->
<UL>
<P>
<LI><!-- lm: 0x2 11 -->BM_DEFAULT<!-- lm: 0x2 8 --> -<!-- lm: 0x2 11 -->
<UL>BM_OVERPAINT
<!-- lm: 0x2 8 -->
</UL>-<!-- lm: 0x2 11 -->
<UL>BM_LEAVEALONE<!-- lm: 0x2 6 --><!-- lm: 0x2 3 -->
</UL> <!-- lm: 0x2 6 -->
<UL>If
palettes are used (see "GpiCreatePalette" in the<I><I> Graphics Programming
Interface Programming Reference</I>): the palette that is metafiled is the
one in force when the metafile device context is dissociated from the (final)
presentation space. If the palette is changed during the course of the picture
(using GpiSetPaletteEntries), it must therefore only be with incremental
additions.<!-- lm: 0x2 1 -->
</UL>
<P>
<B>Note: </B> There is no restriction concerning the use of primitives outside
segments. These are metafiled in segment(s) with zero identifier.<!-- lm: 0x2 1 -->
<P>


<P><HR>

<A HREF="498_L2_InterchangeFileForma.html">[Back: Interchange File Format]</A> <BR>
<A HREF="500_L3_MetafileDataFormat.html">[Next: Metafile Data Format]</A> 
</BODY>
</HTML>
