<HTML XPOS=30% YPOS=TOP WIDTH=70% HEIGHT=100%HIDDEN>
<HEAD>
<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="TEXT/HTML; CHARSET=UTF-8">
<!-- extra bytes: 03 00 14 1E 00 04 00 11 46 00 64 00 --><TITLE>GpiQueryDeviceBitmapFormats - Example Code</TITLE>
</HEAD>
<BODY>
<H1>GpiQueryDeviceBitmapFormats - Example Code</H1><!-- entering slot 1498 -->
<P>
This example uses the GpiQueryDeviceBitmapFormats function to retrieve bit-map
formats for the screen and creates a screen-compatible bit map with GpiCreateBitmap.

<PRE>#define INCL_GPIBITMAPS         /* GPI Bit-map functions         */
#include &lt;os2.h&gt;

HPS          hps;       /* Target presentation-space handle     */
LONG         lFormats[24];/* Formats supported by the device    */
HBITMAP      hbm;       /* Bit-map handle                       */
PBYTE        pb;        /* Bit-map image data                   */
BITMAPINFO2  pbmInfo;   /* Bit-map information table            */

/* Get screen supportable formats */
GpiQueryDeviceBitmapFormats(hps, 24L, lFormats);


/****************************
 * set bitmapinfo structure *
 ****************************/
pbmInfo.cbFix = 16L;
pbmInfo.cx = 100L;
pbmInfo.cy = 100L;
pbmInfo.cPlanes = (USHORT) lFormats[0] ;
pbmInfo.cBitCount = (USHORT) lFormats[1];

/* create bit map and return handle */
hbm = GpiCreateBitmap(hps,       /* presentation space         */
                   (PBITMAPINFOHEADER2)&amp;pbmInfo,
                                 /* bit-map information header */
                   CBM_INIT,     /* initialize the bit map     */
                   pb,           /* bit-map data               */
                   &amp;pbmInfo);    /* bit-map information table  */
</PRE>


<P><HR>

<A HREF="1486_L2H_GpiQueryDeviceBitmap.html">[Back: GpiQueryDeviceBitmapFormats - Errors]</A> <BR>
<A HREF="1488_L2H_GpiQueryDeviceBitmap.html">[Next: GpiQueryDeviceBitmapFormats - Topics]</A> 
</BODY>
</HTML>
