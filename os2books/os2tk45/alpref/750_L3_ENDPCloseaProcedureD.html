<HTML>
<HEAD>
<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="TEXT/HTML; CHARSET=UTF-8">
<TITLE>ENDP (Close a Procedure Definition Block)</TITLE>
</HEAD>
<BODY>
<H1>ENDP (Close a Procedure Definition Block)</H1><!-- entering slot 757 -->
<P>
Every procedure block opened with the<B> PROC</B> directive must be ended
with the<B> ENDP</B> directive.<!-- lm: 0x2 1 -->
<UL>
<P>
<B>Syntax</B><!-- lm: 0x2 11 -->
<UL>
<P>

<PRE><I>procedure-name</I> <B>ENDP</B>
</PRE>
<!-- lm: 0x2 1 -->
</UL><B>Remarks</B><!-- lm: 0x2 11 -->
<UL>
<P>
If the<B> ENDP</B> directive is not used with the<B> PROC</B> directive,
an error occurs.  An unmatched<B> ENDP</B> also causes an error.
<P>

<P>
<B>Note: </B> See the<B> PROC</B> directive in this chapter for more detail
and examples of<B> ENDP</B> use.<!-- lm: 0x2 11 --><!-- lm: 0x2 1 -->
</UL><B> Example
</B><!-- lm: 0x2 11 -->
<UL>
<P>

<PRE>PUSH     AX               ; Push third parameter
PUSH     BX               ; Push second parameter
PUSH     CX               ; Push first parameter
CALL     ADDUP            ; Call the procedure
ADD      SP,6             ; Bypass the pushed parameters
.
.
.
ADDUP    PROC   NEAR      ; Return address for near call
                          ; takes two bytes
         PUSH   BP        ; Save base pointer - takes two more
                          ; so parameters start at 4th byte
         MOV    BP,SP     ; Load stack into base pointer
         MOV    AX,[BP+4] ; Get first parameter
                          ; 4th byte above pointer
         ADD    AX,[BP+6] ; Get second parameter
                          ; 6th byte above pointer
         ADD    AX,[BP+8] ; Get third parameter
                          ; 8th byte above pointer
         POP    BP        ; Restore base
         RET              ; Return
ADDUP    ENDP
</PRE>

<P>
In this example, three numbers are passed as parameters for the procedure
<B>ADDUP</B>.  Parameters are often passed to procedures by pushing them
before the call so that the procedure can read them off the stack.<!-- lm: 0x2 1 -->
</UL>

<P><HR>

<A HREF="749_L3_LOCALDefineLocalProc.html">[Back: LOCAL (Define Local Procedure Variables)]</A> <BR>
<A HREF="751_L2_ProcessorControl.html">[Next: Processor Control]</A> 
</BODY>
</HTML>
