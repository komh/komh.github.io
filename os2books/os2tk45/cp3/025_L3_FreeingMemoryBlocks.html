<HTML>
<HEAD>
<TITLE>Freeing Memory Blocks</TITLE>
</HEAD>
<BODY>
<H1>Freeing Memory Blocks</H1><!-- entering slot 25 -->
<P>
<A><!-- external link: 1D 00 C4 2E -->DosSubFreeMem</A> frees a block of
memory that was previously allocated by<A><!-- external link: 1D FF C3 FC --> DosSubAllocMem</A>.

<P>
Call<A><!-- external link: 1D 00 C4 2E --> DosSubFreeMem</A> to free a block
of memory in the heap when you are finished with that memory block.
<P>
The following code fragment frees a block of memory that was previously
allocated from a heap.<A><!-- external link: 1D 00 C4 2E --> DosSubFreeMem
</A>returns the block to the heap. Assume that the<I> Offset</I> variable
has been previously set to the address of the initialized heap, and that
the<I> BlockOffset</I> variable has been previously set to the address of
the block to be returned to the heap.
<PRE>    #define  INCL_DOSMEMMGR   /* Memory Manager values */
    #include &lt;os2.h&gt;
    #include &lt;stdio.h&gt;

    PVOID   pOffset;         /* Offset of the heap to which the          */
                             /* block is to be freed                     */
    PVOID   pBlockOffset;    /* Offset of memory block to be freed       */
    ULONG   ulSize;          /* Size in bytes of block to be freed       */
    APIRET  ulrc;            /* Return code                              */

    ulSize = 102;            /* Return 102 bytes.  This will be rounded  */
                             /* to 104 bytes (a multiple of 8 bytes).    */

    ulrc = DosSubFreeMem(pOffset,
                         pBlockOffset,
                         ulSize);

    if (ulrc != 0) {
        printf("DosSubFreeMem error: return code = %ld",
               ulrc);
        return;
    }

</PRE>


<P><HR>

<A HREF="024_L3_AllocatingaBlockofMe.html">[Back: Allocating a Block of Memory from a Heap]</A> <BR>
<A HREF="026_L3_EndingtheUseoftheHea.html">[Next: Ending the Use of the Heap]</A> 
</BODY>
</HTML>
