<HTML>
<HEAD>
<TITLE>Memory Protection</TITLE>
</HEAD>
<BODY>
<H1>Memory Protection</H1><!-- entering slot 9 -->
<P>
When an application allocates a memory object, it can specify the type of
access to allow to the object. Memory access protection provides a program
with control over the type of access that its threads have to a page of
memory.
<P>
Access protection can only be defined for committed pages of memory and
is initially set at the time the memory is committed. Different pages within
the same memory object can have different access attributes and access attributes
can be changed on a page-by-page basis at any time.
<P>
An application can request any combination of the following access protection
attributes:
<P>
<B>Memory Access Protection Attributes</B>
<PRE>ÚÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÂÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÂÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¿
³Access              ³Defined Constant    ³Description         ³
ÃÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÅÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÅÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ´
³Read Access         ³PAG_READ            ³The object can be   ³
³                    ³                    ³read from, but not  ³
³                    ³                    ³written to.         ³
ÃÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÅÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÅÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ´
³Write Access        ³PAG_WRITE           ³The object can be   ³
³                    ³                    ³written to.  On the ³
³                    ³                    ³80386               ³
³                    ³                    ³microprocessor,     ³
³                    ³                    ³write access implies³
³                    ³                    ³both read and       ³
³                    ³                    ³execute access.     ³
ÃÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÅÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÅÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ´
³Execute Access      ³PAG_EXECUTE         ³This is equivalent  ³
³                    ³                    ³to read access on   ³
³                    ³                    ³the 80386.          ³
ÃÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÅÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÅÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ´
³Guard Page Access   ³PAG_GUARD           ³Causes a            ³
³                    ³                    ³guard-page-entered  ³
³                    ³                    ³exception to be     ³
³                    ³                    ³raised in a process ³
³                    ³                    ³that attempts to    ³
³                    ³                    ³access the memory.  ³
³                    ³                    ³This exception can  ³
³                    ³                    ³be ignored or       ³
³                    ³                    ³handled by the      ³
³                    ³                    ³application's       ³
³                    ³                    ³exception handler,  ³
³                    ³                    ³if one is           ³
³                    ³                    ³registered.         ³
ÀÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÁÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÁÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÙ
</PRE>

<P>
The guard page attribute is intended to provide automatic stack growth and
stack limit checking. An application can also use it in other data structures,
such as arrays. For example, if an application is using an array of 4096
bytes (one page), the application can allocate and commit two pages, one
with read and write access and one designated as a guard page. If the application
tries to write past the end of the array a page guard exception will be
generated.
<P>
Any reference-read, write, or execute-to a guard page causes an access violation
(page fault) to be generated. This fault causes a Guard Page Entered exception
to occur for the thread that referred to the guard page. The exception can
be handled by the exception handler of the process, if one is registered.
If the process does not have an exception handler registered, OS/2's default
exception handler will handle the exception. The default action by the system
exception handler is to convert the page from a guard page to a committed
page, then try to mark the next page in memory as a guard page. If the system
is not successful in marking the next page as a guard page, an Unable-To-Grow-Stack
exception occurs. The thread is allowed to continue execution, but must
be aware that it has at most 4KB of stack remaining.

<P><HR>

<A HREF="008_L3_MemoryResizingandRea.html">[Back: Memory Resizing and Reallocation]</A> <BR>
<A HREF="010_L3_ObtainingInformation.html">[Next: Obtaining Information about a Page Range]</A> 
</BODY>
</HTML>
