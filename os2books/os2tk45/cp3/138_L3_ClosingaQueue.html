<HTML>
<HEAD>
<TITLE>Closing a Queue</TITLE>
</HEAD>
<BODY>
<H1>Closing a Queue</H1><!-- entering slot 146 -->
<P>
<A><!-- external link: 1D 69 C3 1D -->DosCloseQueue</A> can be used both
to end access to a queue and to delete a queue. The action taken as a result
of a<A><!-- external link: 1D 69 C3 1D --> DosCloseQueue</A> request depends
on:<!-- lm: 0x2 3 -->
<UL>
<P>
<LI><!-- lm: 0x2 6 -->Whether the requesting process is the server process
or a client process<!-- lm: 0x2 3 -->
<BR>
<LI><!-- lm: 0x2 6 -->The value of the access count, which is maintained
for each client process by OS/2. The access count for a client process is
incremented whenever<A><!-- external link: 1D A3 C3 1E --> DosOpenQueue
</A>is called, and decremented whenever<A><!-- external link: 1D 69 C3 1D --> DosCloseQueue
</A>is called.<!-- lm: 0x2 1 -->
</UL>
<P>
If the requesting process is a client, and the access count equals 0,<A><!-- external link: 1D 69 C3 1D --> DosCloseQueue
</A>ends the client's access to the queue, but the queue itself is not affected.
If the access count does not equal 0, the count is decremented, but the
process retains access to the queue.
<P>
If the requesting process is the server,<A><!-- external link: 1D 69 C3 1D --> DosCloseQueue
</A>purges any outstanding elements from the queue and deletes the queue
regardless of the access count; client processes that still have the queue
open receive ERROR_QUE_INVALID_HANDLE on their next request.

<P><HR>

<A HREF="137_L3_PurgingaQueue.html">[Back: Purging a Queue]</A> <BR>
<A HREF="139_L1_Semaphores.html">[Next: Semaphores]</A> 
</BODY>
</HTML>
