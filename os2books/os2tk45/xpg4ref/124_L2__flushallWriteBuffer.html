<HTML>
<HEAD>
<TITLE>_flushall - Write Buffers to Files</TITLE>
</HEAD>
<BODY>
<H1>_flushall - Write Buffers to Files</H1><!-- entering slot 129 -->_flushall - Write Buffers to Files<!-- lm: 0x2 1 -->
<UL>
<P>
Syntax
<P>
<!-- lm: 0x2 10 -->
<UL>
<PRE>#include &lt;stdio.h&gt;
int _flushall(void);
</PRE>
<!-- lm: 0x2 1 -->
</UL>Description
<P>
<!-- lm: 0x2 10 -->
<UL>
<P>
<LI>flushall causes the system to write to file the contents of all buffers
associated with open output streams (including stdin, stdout, and stderr).
It clears all buffers associated with open input streams of their current
contents. The next read operation, if there is one, reads new data from
the input files into the buffers. All streams remain open after the call.

<P>
For portability, use the ANSI/ISO function fflush instead of _flushall.
<!-- lm: 0x2 1 -->
</UL>Returns
<P>
<!-- lm: 0x2 10 -->
<UL>
<P>
<LI>flushall returns the number of open streams of input and output. If
an error occurs, _flushall returns EOF.<!-- lm: 0x2 1 -->
</UL> Example
Code
<P>
<!-- lm: 0x2 10 -->
<UL>
<P>
In this example, _flushall completes any pending input or output on all
streams by flushing all buffers.
<P>

<PRE>#include &lt;stdio.h&gt;

int main(void)
{
   int i,numflushed;
   char buffer1[5] =  { 1,2,3,4 };
   char buffer2[5] =  { 5,6,7,8 };
   char *file1 = "file1.dat";
   char *file2 = "file2.dat";
   FILE *stream1,*stream2;

   stream1 = fopen(file1, "a+");
   stream2 = fopen(file2, "a+");
   for (i = 0; i &lt;= sizeof(buffer1); i++) {
      fputc(buffer1[i], stream1);
      fputc(buffer2[i], stream2);
   }
   numflushed = _flushall();                   /* all streams flushed          */
   printf("Number of files flushed = %d\n", numflushed);
   fclose(stream1);
   fclose(stream2);
   return 0;

   /****************************************************************************
      The output should be:

      Number of files flushed = 5
   ****************************************************************************/
}
</PRE>
<!-- lm: 0x2 1 -->
</UL>Related Information
<P>
<!-- lm: 0x2 10 -->
<UL>
<P>
<!-- lm: 0x2 12 -->
<UL>
<P>
<LI><!-- lm: 0x2 15 --><A HREF="084_L2_closeCloseFileAssoci.html">close
</A><!-- lm: 0x2 12 -->
<BR>
<LI><!-- lm: 0x2 15 --><A HREF="109_L2_fcloseCloseStream.html">fclose</A><!-- lm: 0x2 12 -->
<BR>
<LI><!-- lm: 0x2 15 --><A HREF="115_L2_fflushWriteBuffertoF.html">fflush
</A><!-- lm: 0x2 10 -->
</UL>

<P><HR>

<A HREF="123_L2_floorIntegerArgument.html">[Back: floor - Integer <= Argument]</A> <BR>
<A HREF="125_L2_fmodCalculateFloatin.html">[Next: fmod - Calculate Floating-Point Remainder]</A> 
</BODY>
</HTML>
