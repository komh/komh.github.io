<HTML>
<HEAD>
<TITLE>lfind - lsearch - Find Key in Array</TITLE>
</HEAD>
<BODY>
<H1>lfind - lsearch - Find Key in Array</H1><!-- entering slot 184 -->lfind - lsearch - Find Key in Array<!-- lm: 0x2 1 -->
<UL>
<P>
Syntax
<P>
<!-- lm: 0x2 10 -->
<UL>
<PRE>#include &lt;search.h&gt;
char *lfind(char *<I>search_key</I>, char *<I>base</I>,
             unsigned int *<I>num</I>, unsigned int *<I>width</I>,
             int (*<I>compare</I>)(const void *<I>key</I>, const void *<I>element</I>));
char *lsearch(char *<I>search_key</I>, char *<I>base</I>,
               unsigned int *<I>num</I>, unsigned int *<I>width</I>,
               int (*<I>compare</I>)(const void *<I>key</I>, const void *<I>element</I>));
</PRE>
<!-- lm: 0x2 1 -->
</UL>Description
<P>
<!-- lm: 0x2 10 -->
<UL>
<P>
lfind and lsearch perform a linear search for the value<I> search_key</I> in
an array of<I> num</I> elements, each of<I> width</I> bytes in size.  Unlike
bsearch, lsearch and lfind do not require that you sort the array first.
 The argument<I> base</I> points to the base of the array to be searched.

<P>
If lsearch does not find the<I> search_key</I>, it adds the<I> search_key
</I>to the end of the array and increments<I> num</I> by one. If lfind does
not find the<I> search_key</I>, it does not add the<I> search_key</I> to
the array.
<P>
The<I> compare</I> argument is a pointer to a function you must supply that
takes a pointer to the<I> key</I> argument and to an array<I> element</I>,
in that order. Both lfind and lsearch call this function one or more times
during the search. The function must compare the<I> key</I> and the<I> element
</I>and return one of the following values:<B><!-- lm: 0x2 10 -->
<P>
Value<!-- lm: 0x2 25 -->
<UL> Meaning</B><!-- lm: 0x2 10 -->
</UL>Nonzero<!-- lm: 0x12 25 -->
<UL><I> key</I> and<I> element</I> are
different.<!-- lm: 0x2 10 -->
</UL>0<!-- lm: 0x12 25 -->
<UL><I> key</I> and<I> element</I> are identical.
<!-- lm: 0x2 10 -->
</UL>
<P>
<B>Note: </B> In earlier releases of C Set ++, lfind and lsearch began with
an underscore (_lfind and _lsearch). Because they are defined by the X/Open
standard, the underscore has been removed. For compatibility,<I> The Developer's
Toolkit</I> will map _lfind and _lsearch to lfind and lsearch for you.<!-- lm: 0x2 10 -->
<P>
<!-- lm: 0x2 1 -->
</UL>Returns
<P>
<!-- lm: 0x2 10 -->
<UL>
<P>
If<I> search_key</I> is found, both lsearch and lfind return a pointer to
that element of the array to which<I> base</I> points. If<I> search_key
</I>is not found, lsearch returns a pointer to a newly added item at the
end of the array, while lfind returns NULL.<!-- lm: 0x2 1 -->
</UL> Example
Code
<P>
<!-- lm: 0x2 10 -->
<UL>This example uses lfind to search for the keyword
PATH in the command-line arguments.
<PRE>#include &lt;search.h&gt;#include &lt;string.h&gt;
#include &lt;stdio.h&gt;

#define  CNT           2

int compare(const void *arg1,const void *arg2)
{
   return (strncmp(*(char **)arg1, *(char **)arg2, strlen(*(char **)arg1)));
}

int main(void)
{
   char **result;
   char *key = "PATH";
   unsigned int num = CNT;
   char *string[CNT] =  {
      "PATH = d:\\david\\matthew\\heather\\ed\\simon","LIB = PATH\\abc" };

   /* The following statement finds the argument that starts with "PATH"      */

   if ((result = (char **)lfind((char *)&amp;key, (char *)string, &amp;num,
                  sizeof(char *), compare)) != NULL)
      printf("%s found\n", *result);
   else
      printf("PATH not found \n");
   return 0;

   /****************************************************************************
      The output should be:

      PATH = d:\david\matthew\heather\ed\simon found
   ****************************************************************************/
}
</PRE>
<!-- lm: 0x2 1 -->
</UL>Related Information
<P>
<!-- lm: 0x2 10 -->
<UL><!-- lm: 0x2 12 -->
<UL>
<P>
<LI><!-- lm: 0x2 15 --><A HREF="071_L2_bsearchSearchArrays.html">bsearch
</A><!-- lm: 0x2 12 -->
<BR>
<LI><!-- lm: 0x2 15 --><A HREF="215_L2_qsortSortArray.html">qsort</A><!-- lm: 0x2 10 -->
</UL>

<P><HR>

<A HREF="175_L2_ldivPerformLongDivis.html">[Back: ldiv - Perform Long Division]</A> <BR>
<A HREF="177_L2_localeconvRetrieveIn.html">[Next: localeconv - Retrieve Information from the Environment]</A> 
</BODY>
</HTML>
