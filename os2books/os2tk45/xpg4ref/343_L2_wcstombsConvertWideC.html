<HTML>
<HEAD>
<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="TEXT/HTML; CHARSET=UTF-8">
<TITLE>wcstombs - Convert Wide-Character String to Multibyte String</TITLE>
</HEAD>
<BODY>
<H1>wcstombs - Convert Wide-Character String to Multibyte String</H1><!-- entering slot 371 -->wcstombs - Convert Wide-Character String to Multibyte
String<!-- lm: 0x2 1 -->
<UL>
<P>
Syntax
<P>
<!-- lm: 0x2 10 -->
<UL>
<PRE>#include &lt;stdlib.h&gt;
size_t wcstombs(char *<I>dest</I>, const wchar_t <I>*string</I>, size_t <I>n</I>);
</PRE>
<!-- lm: 0x2 1 -->
</UL>Description
<P>
<!-- lm: 0x2 10 -->
<UL>
<P>
wcstombs converts the wide-character string pointed to by<I> string</I> into
the multibyte array pointed to by<I> dest</I>. The conversion stops after
<I>n</I> bytes in<I> dest</I> are filled or after a wide null character
is encountered.
<P>
Only complete multibyte characters are stored in<I> dest</I>. If the lack
of space in<I> dest</I> would cause a partial multibyte character to be
stored, wcstombs stores fewer than<I> n</I> bytes and discards the incomplete
character.
<P>
The behavior of wcstombs is affected by the LC_CTYPE category of the current
locale.<!-- lm: 0x2 1 -->
</UL> Returns
<P>
<!-- lm: 0x2 10 -->
<UL>
<P>
If successful, wcstombs returns the number of bytes converted and stored
in<I> dest</I>, not counting the terminating null character. The string
pointed to by<I> dest</I> ends with a null character unless wcstombs returns
the value<I> n</I>.
<P>
If it encounters an invalid wide character, wcstombs returns (size_t)-1.

<P>
If the area pointed to by<I> dest</I> is too small to contain all the wide
characters represented as multibyte characters, wcstombs returns the number
of bytes containing complete multibyte characters.
<P>
If<I> dest</I> is a null pointer, the value of<I> len</I> is ignored and
wcstombs returns the number of elements required for the converted wide
characters.<!-- lm: 0x2 1 -->
</UL> Example Code
<P>
<!-- lm: 0x2 10 -->
<UL>
<P>
In this example, wcstombs converts a wide-character string to a multibyte
character string twice. The first call converts the entire string, while
the second call only converts three characters. The results are printed
each time.
<PRE>#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

#define  SIZE          20

int main(void)
{
   char dest[SIZE];
   wchar_t *dptr = L"string";
   size_t count = SIZE;
   size_t length;

   length = wcstombs(dest, dptr, count);
   printf("%d characters were converted.\n", length);
   printf("The converted string is \"%s\"\n\n", dest);

   /* Reset the destination buffer                                            */

   memset(dest, '\0', sizeof(dest));

   /* Now convert only 3 characters                                           */

   length = wcstombs(dest, dptr, 3);
   printf("%d characters were converted.\n", length);
   printf("The converted string is \"%s\"\n", dest);
   return 0;

   /****************************************************************************
      The output should be:

      6 characters were converted.
      The converted string is "string"

      3 characters were converted.
      The converted string is "str"
   ****************************************************************************/
}
</PRE>
<!-- lm: 0x2 1 -->
</UL>Related Information
<P>
<!-- lm: 0x2 10 -->
<UL><!-- lm: 0x2 12 -->
<UL>
<P>
<LI><!-- lm: 0x2 15 --><A HREF="189_L2_mbstowcsConvertMulti.html">mbstowcs
</A><!-- lm: 0x2 12 -->
<BR>
<LI><!-- lm: 0x2 15 --><A HREF="332_L2_wcslenCalculateLengt.html">wcslen
</A><!-- lm: 0x2 12 -->
<BR>
<LI><!-- lm: 0x2 15 --><A HREF="349_L2_wctombConvertWideCha.html">wctomb
</A><!-- lm: 0x2 10 -->
</UL>

<P><HR>

<A HREF="342_L2_wcstolConvertWideCha.html">[Back: wcstol - Convert Wide-Character to Long Integer]</A> <BR>
<A HREF="344_L2_wcstoulConvertWideCh.html">[Next: wcstoul - Convert Wide-Character String to Unsigned Long]</A> 
</BODY>
</HTML>
