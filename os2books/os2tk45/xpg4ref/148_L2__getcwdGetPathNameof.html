<HTML>
<HEAD>
<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="TEXT/HTML; CHARSET=UTF-8">
<TITLE>_getcwd - Get Path Name of Current Directory</TITLE>
</HEAD>
<BODY>
<H1>_getcwd - Get Path Name of Current Directory</H1><!-- entering slot 154 -->_getcwd - Get Path Name of Current Directory<!-- lm: 0x2 1 -->
<UL>
<P>
Syntax
<P>
<!-- lm: 0x2 10 -->
<UL>
<PRE>#include &lt;direct.h&gt;
char *_getcwd(char *<I>pathbuf</I>, int <I>n</I>);
</PRE>
<!-- lm: 0x2 1 -->
</UL>Description
<P>
<!-- lm: 0x2 10 -->
<UL>
<P>
<LI>getcwd gets the full path name of the current working directory and
stores it in the buffer pointed to by<I> pathbuf</I>.  The integer argument
<I>n</I> specifies the maximum length for the path name.  An error occurs
if the length of the path name, including the terminating null character,
exceeds<I> n</I> characters.
<P>
If the<I> pathbuf</I> argument is NULL, _getcwd uses malloc to reserve a
buffer of at least<I> n</I> bytes to store the path name.  If the current
working directory string is more than<I> n</I> bytes, a large enough buffer
will be allocated to contain the string.  You can later free this buffer
using the _getcwd return value as the argument to free.<!-- lm: 0x2 1 -->
</UL> Returns

<P>
<!-- lm: 0x2 10 -->
<UL>
<P>
<LI>getcwd returns<I> pathbuf</I>. If an error occurs, _getcwd returns NULL
and sets errno to one of the following values:  compact break=fit.<B><!-- lm: 0x2 10 -->
<P>
Value<!-- lm: 0x2 22 -->
<UL> Meaning</B><!-- lm: 0x2 10 -->
</UL> ENOMEM
<!-- lm: 0x2 22 -->
<UL>Not enough storage space available to reserve<I> n
</I>bytes (when<I> pathbuf</I> is NULL).<!-- lm: 0x2 10 -->
</UL> ERANGE
<!-- lm: 0x2 22 -->
<UL>The path name is longer than<I> n</I> characters.
<!-- lm: 0x2 10 -->
</UL>EOS2ERR<!-- lm: 0x2 22 -->
<UL> An OS/2 call failed.
Use _doserrno to obtain more information about the return code.<!-- lm: 0x2 10 -->
</UL><!-- lm: 0x2 1 -->
</UL>Example Code
<P>
<!-- lm: 0x2 10 -->
<UL>
<P>
This example stores the name of the current working directory (up to _MAX_PATH
characters) in a buffer.  The value of _MAX_PATH is defined in &lt;stdlib.h&gt;.

<PRE>#include &lt;direct.h&gt;#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

int main(void)
{
   char buffer[_MAX_PATH];

   if (NULL == getcwd(buffer, _MAX_PATH))
      perror("getcwd error");
   printf("The current directory is %s.\n", buffer);
   return 0;

   /****************************************************************************
      The output should be similar to:

      The current directory is E:\C_OS2\MIG_XMPS
   ****************************************************************************/
}
</PRE>
<!-- lm: 0x2 1 -->
</UL>Related Information
<P>
<!-- lm: 0x2 10 -->
<UL><!-- lm: 0x2 12 -->
<UL>
<P>
<LI><!-- lm: 0x2 15 --><A HREF="078_L2_chdirChangeCurrentWo.html">chdir
</A><!-- lm: 0x2 12 -->
<BR>
<LI><!-- lm: 0x2 15 --><A HREF="142_L2__fullpathGetFullPath.html"><LI>fullpath
</A><!-- lm: 0x2 12 -->
<BR>
<LI><!-- lm: 0x2 15 --><A HREF="149_L2__getdcwdGetFullPathN.html"><LI>getdcwd
</A><!-- lm: 0x2 12 -->
<BR>
<LI><!-- lm: 0x2 15 --><A HREF="150_L2__getdriveGetCurrentW.html"><LI>getdrive
</A><!-- lm: 0x2 12 -->
<BR>
<LI><!-- lm: 0x2 15 --><A HREF="185_L2_mallocReserveStorage.html">malloc
</A><!-- lm: 0x2 10 -->
</UL>

<P><HR>

<A HREF="147_L2__getch_getcheReadCha.html">[Back: _getch - _getche - Read Character from Keyboard]</A> <BR>
<A HREF="149_L2__getdcwdGetFullPathN.html">[Next: _getdcwd - Get Full Path Name of Current Directory]</A> 
</BODY>
</HTML>
