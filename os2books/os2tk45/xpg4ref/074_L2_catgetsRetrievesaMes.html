<HTML>
<HEAD>
<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="TEXT/HTML; CHARSET=UTF-8">
<TITLE>catgets - Retrieves a Message from a Catalog</TITLE>
<STYLE>
PRE {
  FONT-FAMILY: Consolas, "Lucida Console", "Courier New", Courier, MONOSPACE;
}
</STYLE>
</HEAD>
<BODY>
<H1>catgets - Retrieves a Message from a Catalog</H1><!-- entering slot 74 -->catgets - Retrieves a Message from a Catalog<!-- lm: 0x2 1 -->
<UL>
<P>
Syntax
<P>
<!-- lm: 0x2 10 -->
<UL>
<PRE>#include &lt;nl_types.h&gt;

char *catgets(nl_catd catd, int set_id, int msg_id, const char *s);
</PRE>
<!-- lm: 0x2 1 -->
</UL>Description
<P>
<!-- lm: 0x2 10 -->
<UL>
<P>
The catgets subroutine retrieves a message from a catalog and constructs
a message based on the set_id + msg_id + message. If the catgets subroutine
finds the specified message, it loads it into an internal character string
 buffer,  ends the  message  string with a null character, and returns a
pointer to the buffer.
<P>
The returned pointer is used to reference the buffer and display the message.
However, the buffer cannot be referenced after the catalog is closed.
<P>
The parameters are:<!-- lm: 0x2 10 -->
<P>
<I>catd</I><!-- lm: 0x12 20 -->
<UL> Specifies the open catalog to use for
message retrieval.<!-- lm: 0x2 10 -->
</UL><I> set_id</I><!-- lm: 0x12 20 -->
<UL> Specifies
the set ID of the message.<!-- lm: 0x2 10 -->
</UL><I> msg_id</I><!-- lm: 0x12 20 -->
<UL> Specifies
the message ID of the message. The set_id and msg_id parameters specify
a particular message in the catalog to retrieve.<!-- lm: 0x2 10 -->
</UL><I> s
</I><!-- lm: 0x12 20 -->
<UL>Specifies the default character-string buffer
to use if the message is not retrieved from the catalog.<!-- lm: 0x2 10 -->
</UL><!-- lm: 0x2 1 -->
</UL>Returns
<P>
<!-- lm: 0x2 10 -->
<UL>
<P>
If the catgets subroutine is unsuccessful for any reason, it returns the
user-supplied  default  message string specified by the<B> s</B> parameter.
<!-- lm: 0x2 1 -->
</UL>Example Code
<P>
<!-- lm: 0x2 10 -->
<UL>
<P>
This example opens a message file with the name contained in tcat and prints
out the message associated with set number in setno and the message number
in msgno.
<PRE>#include &lt;stdio.h&gt;#include &lt;nl_types.h&gt;

char *catg(char *tcat, int setno, int msgno, char *def)
{
    nl_catd catd;                       /* Catalog descriptor. */

    if ((catd = catopen(tcat, 0)) == CATD_ERR)
    {
       printf("Unable to load specified catalog. \n");
       exit (1);
    }

    printf("ERROR MESSAGE : %s\n",
           catgets(catd, setno, msgno, def));

    if (catclose(catd) == -1)
       perror("Error when trying to close catalog file");

}
</PRE>
<!-- lm: 0x2 1 -->
</UL>Related Information
<P>
<!-- lm: 0x2 10 -->
<UL><!-- lm: 0x2 12 -->
<UL>
<P>
<LI><!-- lm: 0x2 15 --><A HREF="075_L2_catopenOpensaSpecifi.html">catopen
</A><!-- lm: 0x2 12 -->
<BR>
<LI><!-- lm: 0x2 15 --><A HREF="073_L2_catcloseClosesaSpeci.html">catclose
</A><!-- lm: 0x2 10 -->
</UL>

<P><HR>

<A HREF="073_L2_catcloseClosesaSpeci.html">[Back: catclose - Closes a Specified Message Catalog]</A> <BR>
<A HREF="075_L2_catopenOpensaSpecifi.html">[Next: catopen - Opens a Specified Message Catalog]</A> 
</BODY>
</HTML>
