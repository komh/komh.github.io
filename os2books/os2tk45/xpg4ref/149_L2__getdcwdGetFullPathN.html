<HTML>
<HEAD>
<TITLE>_getdcwd - Get Full Path Name of Current Directory</TITLE>
</HEAD>
<BODY>
<H1>_getdcwd - Get Full Path Name of Current Directory</H1><!-- entering slot 155 -->_getdcwd - Get Full Path Name of Current Directory
<!-- lm: 0x2 1 -->
<UL>
<P>
Syntax
<P>
<!-- lm: 0x2 10 -->
<UL>
<PRE>#include &lt;direct.h&gt;
char *_getdcwd(int <I>drive</I>, char *<I>pathbuf</I>, int <I>n</I>);
</PRE>
<!-- lm: 0x2 1 -->
</UL>Description
<P>
<!-- lm: 0x2 10 -->
<UL>
<P>
<LI>getdcwd gets the full path name for the current directory of the specified
<I>drive</I>, and stores it in the location pointed to by<I> pathbuf</I>.
The<I> drive</I> argument is an integer value representing the drive (A:
is 1, B: is 2, and so on).
<P>
The integer argument<I> n</I> specifies the maximum length for the path
name. An error occurs if the length of the path name, including the terminating
null character, exceeds<I> n</I> characters.
<P>
If the<I> pathbuf</I> argument is NULL, _getdcwd uses malloc to reserve
a buffer of at least<I> n</I> bytes to store the path name.  If the current
working directory string is more than<I> n</I> bytes, a large enough buffer
will be allocated to contain the string. You can later free this buffer
using the _getdcwd return value as the argument to free.
<P>
Alternatives to this function are the DosQueryCurrentDir and DosQueryCurrentDisk
functions.<!-- lm: 0x2 1 -->
</UL> Returns
<P>
<!-- lm: 0x2 10 -->
<UL>
<P>
<LI>getdcwd returns<I> pathbuf</I>. If an error occurs, _getdcwd returns
NULL and sets errno to one of the following values:  compact break=fit.
<B><!-- lm: 0x2 10 -->
<P>
Value<!-- lm: 0x2 25 -->
<UL> Meaning</B><!-- lm: 0x2 10 -->
</UL> ENOMEM
<!-- lm: 0x2 25 -->
<UL>Not enough storage space available to reserve<I> n
</I>bytes (when<I> pathbuf</I> is NULL).<!-- lm: 0x2 10 -->
</UL> ERANGE
<!-- lm: 0x2 25 -->
<UL>The path name is longer than<I> n</I> characters.
<!-- lm: 0x2 10 -->
</UL>EOS2ERR<!-- lm: 0x2 25 -->
<UL> An OS/2 call failed.
Use _doserrno to obtain more information about the return code.<!-- lm: 0x2 10 -->
</UL><!-- lm: 0x2 1 -->
</UL>Example Code
<P>
<!-- lm: 0x2 10 -->
<UL>
<P>
This example uses _getdcwd to obtain the current working directory of drive
C.
<PRE>#include &lt;stdio.h&gt;#include &lt;direct.h&gt;
#include &lt;errno.h&gt;

int main(void)
{
   char *retBuffer;

   retBuffer = _getdcwd(3, NULL, 0);
   if (NULL == retBuffer)
      printf("An error has occurred, errno is set to %d.\n", errno);
   else
      printf("%s is the current working directory in drive C.\n", retBuffer);
   return 0;

   /****************************************************************************
      The output should be similar to:

      C:\ is the current working directory in drive C.
   ****************************************************************************/
}
</PRE>
<!-- lm: 0x2 1 -->
</UL>Related Information
<P>
<!-- lm: 0x2 10 -->
<UL><!-- lm: 0x2 12 -->
<UL>
<P>
<LI><!-- lm: 0x2 15 --><A HREF="078_L2_chdirChangeCurrentWo.html">chdir
</A><!-- lm: 0x2 12 -->
<BR>
<LI><!-- lm: 0x2 15 --><A HREF="079_L2__chdriveChangeCurren.html"><LI>chdrive
</A><!-- lm: 0x2 12 -->
<BR>
<LI><!-- lm: 0x2 15 --><A HREF="142_L2__fullpathGetFullPath.html"><LI>fullpath
</A><!-- lm: 0x2 12 -->
<BR>
<LI><!-- lm: 0x2 15 --><A HREF="148_L2__getcwdGetPathNameof.html"><LI>getcwd
</A><!-- lm: 0x2 12 -->
<BR>
<LI><!-- lm: 0x2 15 --><A HREF="150_L2__getdriveGetCurrentW.html"><LI>getdrive
</A><!-- lm: 0x2 12 -->
<BR>
<LI><!-- lm: 0x2 15 --><A HREF="185_L2_mallocReserveStorage.html">malloc
</A><!-- lm: 0x2 10 -->
</UL>

<P><HR>

<A HREF="148_L2__getcwdGetPathNameof.html">[Back: _getcwd - Get Path Name of Current Directory]</A> <BR>
<A HREF="150_L2__getdriveGetCurrentW.html">[Next: _getdrive - Get Current Working Drive]</A> 
</BODY>
</HTML>
