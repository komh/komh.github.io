<HTML>
<HEAD>
<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="TEXT/HTML; CHARSET=UTF-8">
<TITLE>TIMER0 Sample Program</TITLE>
</HEAD>
<BODY>
<H1>TIMER0 Sample Program</H1><!-- entering slot 119 -->
<P>
TIMER0 (located in \TOOLKIT\SAMPLES\OS2\TIMER0) creates four threads. Each
thread does the following:<!-- lm: 0x2 2 -->
<UL>
<P>
 <LI><LI><!-- lm: 0x2 6 -->Sets its priority to time-critical.<!-- lm: 0x2 2 -->
<P>
 <LI><LI><!-- lm: 0x2 6 -->Sleeps for<I> n</I> milliseconds, where<I> n
</I>is equal to 500 times the number of the thread (for example, thread
#1 sleeps 500ms, thread #2 sleeps 1000ms, and so on).<!-- lm: 0x2 2 -->
<P>
 <LI><LI><!-- lm: 0x2 6 -->Wakes up and increments a counter.<!-- lm: 0x2 1 -->
</UL>
<P>
To start the TIMER0 sample from an OS/2 command line, type:
<PRE>TIMER0</PRE>

<P>
While the four threads are running, the main thread (the one that created
the other four) is in an infinite loop.
<P>
<B>Note: </B> To break out of the loop, press any key.<!-- lm: 0x2 1 -->
<P>
This loop displays the values of each of the four counters incremented by
the four threads.  For example:
<PRE>TIMER0$ opened.  File Handle is 3
Counter: 00008703  1:00000017 2:00000008 3:00000005 4:00000004
</PRE>

<P>
The counter is the value of the millisecond counter in timer TIMER0 device
driver.  This value gets incremented every millisecond and is very accurate.
The other four values are the four counters and these values are incremented
by each thread.  The accuracy is dependent on the thread contention and
other things that are going on in the system.  Note that #2 is approximately
one-half of #1, #3 is approximately one-third of #1, and #4 is approximately
one-fourth of #1.

<P><HR>

<A HREF="115_L4_SORTSampleProgram.html">[Back: SORT Sample Program]</A> <BR>
<A HREF="117_L4_VMMSampleProgram.html">[Next: VMM Sample Program]</A> 
</BODY>
</HTML>
