<HTML>
<HEAD>
<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="TEXT/HTML; CHARSET=UTF-8">
<TITLE></TITLE>
<STYLE>
PRE {
  FONT-FAMILY: Consolas, "Lucida Console", "Courier New", Courier, MONOSPACE;
}
</STYLE>
</HEAD>
<BODY>
<H1></H1><!-- entering slot 3662 -->The<B> Thread Swappable Data (TSD)</B> control
block contains per-thread status and control information that resides in
swappable memory and therefore is not required for reference out of context
of the related thread. The resident memory counterpart to the<B> TSD</B> is
the <A HREF="3345_L0_.html">TCB</A> (Thread Control Block).
<P>
The vast majority of the<B> TSD</B> is used as the ring 0 stack when a thread
makes a privilege level transition to ring 0 via a <A HREF="3271_L0_.html">call
gate</A> descriptor. The base of the ring 0 stack will therefore include
the ring 3 call gate stack frame on entry to ring 0 (which is usually kernel
or device driver code).
<P>
In the debug kernel a dummy page prefixes the used part of the TSD in order
to catch ring 0 stack faults.
<P>
Other information contained in the TSD includes GTD instance data for the
corresponding thread's <A HREF="3284_L0_.html">context.</A> This comprises
descriptors for:<!-- lm: 0x2 6 -->
<UL>
<P>
28: The LDT descriptor.<!-- lm: 0x2 6 -->
<P>
30: Base selector for ring 0 process instance data, which includes the ring
0 stack, TCBs and PTDA.<!-- lm: 0x2 6 -->
<P>
38: Floating point emulator instance data<!-- lm: 0x2 6 -->
<P>
40: FS mapping to the TIB<!-- lm: 0x2 1 -->
</UL>
<P>
When an an inter-process thread context switches, descriptors 30 - 40 are
loaded into the <A HREF="3331_L0_.html">GDT</A> from the TSD. When an intra-process
thread context switches, descriptors 28 - 40 are loaded into the GDT from
the TSD.
<P>
Refer to the following for related information<!-- lm: 0x2 6 -->
<UL>
<P>
<A HREF="378_L3_PDisplayProcessStatu.html"><LI>P Kernel Debugger and Dump
Formatter command.</A><!-- lm: 0x2 6 -->
<P>
<A HREF="3178_L3_ThreadSwappableDataf.html"><B>TSD</B> control block format
</A><!-- lm: 0x2 1 -->
</UL>

<P><HR>

<A HREF="3345_L0_.html">[Back: ]</A> <BR>
<A HREF="3347_L0_.html">[Next: ]</A> 
</BODY>
</HTML>
