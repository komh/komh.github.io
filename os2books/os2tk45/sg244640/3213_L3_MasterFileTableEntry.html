<HTML>
<HEAD>
<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="TEXT/HTML; CHARSET=UTF-8">
<TITLE>Master File Table Entry for OS/2 Warp V4.0 and OS/2 Warp V3.0 ALLSTRICT kernel</TITLE>
<STYLE>
PRE {
  FONT-FAMILY: Consolas, "Lucida Console", "Courier New", Courier, MONOSPACE;
}
</STYLE>
</HEAD>
<BODY>
<H1>Master File Table Entry for OS/2 Warp V4.0 and OS/2 Warp V3.0 ALLSTRICT kernel</H1><!-- entering slot 3498 -->
<P>
For<B> MTE</B> formats for other versions of OS/2 see:<!-- lm: 0x2 6 -->
<UL>
<P>
<A HREF="3214_L4_MasterFileTableEntry.html"><B>MTE</B> for OS/2 Warp V4.0
and OS/2 Warp V3.0 RETAIL kernel</A><!-- lm: 0x2 1 -->
</UL> 
<P>
<!-- lm: 0x2 1 -->
<P>
<B>Pointers</B><!-- lm: 0x11 11 -->
<UL> SFT field<B> sf_MFT</B> points
to the associated MFT entry.
<P>
SAS field<B> SAS_file_MFT</B> points to the PTREE head for the MFT PTREE.
<!-- lm: 0x2 1 -->
</UL><B>Locations</B><!-- lm: 0x11 11 -->
<UL> Dynamically
allocated from the kernel resident heap. <!-- lm: 0x2 1 -->
</UL><B> VM
Owner</B><!-- lm: 0x11 11 -->
<UL><B> mft (0xff9e)</B>.<!-- lm: 0x2 1 -->
</UL> 
<P>
<B><A HREF="3252_L0_.html">Format</A></B>
<PRE>┌─────────────┬──────┬──────┬────┬────────────────────────────────────────┐│<I>Field Name</I>   │<I>Offset</I>│<I>Length</I>│<I>Type</I>│<I>Description</I>                             │
├─────────────┼──────┼──────┼────┼────────────────────────────────────────┤
│mft_ksem     │+0    │10    │S   │multi read/single write semaphore       │
├─────────────┼──────┼──────┼────┼────────────────────────────────────────┤
│mft_lptr     │+10   │2     │W   │16 bit offset to first LOCK record      │
├─────────────┼──────┼──────┼────┼────────────────────────────────────────┤
│mft_sptr     │+12   │4     │D   │16 bit FAR pointer to first SFT in chain│
├─────────────┼──────┼──────┼────┼────────────────────────────────────────┤
│mft_pCMap    │+16   │4     │D   │32 bit FLAT pointer to cluster map      │
├─────────────┼──────┼──────┼────┼────────────────────────────────────────┤
│mft_CMapKSem │+1a   │10    │S   │semaphore for access to pCMap           │
├─────────────┼──────┼──────┼────┼────────────────────────────────────────┤
│mft_opflags  │+2a   │2     │W   │oplock flags                            │
├─────────────┼──────┼──────┼────┼────────────────────────────────────────┤
│mft_serl     │+2c   │2     │W   │serial number for FCB checking          │
├─────────────┼──────┼──────┼────┼────────────────────────────────────────┤
│mft_flags    │+2e   │2     │W   │general purpose MFT flags               │
├─────────────┼──────┼──────┼────┼────────────────────────────────────────┤
│mft_signature│+30   │2     │W   │for sanity check                        │
├─────────────┼──────┼──────┼────┼────────────────────────────────────────┤
│mft_hvpb     │+32   │2     │W   │handle of vpb                           │
├─────────────┼──────┼──────┼────┼────────────────────────────────────────┤
│mft_name     │+34   │1     │B   │start of name string (zero terminated)  │
└─────────────┴──────┴──────┴────┴────────────────────────────────────────┘
</PRE>

<P>
<B>mft_flags</B> flag definitions
<PRE>┌───────────────┬────────┬────────────────────────────────────────┐
│Name           │Bit Mask│Description                             │
├───────────────┼────────┼────────────────────────────────────────┤
│mft_pagerheap  │0x0001  │MFT is allocated on pager heap          │
├───────────────┼────────┼────────────────────────────────────────┤
│MFT_DEFAULTHEAP│0x0     │MFT is allocated on kernel (heap default│
│               │        │MFT heap)                               │
└───────────────┴────────┴────────────────────────────────────────┘
</PRE>

<P>
<B>mft_opflags</B> flag definitions
<PRE>┌─────────────────┬────────┬───────────────────────────────┐
│Name             │Bit Mask│Description                    │
├─────────────────┼────────┼───────────────────────────────┤
│mft_opnolock     │0       │no oplock or opbatch on file   │
├─────────────────┼────────┼───────────────────────────────┤
│mft_oplock       │1       │oplock on file                 │
├─────────────────┼────────┼───────────────────────────────┤
│mft_opbatch      │2       │opbatch on file                │
├─────────────────┼────────┼───────────────────────────────┤
│mft_opbreak      │4       │oplock/batch cleanup in process│
├─────────────────┼────────┼───────────────────────────────┤
│mft_opbreakfailed│8       │oplock/batch cleanup failed    │
└─────────────────┴────────┴───────────────────────────────┘
</PRE>


<P><HR>

<A HREF="3212_L3_SystemFileTableEntry.html">[Back: System File Table Entry for OS/2 Warp V4.0 and OS/2 Warp V3.0]</A> <BR>
<A HREF="3214_L4_MasterFileTableEntry.html">[Next: Master File Table Entry for OS/2 Warp V4.0 and OS/2 Warp V3.0 RETAIL kernel]</A> 
</BODY>
</HTML>
