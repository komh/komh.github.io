<HTML>
<HEAD>
<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="TEXT/HTML; CHARSET=UTF-8">
<TITLE>Module Table Entry for OS/2 Warp V4.0 and OS/2 Warp V3.0</TITLE>
<STYLE>
PRE {
  FONT-FAMILY: Consolas, "Lucida Console", "Courier New", Courier, MONOSPACE;
}
</STYLE>
</HEAD>
<BODY>
<H1>Module Table Entry for OS/2 Warp V4.0 and OS/2 Warp V3.0</H1><!-- entering slot 3477 -->
<P>
For<B> MTE</B> formats for other versions of OS/2 see:<!-- lm: 0x2 6 -->
<UL>
<P>
<A HREF="3198_L4_ModuleTableEntryforO.html"><B>MTE</B> for OS/2 V2.11</A><!-- lm: 0x2 1 -->
</UL> 
<P>
<!-- lm: 0x2 1 -->
<P>
<B>Pointers</B><!-- lm: 0x11 11 -->
<UL><B> _mte_h</B> points to the head
of the chain of MTEs.
<P>
<B>_global_h</B> points to head of the chain of library module MTEs. <!-- lm: 0x2 1 -->
</UL><B> Locations
</B><!-- lm: 0x11 11 -->
<UL>Dynamically allocated from the kernel resident
heap except for the two MTEs that represent kernel interfaces.
<P>
<B>_DosMosMte</B> locates the MTE in OS2KRNL for DOSCALLS.DLL.
<P>
<B>_VDDModMte</B> locates the MTE in OS2KRNL for MVDM.DLL. <!-- lm: 0x2 1 -->
</UL><B> VM
Owner</B><!-- lm: 0x11 11 -->
<UL> Dynamically allocated MTEs have owner
id<B> ldrmte (0xffa6)</B><!-- lm: 0x2 1 -->
</UL> 
<P>
<B><A HREF="3252_L0_.html">Format</A></B>
<PRE>┌─────────────┬──────┬──────┬────┬────────────────────────────────────┐│<I>Field Name</I>   │<I>Offset</I>│<I>Length</I>│<I>Type</I>│<I>Description</I>                         │
├─────────────┼──────┼──────┼────┼────────────────────────────────────┤
│mte_flags2   │+0    │2     │W   │Module flags 2                      │
├─────────────┼──────┼──────┼────┼────────────────────────────────────┤
│mte_handle   │+2    │2     │W   │the handle for this mte             │
├─────────────┼──────┼──────┼────┼────────────────────────────────────┤
│mte_swapmte  │+4    │4     │D   │link to swappable mte               │
├─────────────┼──────┼──────┼────┼────────────────────────────────────┤
│mte_link     │+8    │4     │D   │link to next mte                    │
├─────────────┼──────┼──────┼────┼────────────────────────────────────┤
│mte_flags1   │+c    │4     │D   │Module flags 1                      │
├─────────────┼──────┼──────┼────┼────────────────────────────────────┤
│mte_impmodcnt│+10   │4     │D   │Num of entries in Imp Mod Name Tbl  │
├─────────────┼──────┼──────┼────┼────────────────────────────────────┤
│mte_sfn      │+14   │2     │W   │file system number for open file    │
├─────────────┼──────┼──────┼────┼────────────────────────────────────┤
│mte_usecnt   │+16   │2     │W   │.EXE only - use count               │
├─────────────┼──────┼──────┼────┼────────────────────────────────────┤
│mte_modname  │+18   │8     │B   │resident module name (zero extended)│
└─────────────┴──────┴──────┴────┴────────────────────────────────────┘
</PRE>

<P>
<B>mte_flags1</B> flag definitions:
<PRE>┌───────────────┬──────────┬────────────────────────────────────┐
│Name           │Bit Mask  │Description                         │
├───────────────┼──────────┼────────────────────────────────────┤
│NOAUTODS       │0x00000000│No Auto DS exists                   │
├───────────────┼──────────┼────────────────────────────────────┤
│SOLO           │0x00000001│Auto DS is shared                   │
├───────────────┼──────────┼────────────────────────────────────┤
│INSTANCEDS     │0x00000002│Auto DS is not shared               │
├───────────────┼──────────┼────────────────────────────────────┤
│INSTLIBINIT    │0x00000004│Per-instance Libinit                │
├───────────────┼──────────┼────────────────────────────────────┤
│GINISETUP      │0x00000008│Global Init has been setup          │
├───────────────┼──────────┼────────────────────────────────────┤
│NOINTERNFIXUPS │0x00000010│internal fixups in .EXE-.DLL applied│
├───────────────┼──────────┼────────────────────────────────────┤
│NOEXTERNFIXUPS │0x00000020│external fixups in .EXE-.DLL applied│
├───────────────┼──────────┼────────────────────────────────────┤
│CLASS_PROGRAM  │0x00000040│Program class                       │
├───────────────┼──────────┼────────────────────────────────────┤
│CLASS_GLOBAL   │0x00000080│Global class                        │
├───────────────┼──────────┼────────────────────────────────────┤
│CLASS_SPECIFIC │0x000000C0│Specific class, as against global   │
├───────────────┼──────────┼────────────────────────────────────┤
│CLASS_ALL      │0x00000000│nonspecific class - all modules     │
├───────────────┼──────────┼────────────────────────────────────┤
│CLASS_MASK     │0x000000C0│                                    │
├───────────────┼──────────┼────────────────────────────────────┤
│MTEPROCESSED   │0x00000100│MTE being loaded                    │
├───────────────┼──────────┼────────────────────────────────────┤
│USED           │0x00000200│MTE is referenced - see ldrgc.c     │
├───────────────┼──────────┼────────────────────────────────────┤
│DOSLIB         │0x00000400│set if DOSCALL1                     │
├───────────────┼──────────┼────────────────────────────────────┤
│DOSMOD         │0x00000800│set if DOSCALLS                     │
├───────────────┼──────────┼────────────────────────────────────┤
│MTE_MEDIAFIXED │0x00001000│File Media permits discarding       │
├───────────────┼──────────┼────────────────────────────────────┤
│LDRINVALID     │0x00002000│module not loadable                 │
├───────────────┼──────────┼────────────────────────────────────┤
│PROGRAMMOD     │0x00000000│program module                      │
├───────────────┼──────────┼────────────────────────────────────┤
│DEVDRVMOD      │0x00004000│device driver module                │
├───────────────┼──────────┼────────────────────────────────────┤
│LIBRARYMOD     │0x00008000│DLL module                          │
├───────────────┼──────────┼────────────────────────────────────┤
│VDDMOD         │0x00010000│VDD module                          │
├───────────────┼──────────┼────────────────────────────────────┤
│MVDMMOD        │0x00020000│Set if VDD Helper MTE (MVDM.DLL)    │
├───────────────┼──────────┼────────────────────────────────────┤
│INGRAPH        │0x00040000│In Module Graph - see ldrgc.c       │
├───────────────┼──────────┼────────────────────────────────────┤
│GINIDONE       │0x00080000│Global Init has finished            │
├───────────────┼──────────┼────────────────────────────────────┤
│MTEADDRALLOCED │0x00100000│Allocate specific or not            │
├───────────────┼──────────┼────────────────────────────────────┤
│FSDMOD         │0x00200000│FSD MTE                             │
├───────────────┼──────────┼────────────────────────────────────┤
│FSHMOD         │0x00400000│FS <!-- entering slot 3478 -->helper MTE                       │
├───────────────┼──────────┼────────────────────────────────────┤
│MTELONGNAMES   │0x00800000│Module supports long-names          │
├───────────────┼──────────┼────────────────────────────────────┤
│MTE_MEDIACONTIG│0x01000000│File Media contiguous memory req    │
├───────────────┼──────────┼────────────────────────────────────┤
│MTE_MEDIA16M   │0x02000000│File Media requires mem below 16M   │
├───────────────┼──────────┼────────────────────────────────────┤
│MTESWAPONLOAD  │0x04000000│make code pages swap on load        │
├───────────────┼──────────┼────────────────────────────────────┤
│MTEPORTHOLE    │0x08000000│porthole module                     │
├───────────────┼──────────┼────────────────────────────────────┤
│MTEMODPROT     │0x10000000│Module has shared memory protected  │
├───────────────┼──────────┼────────────────────────────────────┤
│MTENEWMOD      │0x20000000│Newly added module                  │
├───────────────┼──────────┼────────────────────────────────────┤
│MTEDLLTERM     │0x40000000│Gets instance termination           │
├───────────────┼──────────┼────────────────────────────────────┤
│MTESYMLOADED   │0x80000000│Set if debugger symbols loaded      │
└───────────────┴──────────┴────────────────────────────────────┘
</PRE>

<P>
<B>mte_flags2</B> flag definitions:
<PRE>┌───────────────┬────────┬────────────────────────────────────────┐
│Name           │Bit Mask│Description                             │
├───────────────┼────────┼────────────────────────────────────────┤
│MTEFORMATMASK  │0x0003  │Module format mask                      │
├───────────────┼────────┼────────────────────────────────────────┤
│MTEFORMATR1    │0x0000  │Module format reserved                  │
├───────────────┼────────┼────────────────────────────────────────┤
│MTEFORMATNE    │0x0001  │Module format NE                        │
├───────────────┼────────┼────────────────────────────────────────┤
│MTEFORMATLX    │0x0002  │Module format LX                        │
├───────────────┼────────┼────────────────────────────────────────┤
│MTEFORMATR2    │0x0003  │Module format reserved                  │
├───────────────┼────────┼────────────────────────────────────────┤
│MTESYSTEMDLL   │0x0004  │DLL exists in system list               │
├───────────────┼────────┼────────────────────────────────────────┤
│MTELOADORATTACH│0x0008  │Module under load or attach - for init  │
├───────────────┼────────┼────────────────────────────────────────┤
│MTECIRCLEREF   │0x0010  │Module circular reference detection     │
├───────────────┼────────┼────────────────────────────────────────┤
│MTEFREEFIXUPS  │0x0020  │Free system mte's fixup flag d#98488    │
├───────────────┼────────┼────────────────────────────────────────┤
│MTEPRELOADED   │0x0040  │MTE Preload completed                   │
├───────────────┼────────┼────────────────────────────────────────┤
│MTEGETMTEDONE  │0x0080  │GetMTE already resolved                 │
├───────────────┼────────┼────────────────────────────────────────┤
│MTEPACKSEGDONE │0x0100  │Segment packed memory allocated         │
├───────────────┼────────┼────────────────────────────────────────┤
│MTE20LIELIST   │0x0200  │Name present in version20 lie list      │
├───────────────┼────────┼────────────────────────────────────────┤
│MTESYSPROCESSED│0x0400  │System DLL already processed            │
├───────────────┼────────┼────────────────────────────────────────┤
│MTEDLLONEXTLST │0x1000  │DLL has term routine on exit list #74177│
│               │        │removed - 75809                         │
└───────────────┴────────┴────────────────────────────────────────┘
</PRE>


<P><HR>

<A HREF="3196_L2_LoaderControlBlockRe.html">[Back: Loader Control Block Reference]</A> <BR>
<A HREF="3198_L4_ModuleTableEntryforO.html">[Next: Module Table Entry for OS/2 V2.11]</A> 
</BODY>
</HTML>
