<HTML>
<HEAD>
<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="TEXT/HTML; CHARSET=UTF-8">
<TITLE>PM Worked Examples Under OS/2 2.x</TITLE>
<STYLE>
PRE {
  FONT-FAMILY: Consolas, "Lucida Console", "Courier New", Courier, MONOSPACE;
}
</STYLE>
</HEAD>
<BODY>
<H1>PM Worked Examples Under OS/2 2.x</H1><!-- entering slot 304 -->
<P>
Dealing with PM application problems under OS/2 2.x is similar to WARP.
The principle difference being that the messaging and windowing function
in PM is provided by the 16-bit DLL, PMWIN.DLL.
<P>
Most of the message structures are analogous to those of PMMERGE.DLL, their
layouts are similar.
<P>
Under PMWIN.DLL most pointers are either offsets from a predefined segments
or selectors. Thus where there are double-word pointers in PMMERGE.DLL structures,
there are word length fields in PMWIN.DLL.
<P>
The following three symbol files are required for debugging PM applications
problems under OS/2 2.x:<!-- lm: 0x2 3 -->
<UL>
<P>
<LI><!-- lm: 0x2 6 -->PMWIN.SYM<!-- lm: 0x2 3 -->
<P>
<LI><!-- lm: 0x2 6 -->PMGRE.SYM<!-- lm: 0x2 3 -->
<P>
<LI><!-- lm: 0x2 6 -->PMSHAPI.SYM<!-- lm: 0x2 1 -->
</UL> 
<P>
A selection of useful symbols in the OS/2 2.x PM environment, with their
equivalent OS/2 3.0 is listed below:<!-- lm: 0x2 1 -->
<P>
OS/2 3.0<!-- lm: 0x2 21 -->
<UL> OS/2 2.x<!-- lm: 0x2 1 -->
</UL> pmqlist
<!-- lm: 0x2 21 -->
<UL><B>smqlist</B><!-- lm: 0x2 1 -->
</UL><B> pmqsyslock
</B><!-- lm: 0x2 21 -->
<UL><B>smqsyslock</B><!-- lm: 0x2 1 -->
</UL><B> pmqfocus
</B><!-- lm: 0x2 21 -->
<UL><B>smqfocus</B><!-- lm: 0x2 1 -->
</UL><B> pmqshell
</B><!-- lm: 0x2 21 -->
<UL><B>smqshell</B><!-- lm: 0x2 1 -->
</UL><B> pmqshell2
</B><!-- lm: 0x2 21 -->
<UL><B>smqshell2</B><!-- lm: 0x2 1 -->
</UL><B> pwndfocus
</B><!-- lm: 0x2 21 -->
<UL><B>pwndfocus</B><!-- lm: 0x2 1 -->
</UL><B> fBadAppDialog
</B><!-- lm: 0x2 21 -->
<UL><B>fBadAppDialog</B><!-- lm: 0x2 1 -->
</UL><B> qhpsBadApp
</B><!-- lm: 0x2 21 -->
<UL><B>qhpsBadApp</B><!-- lm: 0x2 1 -->
</UL>
<P>
Another significant difference between the two environments is in the calling
conventions:<!-- lm: 0x2 3 -->
<UL>
<P>
<LI><!-- lm: 0x2 6 -->PMMERGE APIs use the 32-bit C calling convention<!-- lm: 0x2 3 -->
<P>
<LI><!-- lm: 0x2 6 -->PMWIN APIs use the 16-bit Pascal calling convention
<!-- lm: 0x2 1 -->
</UL>
<P>
In effect this means that parameters on stacks, and in some control blocks,
are stored in reverse order.
<P>
There are four symbols that do not have equivalents in PMMERGE, these are:
<!-- lm: 0x2 1 -->
<P>
winsel<!-- lm: 0x2 21 -->
<UL> The selector for the<B> AAB</B> regs segment
for a process.<!-- lm: 0x2 1 -->
</UL> selsms<!-- lm: 0x2 21 -->
<UL> The
selector for the<B> SMS</B> segment.<!-- lm: 0x2 1 -->
</UL> vphheapwnd
<!-- lm: 0x2 21 -->
<UL>The table of<B> WND</B> heap pointers.<!-- lm: 0x2 1 -->
</UL> fsrsuser
<!-- lm: 0x2 21 -->
<UL>The PM FastSafe RAMSEM, which is equivalent to the
User_Sem PM Semaphore of PMMERGE.<!-- lm: 0x2 1 -->
</UL>
<P>
We now run through a brief sequence of examples that illustrate:<!-- lm: 0x2 6 -->
<UL>
<P>
<A HREF="207_L5_FindinganMQandAABReg.html">Finding an MQ and AAB registers
</A><!-- lm: 0x2 6 -->
<P>
<A HREF="208_L5_FindinganSMSFromanMQ.html">Finding an SMS from an MQ</A><!-- lm: 0x2 6 -->
<P>
<A HREF="209_L5_FindingaWNDFromanHWN.html">Finding the WND from an HWND
</A><!-- lm: 0x2 6 -->
<P>
<A HREF="210_L5_FindingaBadAppProces.html">Finding a BadApp process an MQ
</A><!-- lm: 0x2 6 -->
<P>
<A HREF="211_L5_FindingtheSystemQueu.html">Finding the System Queue</A><!-- lm: 0x2 1 -->
</UL>

<P><HR>

<A HREF="205_L5_FindingApplicationan.html">[Back: Finding Application and System Queue Elements]</A> <BR>
<A HREF="207_L5_FindinganMQandAABReg.html">[Next: Finding an MQ and AAB Registers]</A> 
</BODY>
</HTML>
