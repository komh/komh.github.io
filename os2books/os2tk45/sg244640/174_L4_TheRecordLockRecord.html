<HTML>
<HEAD>
<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="TEXT/HTML; CHARSET=UTF-8">
<TITLE>The Record Lock Record</TITLE>
</HEAD>
<BODY>
<H1>The Record Lock Record</H1><!-- entering slot 236 -->
<P>
In this example we investigate the <A HREF="3296_L0_.html">RLR</A> and how
it records a locked range within a file. We will also see how the Block-Id
of a thread waiting for access to a locked file range directly leads to
discovery of the RLR. 
<P>
We introduce the<B> RLR</B> by showing its relationship to other file-system
control blocks in the following diagram. This depicts the following situation:
<!-- lm: 0x2 3 -->
<UL>
<P>
<LI><!-- lm: 0x2 6 -->Three processes have opened the same file, in the
order process 1, 2, then 3.<!-- lm: 0x2 3 -->
<P>
<LI><!-- lm: 0x2 6 -->The<B> MFT</B> heads the chain of<B> SFTs</B>, each
representing an open instance of the same file. The<B> MFT</B> points to
the most recent<B> SFT</B> open instance.<!-- lm: 0x2 3 -->
<P>
<LI><!-- lm: 0x2 6 -->Process 1 and process 2 have each locked a range within
the same file.<B> RLRs</B> 1 and 2 correspond to process 1 and 2.<!-- lm: 0x2 3 -->
<P>
<LI><!-- lm: 0x2 6 -->The<B> MFT</B> heads the chain of<B> RLRs</B> starting
with the most recent. The pointer from the<B> MFT</B> (<B>lptr</B>) is the
offset within the<B> RLR</B> segment.<!-- lm: 0x2 1 -->
</UL><!-- Unable to decode bitmap format --><IMG SRC="174_L4_TheRecordLockRecord_15.gif" WIDTH=717 HEIGHT=1011>

<P><HR>

<A HREF="173_L5_FindingHandlesFromFi.html">[Back: Finding Handles From File Names]</A> <BR>
<A HREF="175_L5_AHangProblemInvolvin.html">[Next: A Hang Problem Involving Locked Records]</A> 
</BODY>
</HTML>
