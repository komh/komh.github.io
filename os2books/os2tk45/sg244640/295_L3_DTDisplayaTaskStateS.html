<HTML>
<HEAD>
<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="TEXT/HTML; CHARSET=UTF-8">
<TITLE>DT - Display a Task State Segment</TITLE>
<STYLE>
PRE {
  FONT-FAMILY: Consolas, "Lucida Console", "Courier New", Courier, MONOSPACE;
}
</STYLE>
</HEAD>
<BODY>
<H1>DT - Display a Task State Segment</H1><!-- entering slot 425 --><!-- Unable to decode bitmap format --><IMG SRC="295_L3_DTDisplayaTaskStateS_77.gif" WIDTH=32 HEIGHT=32><!-- Unable to decode bitmap format --><IMG SRC="295_L3_DTDisplayaTaskStateS_78.gif" WIDTH=32 HEIGHT=32>
<P>
Format a <A HREF="3275_L0_.html">task state segment</A>.
<P>
<U><I>Syntax:</I></U>
<PRE>────── DT ───────┬─────────┬──────────────────────────────────
                   └─ addr ──┘



</PRE>

<P>
<U><I>Parameters:</I></U><!-- lm: 0x2 1 -->
<UL>
<P>
<B><I>addr</B></I><!-- lm: 0x11 11 -->
<UL> The address of the task state
segment to be formatted. If not specified then the current TSS pointed to
by the<B> TR</B> (task register) is used.<!-- lm: 0x2 1 -->
</UL> 
<P>
<U><I>Results &amp; Notes:</I></U>
<P>
The TSS is formatted as follows:
<PRE>────────────────────────────────────────────────────────────────────────##dt 10:0
eax=00000000 ebx=00000000 ecx=00000000 edx=00000000 esi=00000000 edi=00000000
eip=00000000 esp=00000000 ebp=00000000 iopl=0 -- -- -- nv up di pl nz na po nc
cs=0000 ss=0000 ds=0000 es=0000 fs=0000 gs=0000  cr3=001d1000
ss0=0030  esp0=000066fc  ss1=0000  esp1=00000000  ss2=0866  esp2=00001000
ldtr=0028  link=0000  tflags=0000  i/o map=dfff
ports trapped: 0-ffff
────────────────────────────────────────────────────────────────────────
</PRE>

<P>
Each of the fields displayed has the following meaning:
<P>
<B>Note: </B>
<P>
Some of the<B> TSS</B> fields are set at task creation and other when a
task switch occurs.<!-- lm: 0x2 1 -->
<P>
<!-- lm: 0x2 1 -->
<P>
<B>eax=</B><!-- lm: 0x11 11 -->
<UL> Saved<B> EAX</B> register when a task
switch occurs.<!-- lm: 0x2 1 -->
</UL><B> ebx=</B><!-- lm: 0x11 11 -->
<UL> Saved
<B>EBX</B> register when a task switch occurs.<!-- lm: 0x2 1 -->
</UL><B> ecx=
</B><!-- lm: 0x11 11 -->
<UL>Saved<B> ECX</B> register when a task switch
occurs.<!-- lm: 0x2 1 -->
</UL><B> edx=</B><!-- lm: 0x11 11 -->
<UL> Saved
<B>EDX</B> register when a task switch occurs.<!-- lm: 0x2 1 -->
</UL><B> esi=
</B><!-- lm: 0x11 11 -->
<UL>Saved<B> ESI</B> register when a task switch
occurs.<!-- lm: 0x2 1 -->
</UL><B> edi=</B><!-- lm: 0x11 11 -->
<UL> Saved
<B>EDI</B> register when a task switch occurs.<!-- lm: 0x2 1 -->
</UL><B> eip=
</B><!-- lm: 0x11 11 -->
<UL>Saved<B> EIP</B> register when a task switch
occurs.<!-- lm: 0x2 1 -->
</UL><B> esp=</B><!-- lm: 0x11 11 -->
<UL> Saved
<B>ESP</B> register when a task switch occurs.<!-- lm: 0x2 1 -->
</UL><B> ebp=
</B><!-- lm: 0x11 11 -->
<UL>Saved<B> EBP</B> register when a task switch
occurs.<!-- lm: 0x2 1 -->
</UL><B> iopl=</B><!-- lm: 0x11 11 -->
<UL> Saved
<B>EGLAGS</B> iopl and flag settings when a task switch occurs. See <A HREF="384_L3_RDisplayUsersRegiste.html">.R
command</A> for an explanation of the flag abbreviations.<!-- lm: 0x2 1 -->
</UL><B> cs=
</B><!-- lm: 0x11 11 -->
<UL>Saved<B> CS</B> register when a task switch
occurs.<!-- lm: 0x2 1 -->
</UL><B> ss=</B><!-- lm: 0x11 11 -->
<UL> Saved
<B>SS</B> register when a task switch occurs.<!-- lm: 0x2 1 -->
</UL><B> ds=
</B><!-- lm: 0x11 11 -->
<UL>Saved<B> DS</B> register when a task switch
occurs.<!-- lm: 0x2 1 -->
</UL><B> es=</B><!-- lm: 0x11 11 -->
<UL> Saved
<B>ES</B> register when a task switch occurs.<!-- lm: 0x2 1 -->
</UL><B> fs=
</B><!-- lm: 0x11 11 -->
<UL>Saved<B> FS</B> register when a task switch
occurs.<!-- lm: 0x2 1 -->
</UL><B> gs=</B><!-- lm: 0x11 11 -->
<UL> Saved
<B>GS</B> register when a task switch occurs.<!-- lm: 0x2 1 -->
</UL><B> cr3=
</B><!-- lm: 0x11 11 -->
<UL><B>CR3</B> register at task creation.
<P>
<B>Note: </B> This provides the real address of the Page Directory Table,
which never alters under OS/2.<!-- lm: 0x2 11 --><!-- lm: 0x2 1 -->
</UL><B> ss0=
</B><!-- lm: 0x11 11 -->
<UL>Ring 0<B> SS</B> register used for ring 0 privilege
transitions.<!-- lm: 0x2 1 -->
</UL><B> esp0=</B><!-- lm: 0x11 11 -->
<UL> Ring
0<B> ESP</B> register used for ring 0 privilege transitions.<!-- lm: 0x2 1 -->
</UL><B> ss1=
</B><!-- lm: 0x11 11 -->
<UL>Ring 1<B> SS</B> register used for ring 1 privilege
transitions.<!-- lm: 0x2 1 -->
</UL><B> esp1=</B><!-- lm: 0x11 11 -->
<UL> Ring
1<B> ESP</B> register used for ring 1 privilege transitions.
<P>
<B>Note: </B> Ring 1 is not used under OS/2.<!-- lm: 0x2 11 --><!-- lm: 0x2 1 -->
</UL><B> ss2=
</B><!-- lm: 0x11 11 -->
<UL>Ring 2<B> SS</B> register used for ring 2 privilege
transitions.<!-- lm: 0x2 1 -->
</UL><B> esp2=</B><!-- lm: 0x11 11 -->
<UL> Ring
1<B> ESP</B> register used for ring 2 privilege transitions.<!-- lm: 0x2 1 -->
</UL><B> ldtr=
</B><!-- lm: 0x11 11 -->
<UL><B>LDTR</B> register at task creation.<!-- lm: 0x2 1 -->
</UL><B> link=
</B><!-- lm: 0x11 11 -->
<UL><B>TR</B> register value of previous nested
task's<B> TSS.</B><!-- lm: 0x2 1 -->
</UL><B> tflags=</B><!-- lm: 0x11 11 -->
<UL> The
debug trap bit for this task.<!-- lm: 0x2 1 -->
</UL><B> i/o maps=</B><!-- lm: 0x11 11 -->
<UL> Offset
to the I/O permission map from the beginning of this TSS.
<P>
<B>Note: </B> It is permissible for the i/o map offset to point beyond the
TSS segment. This signifies that no I/O permissions are granted and all
ports will be trapped.<!-- lm: 0x2 11 --><!-- lm: 0x2 1 -->
</UL><B> ports
trapped:</B><!-- lm: 0x11 11 -->
<UL> List the range of I/O port addresses
that will generate traps if accessed by this task.<!-- lm: 0x2 1 -->
</UL>
<P>
<B>Notes: </B>
<P>
For performance reasons hardware implemented task switching is used only
in a limited way in OS/2.<B> TSSs</B> defined by OS/2 include:<!-- lm: 0x2 6 -->
<UL>
<P>
Protect mode code (<B>TSS</B> selector<B> 10</B>)<!-- lm: 0x2 6 -->
<P>
Virtual DOS Machines<!-- lm: 0x2 6 -->
<P>
Non Maskable Interrupt handling (trap 2,<B> TSS</B> selector<B> 1E38</B>)
<!-- lm: 0x2 6 -->
<P>
Double Fault handling (trap 8,<B> TSS</B> selector<B> 88</B>)<!-- lm: 0x2 1 -->
</UL>
<P>
All protect-mode processes run under a common top-level task<!-- entering slot 426 --> using
selector 10 as the<B> TSS</B> selector.
<P>
The<B><B> seltss</B> (<B>PTDA</B> +0x2f0) field of the <A HREF="3335_L0_.html">PTDA
</A>records the top-level task's<B> TSS</B> selector used by a given process,
thus may be used to find the<B> TSS</B> selector for Virtual DOS Machines.
<!-- lm: 0x2 1 -->
<P>

<P>
Refer to<B> Intel Pentium User's Guide</B> and<B> Intel x86 Programmer's
Reference</B> for more information on the Task State Segment and Hardware
architected multi-tasking.

<P><HR>

<A HREF="294_L3_DPDisplayPageDirecto.html">[Back: DP - Display Page Directory and Table Entries]</A> <BR>
<A HREF="296_L3_DXDisplaythe286LoadA.html">[Next: DX - Display the 286 LoadAll Buffer]</A> 
</BODY>
</HTML>
