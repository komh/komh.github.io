<HTML>
<HEAD>
<TITLE>Why Thunk?</TITLE>
</HEAD>
<BODY>
<H1>Why Thunk?</H1><!-- entering slot 66 -->
<P>
It is still common to have applications which have some 32-bit parts, and
some 16-bit parts. The 32-bit parts try to avoid using 16-bit selector:offset
addressing, because of the overhead of loading the selector registers, as
well as to avoid the challenge of correctly dealing with storage references
in both modes.
<P>
A typical example is a 32-bit application calling a 16-bit DLL.
<P>
Since storage is (must be) the same for all parts of a process, there has
to be a way to convert one form of an address to the other.
<P>
Only 16-bit application selectors from the LDT are eligible for this quick
form of the conversion, and only linear addresses less than %20000000 can
be converted to 16:16 format.
<P>
Additionally, addresses in the packed region may NOT be converted by this
quick method, but by a search of the LDT descriptor base (linear) addresses,
followed by a calculation.
<P>
The top of normal application space, at %1BFFFFFF, is mapped to selector
DFFF. The top of protected shared addresses at %1FFFFFFF maps to selector
FFFF, if used.

<P><HR>

<A HREF="053_L2_AddressTiling.html">[Back: Address Tiling]</A> <BR>
<A HREF="055_L2_AddressTransformatio.html">[Next: Address Transformations (Thunks)]</A> 
</BODY>
</HTML>
