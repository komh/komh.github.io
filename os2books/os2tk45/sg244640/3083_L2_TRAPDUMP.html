<HTML>
<HEAD>
<TITLE>TRAPDUMP</TITLE>
</HEAD>
<BODY>
<H1>TRAPDUMP</H1><!-- entering slot 3317 -->
<P>
<B>Warning: Potential Data Loss</B>
<P>
Misuse of this facility may cause loss of vital data. Please read carefully
the complete description before use.
<P>

<P>
The<B> TRAPDUMP</B>  command controls the stand-alone (system) dump facility
of OS/2.  It will enable initiation of a stand-alone dump at the instant
a ring 3 trap occurs for which no exception handler has intervened.
<P>
Ring 0 traps may be also intercepted only on 2.11 systems to which APAR
<B>PJ12258</B> has been applied (kernel revision 6.624), or on OS/2 Warp.

<P>
<U><I>Pre-Warp considerations:</I></U> The dump process is performed by
the hidden module<B> OS2DUMP</B>, which resides in the root directory of
the boot drive. <B> OS2DUMP</B>  as supplied with GA versions of OS/2 2.x
dumps only to diskette.  It may be replaced with a version supplied with
OS/2 Problem Determination Package (OS2PDP)  which will dump to a hard disk
FAT partition that has volume label<B> SADUMP</B>  or to diskette, depending
upon<B> TRAPDUMP</B> command specification.
<P>
The GA 2.x version of<B> OS2DUMP</B>  requires the first dump diskette be
freshly prepared using the<B> CREATEDD</B>  command and subsequent diskettes
to be formatted.  See the on-line OS/2 Command Reference for details of
<B>CREATEDD</B>.
<P>
The OS/2 Problem Determination Package (OS2PDP)  version of<B> OS2DUMP</B>
only requires formatted diskettes, the use of<B> CREATEDD</B>  being redundant.

<P>
When dumping to hard disk the dump partition must to be made known to<B> TRAPDUMP</B>.
 This is done by specifying an optional second parameter.
<P>
<U><I>OS/2 Warp considerations:</I></U> Under OS/2 Warp the<B> CREATEDD
</B>command is unnecessary and is not distributed with the system. Ordinarily
formatted diskettes may be used. Furthermore the enhanced version of<B> OS2DUMP
</B>that allows dumping to a hard-disk FAT partition is standard. The partition
volume label must be<B> SADUMP</B>. 
<P>
<U><I>Syntax.</I></U>
<PRE>
     TRAPDUMP=[ON|OFF|R0][,PD][,]X:

</PRE>
 
<P>
<U><I>Parameters</I></U><!-- lm: 0x2 1 -->
<UL>
<P>
<B>ON</B><!-- lm: 0x11 11 -->
<UL> Specifies that the stand-alone dump process
will be automatically initiated whenever an unrecoverable ring 3 trap occurs.
For 2.11 systems with APAR PJ12258 or OS/2 Warp, any system <A HREF="3268_L0_.html">IPE
</A>(including ring 0 traps) will also initiate a dump when<B> ON</B> is
specified.<!-- lm: 0x2 1 -->
</UL><B> OFF</B><!-- lm: 0x11 11 -->
<UL> Specifies
that the stand-alone dump process will not initiate automatically when an
unrecoverable trap occurs. This is the default option. It does not prohibit
the use of the Ctrl-Alt-Numlock-Numlock or Ctrl-Alt-F10-F10 key sequence
or the use of <A HREF="3095_L2_DosForceSystemDumpFo.html">DosForceSystemDump
</A>to force a system dump to be initiated.<!-- lm: 0x2 1 -->
</UL><B> R0
</B><!-- lm: 0x11 11 -->
<UL>Specifies that only ring zero traps and <A HREF="3268_L0_.html">IPEs
</A>will automatically initiate the stand-alone dump process. This option
applies only to 2.11 systems with APAR PJ12258 or OS/2 Warp.
<P>
<B>Note: </B>
<P>
When an IPE occurs the dump is taken immediately on displaying the IPE trap
screen. For the purposes of dump analysis the formatted registers from the
IPE screen should be located from the video buffer, which may be viewed
using the analyse option from<B> PMDF</B>.<!-- lm: 0x2 11 --><!-- lm: 0x2 1 -->
</UL><B> PD
</B><!-- lm: 0x11 11 -->
<UL>Specifies that a system level process dump
will be attempted if the user uses either the Ctrl-Alt-Numlock-Numlock or
Ctrl-Alt-F10-F10 key sequences. If for some reason the process dump doesn
not compete, a second key sequence will initiate a system dump. On completion
of either the system or process dump, the system is re-booted automatically.
<!-- lm: 0x2 1 -->
</UL><B><I>X:</B></I><!-- lm: 0x11 11 -->
<UL> specifies
the hard-disk FAT partition to which<B> OS2DUMP</B> will write a stand-alone
dump.  The partition letter must have the colon suffix.<!-- lm: 0x2 1 -->
</UL>
<P>
<B>Note: </B>
<P>
The partition may be specified with either ON or OFF. When specified with
OFF it will allow a stand-alone dump initiated by Ctrl-Alt-Numlock-Numlock
or Ctrl-Alt-F10-F10 key sequences to be written to the dump partition.
<P>
Mountable media other than diskette drives are not detectable by OS2DUMP.
The letter specifying the dump partition must be calculated as if any such
media<!-- entering slot 3318 --> were not present.
<P>
Only hard disk logical drives and primary partitions may be specified.
<P>
When dumping to a hard disk partition is selected the system is automatically
re-booted on completion of the dump.
<P>
System Dump parameter may also be set dynamically from the command line
by using the <A HREF="3085_L2_TRAPDUMP.html">TRAPDUMP command.</A><!-- lm: 0x2 1 -->
<P>

<P>
<B>Warnings:</B>
<P>
The stand-alone dump process will erase all data on the dump media (disk
partition or diskettes) before writing the dump.
<P>
Do not specify a disk partition or use diskettes that contain vital data.

<P>

<P>


<P><HR>

<A HREF="3082_L2_TRACEFMT.html">[Back: TRACEFMT]</A> <BR>
<A HREF="3084_L1_MiscellaneousRASComm.html">[Next: Miscellaneous RAS Command Utilities]</A> 
</BODY>
</HTML>
