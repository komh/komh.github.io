<HTML>
<HEAD>
<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="TEXT/HTML; CHARSET=UTF-8">
<TITLE>DosDumpProcess (Enable/Disable ProcessDump)</TITLE>
<STYLE>
PRE {
  FONT-FAMILY: Consolas, "Lucida Console", "Courier New", Courier, MONOSPACE;
}
</STYLE>
</HEAD>
<BODY>
<H1>DosDumpProcess (Enable/Disable ProcessDump)</H1><!-- entering slot 3332 -->
<P>
<B>DosDumpProcess</B> allows an application:<!-- lm: 0x2 3 -->
<UL>
<P>
<LI><!-- lm: 0x2 6 -->to enable or disable dynamically the Process Dump
Facility.<!-- lm: 0x2 3 -->
<P>
<LI><!-- lm: 0x2 6 -->to force a process dump for a given process.<!-- lm: 0x2 1 -->
</UL>P.The default setting is for Process Dump to be disabled unless overridden
by the <A HREF="3079_L2_SUPPRESSPOPUPS.html">DUMPPROCESS CONFIG.SYS command.
</A>
<P>
<U><I>Syntax</I></U>
<PRE>     APIRET APIENTRY DosDumpProcess(ULONG Flag, ULONG Drive, PID pid);<!--0xfb-->32-bit code Example using CSet/2
</PRE>

<P>
<U><I>Parameters</I></U><!-- lm: 0x2 1 -->
<P>
Flag<!-- lm: 0x11 11 -->
<UL> Doubleword field that may take one of the
following values:<!-- lm: 0x2 13 -->
<UL>
<P>
<LI><!-- lm: 0x2 16 --><LI>DDP_DISABLEPROCDUMP 0x00000000L)<!-- lm: 0x2 1 -->
</UL> disable
process dumps<!-- lm: 0x2 13 -->
<UL>
<P>
<LI><!-- lm: 0x2 16 --><LI>DDP_ENABLEPROCDUMP 0x00000001L)<!-- lm: 0x2 1 -->
</UL> enable
process dumps to be taken to a file in the root directory of a drive specified
by the<I> Drive</I> parameter.<!-- lm: 0x2 13 -->
<UL>
<P>
<LI><!-- lm: 0x2 16 --><LI>DDP_PERFORMPROCDUMP 0x00000002L)<!-- lm: 0x2 11 --><!-- lm: 0x2 1 -->
</UL> Drive
<!-- lm: 0x11 11 -->
<UL>Doubleword containing the ASCII value of the drive
letter to which the PDUMP.nnn dump files will be written when DDP_ENABLEPROCDUMP
is specified. For DDP_DISABLEPROCDUMP this parameter is ignored.<!-- lm: 0x2 1 -->
</UL> pid
<!-- lm: 0x11 11 -->
<UL>Doubleword containing the process Id of the process
to be dumped.
<P>
This option is valid only with DDP_PERFORMPROCDUMP. If zero is specified
for<B> Pid</B> then the current process is dumped.<!-- lm: 0x2 1 -->
</UL>
<P>
<U><I>Returns.</I></U>
<P>
Return Code.
<P>
<B>DosDumpProcess</B> returns the following values:<!-- lm: 0x2 1 -->
<P>
<LI><!-- lm: 0x11 11 -->NO_ERROR<!-- lm: 0x2 1 -->
<P>
87<!-- lm: 0x11 11 -->
<UL>ERROR_INVALID_PARAMETER<!-- lm: 0x2 1 -->
</UL> 303<!-- lm: 0x11 11 -->
<UL>ERROR_INVALID_PROCID
<!-- lm: 0x2 1 -->
</UL>
<P>
<U><I>Remarks.</I></U>
<P>
When Process dump is enabled a dump file is written whenever a ring 3 process
traps. The file takes a name<B> PDUMP.nnn</B> where<B> nnn</B> is incremented
sequentially (staring from 000) for each successive dump.
<P>
The directory to which PDUMP.nnn will be written is always the root directory
of<I> Drive</I>.
<P>
C Language prototype definitions for the<B> DosDumpProcess</B> may be found
under <A HREF="3111_L2_RASAPIPrototypes.html">RAS API Prototypes</A>.
<P>
The content of a Process Dump comprises register information at time of
trap, system control blocks (TCB, TSD, PTDA, MTE, SMTE, OTE, VMAR, VMOB,
LTD) that describe the state of the process at the time of error, ring 0
and ring 3 stack data for the trapping process.
<P>
See the <A HREF="261_L2_ProcessDumpFormatter.html">Process Dump Formatter
</A>section of the Dump Formatter User Guide for information on formatting
Process Dumps.
<P>
<B>Note: </B>
<P>
DDP_PERFORMPROCDUMP is not available in some early releases of OS/2 V2.11
<!-- lm: 0x2 1 -->
<P>


<P><HR>

<A HREF="3095_L2_DosForceSystemDumpFo.html">[Back: DosForceSystemDump (Force a System Stand Alone Dump)]</A> <BR>
<A HREF="3097_L2_DosSuppressPopUpsSup.html">[Next: DosSuppressPopUps (Suppress Trap Exception Pop-Up Messages)]</A> 
</BODY>
</HTML>
