<HTML>
<HEAD>
<TITLE>WinSendMsg Logic</TITLE>
</HEAD>
<BODY>
<H1>WinSendMsg Logic</H1><!-- entering slot 280 --> 
<P>
These are the essential steps in<B> WinSendMsg</B> processing:<!-- lm: 0x2 3 -->
<UL>
<P>
<LI><!-- lm: 0x2 6 -->We check to see if the message is being sent to the
same thread.
<P>
<B>WinSendMsg</B> to the same thread is known as an<I> Intra-thread</I> send.

<P>
<B>WinSendMsg</B> to another thread is known as an<I> Inter-thread</I> send.
 <!-- lm: 0x2 3 -->
<P>
<LI><!-- lm: 0x2 6 -->If intra-thread then the message is dispatched immediately,
from within<B> WinSendMsg</B>.
<P>
This behaviour implies that a window procedure may recurse many times, even
if waiting for a response to a<B> WinSendMsg</B>. <!-- lm: 0x2 3 -->
<P>
<LI><!-- lm: 0x2 6 -->If inter-thread then the message is enqueued to the
receive list of the recipient's<B> MQ</B>. <!-- lm: 0x2 3 -->
<P>
<LI><!-- lm: 0x2 6 -->Active thread status is transferred to the receiving
thread (if currently owned).
<P>
This allows the receiver to unlock the system queue if it had been locked
by the current thread<I> and</I> the current thread is the active thread.
 <!-- lm: 0x2 3 -->
<P>
<LI><!-- lm: 0x2 6 -->The receiver's message queue semaphore is posted.
 <!-- lm: 0x2 3 -->
<P>
<LI><!-- lm: 0x2 6 --><B>WinSendMsg</B> waits on the current thread's message
queue for a response to the sent message.<!-- lm: 0x2 1 -->
</UL> 
<P>
This processing is illustrated in the following diagram:<!-- Unable to decode bitmap format --><IMG SRC="189_L5_WinSendMsgLogic_21.gif" WIDTH=717 HEIGHT=1011>


<P><HR>

<A HREF="188_L5_WinGetMsgLogic.html">[Back: WinGetMsg Logic]</A> <BR>
<A HREF="190_L5_WaitingforMessageAct.html">[Next: Waiting for Message Activity]</A> 
</BODY>
</HTML>
