<HTML>
<HEAD>
<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="TEXT/HTML; CHARSET=UTF-8">
<TITLE>RamSemStruc</TITLE>
</HEAD>
<BODY>
<H1>RamSemStruc</H1><!-- entering slot 3368 -->
<P>
<!-- lm: 0x2 1 -->
<UL>
<P>
<B>Pointers</B><!-- lm: 0x11 11 -->
<UL><B> TCB_SemInfo</B><!-- lm: 0x2 1 -->
</UL><B> Locations
</B><!-- lm: 0x11 11 -->
<UL>Multiple, in user storage.<!-- lm: 0x2 1 -->
</UL><B> VM
Owner</B><!-- lm: 0x11 11 -->
<UL> Multipl user storage owners.<!-- lm: 0x2 1 -->
</UL>
<P>
<B><A HREF="3252_L0_.html">Format</A></B>
<PRE>┌─────────────────────────┬────────┬────────┬────────┬────────────────────────────────────────┐│<I>Field Name</I>               │<I>Off</I>     │<I>Length</I>  │<I>Type</I>    │<I>Description</I>                             │
├─────────────────────────┼────────┼────────┼────────┼────────────────────────────────────────┤
│RamSemStruc              │+0      │4       │S       │Ram Semaphore                           │
├─────────────────────────┼────────┼────────┼────────┼────────────────────────────────────────┤
│RamSemOwner              │+0      │1       │B       │Ownership flag                          │
├─────────────────────────┼────────┼────────┼────────┼────────────────────────────────────────┤
│RamSemFlag               │+1      │1       │B       │Ram Semaphore flag bit field            │
├─────────────────────────┼────────┼────────┼────────┼────────────────────────────────────────┤
│RamSemID                 │+2      │2       │W       │RamSem Block/Run ID low word            │
└─────────────────────────┴────────┴────────┴────────┴────────────────────────────────────────┘
</PRE>

<P>
<B>RamSemFlag definitions</B>
<PRE>┌──────────────────┬─────┬────────────────────────────────────────┐
│<I>name</I>              │<I>value</I>│<I>description</I>                             │
├──────────────────┼─────┼────────────────────────────────────────┤
│RAMSEM_WAITING    │0x01 │a thread is waiting on the sem          │
├──────────────────┼─────┼────────────────────────────────────────┤
│RAMSEM_MUXWAITING │0x02 │a thread is muxwaiting on the sem       │
└──────────────────┴─────┴────────────────────────────────────────┘
</PRE>

<P>
<B>Notes: </B>
<P>
The high-order 4 bit of the<B> RamSemFlag</B> are used as an extended owner
field (to cater for more than 512 threads).
<P>
Only kernel code sets the<B> RamSemOwner</B> field to a <A HREF="3320_L0_.html">thread
slot number.</A> Ring 3<B> RamSems</B> have<B> 0xff</B> value for an owned
<B>RamSem</B><!-- lm: 0x2 1 -->
<P>


<P><HR>

<A HREF="3126_L3_MuxTableEntry.html">[Back: MuxTableEntry]</A> <BR>
<A HREF="3128_L3_KSEMStructuresforOS2.html">[Next: KSEM Structures for OS/2 Warp V4.0 and .OS/2 Warp V3.0 ALLSTRICT kernel]</A> 
</BODY>
</HTML>
