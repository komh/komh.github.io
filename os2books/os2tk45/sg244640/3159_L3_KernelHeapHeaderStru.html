<HTML>
<HEAD>
<TITLE>Kernel Heap Header Structure</TITLE>
</HEAD>
<BODY>
<H1>Kernel Heap Header Structure</H1><!-- entering slot 3401 --> 
<P>
<!-- lm: 0x2 1 -->
<UL>
<P>
<B>Pointers</B><!-- lm: 0x11 11 -->
<UL><B> _apkh</B> points to the head
of the VMKH array.
<P>
<B>SAS_vm_heap_info</B> also points to this array.<!-- lm: 0x2 1 -->
</UL><B> Locations
</B><!-- lm: 0x11 11 -->
<UL>System Arena.<!-- lm: 0x2 1 -->
</UL><B> VM
Owner</B><!-- lm: 0x11 11 -->
<UL><B> os2krnl (0xffaa)</B><!-- lm: 0x2 1 -->
</UL> 
<P>
<B><A HREF="3252_L0_.html">Format</A></B> 
<P>
<B>VMKH</B> Kernel Heap Header.
<PRE>зддддддддддддддддбддддддбддддддбддддбдддддддддддддддддддддддддддддддддддддддд©Ё<I>Field Name</I>      Ё<I>Offset</I>Ё<I>Length</I>Ё<I>Type</I>Ё<I>Description</I>                             Ё
цддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
Ёkh_fl           Ё+0    Ё4     ЁD   ЁAllocation flags                        Ё
цддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
Ё<A HREF="3160_L3_KernelResidentHeapSt.html">kh_pkrh</A>         Ё+4    Ё4     ЁD   ЁPointer to resident heap header         Ё
цддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
цддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
Ё<A HREF="3161_L3_KernelSwappableHeapS.html">kh_pksh</A>         Ё+4    Ё4     ЁD   ЁPointer to swappable heap header        Ё
юддддддддддддддддаддддддаддддддаддддадддддддддддддддддддддддддддддддддддддддды
</PRE>
  
<P>
<B>kh_fl</B> flag definitions.
<PRE>зддддддддддддддбддддддддддбддддддддддддддддддддддддддддддддд©
ЁName          ЁBit Mask  ЁDescription                      Ё
цддддддддддддддеддддддддддеддддддддддддддддддддддддддддддддд╢
ЁPG_CONTIG     Ё0x00000001Ёcontiguous physical memory       Ё
цддддддддддддддеддддддддддеддддддддддддддддддддддддддддддддд╢
ЁPG_NOINCR     Ё0x00000001Ёdon't increment physical addrs   Ё
цддддддддддддддеддддддддддеддддддддддддддддддддддддддддддддд╢
ЁPG_W          Ё0x00000002ЁWritable - value from pte        Ё
цддддддддддддддеддддддддддеддддддддддддддддддддддддддддддддд╢
ЁPG_U          Ё0x00000004Ёuser mode accessible - from pte  Ё
цддддддддддддддеддддддддддеддддддддддддддддддддддддддддддддд╢
ЁPG_X          Ё0x00000008ЁeXecutable                       Ё
цддддддддддддддеддддддддддеддддддддддддддддддддддддддддддддд╢
ЁPG_R          Ё0x00000010ЁReadable                         Ё
цддддддддддддддеддддддддддеддддддддддддддддддддддддддддддддд╢
ЁPG_1M         Ё0x00000020Ёmust reside below 1 meg physical Ё
цддддддддддддддеддддддддддеддддддддддддддддддддддддддддддддд╢
ЁPG_GUARD      Ё0x00000040Ёguard page - from pte            Ё
цддддддддддддддеддддддддддеддддддддддддддддддддддддддддддддд╢
ЁPG_16M        Ё0x00000040Ёmust reside below 16 meg physicalЁ
цддддддддддддддеддддддддддеддддддддддддддддддддддддддддддддд╢
ЁPG_ZEROFILL   Ё0x00000080Ёzero initialize pages            Ё
цддддддддддддддеддддддддддеддддддддддддддддддддддддддддддддд╢
ЁPG_SWAPONWRITEЁ0x00000100Ёvalue from vp                    Ё
цддддддддддддддеддддддддддеддддддддддддддддддддддддддддддддд╢
ЁPG_UVIRT      Ё0x00000200Ёvalue from pte                   Ё
цддддддддддддддеддддддддддеддддддддддддддддддддддддддддддддд╢
ЁPG_RESIDENT   Ё0x00000400Ёvalue from pte                   Ё
цддддддддддддддеддддддддддеддддддддддддддддддддддддддддддддд╢
ЁPG_DISCARDABLEЁ0x00000800Ёvalue from vp                    Ё
юддддддддддддддаддддддддддаддддддддддддддддддддддддддддддддды
</PRE>
 
<P>
<B>Heap Handles (hkh)</B>
<P>
Kernel heap handles used to index the array of VMKH structures.
<PRE>зддддддддддддддддддбддддддддддбддддддддддддддддддддддддддддддд©
ЁName              Ёhkh value ЁDescription                    Ё
цддддддддддддддддддеддддддддддеддддддддддддддддддддддддддддддд╢
ЁVM_HKH_PUB_RESRW  Ё1         ЁKernel resident RW heap handle Ё
цддддддддддддддддддеддддддддддеддддддддддддддддддддддддддддддд╢
ЁVM_HKH_PUB_RESRO  Ё2         ЁPublic resident RO heap handle Ё
цддддддддддддддддддеддддддддддеддддддддддддддддддддддддддддддд╢
ЁVM_HKH_PUB_SWAPRW Ё3         ЁPublic swappable RW heap handleЁ
цддддддддддддддддддеддддддддддеддддддддддддддддддддддддддддддд╢
ЁVM_HKH_PUB_SWAPRO Ё4         ЁPublic swappable RO heap handleЁ
цддддддддддддддддддеддддддддддеддддддддддддддддддддддддддддддд╢
ЁVM_HKH_PUB_RES1MRWЁ5         ЁPublic resident RW 1M handle   Ё
цддддддддддддддддддеддддддддддеддддддддддддддддддддддддддддддд╢
ЁVM_HKH_PUB_RES1MROЁ6         ЁPublic resident RO 1M handle   Ё
юддддддддддддддддддаддддддддддаддддддддддддддддддддддддддддддды
</PRE>

<P>
<B>Note: </B>
<P>
It is possible for more than one handle to be served by the same heap. In
particular, under the<B> RETAIL</B> kernel all heap handle are mapped to
either a read/write resident or swappable heap.<!-- lm: 0x2 1 -->
<P>


<P><HR>

<A HREF="3158_L3_VirtualPageStructure.html">[Back: Virtual Page Structure]</A> <BR>
<A HREF="3160_L3_KernelResidentHeapSt.html">[Next: Kernel Resident Heap Structures]</A> 
</BODY>
</HTML>
