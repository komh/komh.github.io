<HTML>
<HEAD>
<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="TEXT/HTML; CHARSET=UTF-8">
<TITLE>Current Directory Structure for OS/2 Warp V4.0 and OS/2 Warp V3.0</TITLE>
<STYLE>
PRE {
  FONT-FAMILY: Consolas, "Lucida Console", "Courier New", Courier, MONOSPACE;
}
</STYLE>
</HEAD>
<BODY>
<H1>Current Directory Structure for OS/2 Warp V4.0 and OS/2 Warp V3.0</H1><!-- entering slot 3505 --> 
<P>
<!-- lm: 0x2 1 -->
<UL>
<P>
<B>Pointers</B><!-- lm: 0x11 11 -->
<UL> SAS field<B> SAS_file_CDS</B> contains
the selector for CDS RMP segment.
<P>
<B>CDSAddr</B> locates the RMP handle which contains the selector for the
CDS RMP segment. <!-- lm: 0x2 1 -->
</UL><B> Locations</B><!-- lm: 0x11 11 -->
<UL> CDS
segment is dynamically allocated from the kernel resident heap. <!-- lm: 0x2 1 -->
</UL><B> VM
Owner</B><!-- lm: 0x11 11 -->
<UL><B> cdsrmp (0xff61)</B>.<!-- lm: 0x2 1 -->
</UL> 
<P>
<B><A HREF="3252_L0_.html">Format</A></B>
<P>
<U><I>cddFATFS</I></U>
<PRE>┌─────────┬──────┬──────┬────┬──────────────────────┐│<I>Field    </I>│<I>Offset</I>│<I>Length</I>│<I>Type</I>│<I>Description</I>           │
│<I>Name</I>     │      │      │    │                      │
├─────────┼──────┼──────┼────┼──────────────────────┤
│cddFAT_id│0     │2     │W   │cluster of current dir│
└─────────┴──────┴──────┴────┴──────────────────────┘
</PRE>

<P>
<U><I>cdfsd</I></U>
<PRE>┌───────────┬──────┬──────┬────┬────────────┐
│<I>Field Name</I> │<I>Offset</I>│<I>Length</I>│<I>Type</I>│<I>Description</I> │
├───────────┼──────┼──────┼────┼────────────┤
│cdd_work[8]│0     │8     │S   │            │
└───────────┴──────┴──────┴────┴────────────┘
</PRE>

<P>
<U><I>cdfsi</I></U>
<PRE>┌─────────────┬──────┬──────┬────┬─────────────────────────────────────┐
│<I>Field Name</I>   │<I>Offset</I>│<I>Length</I>│<I>Type</I>│<I>Description</I>                          │
├─────────────┼──────┼──────┼────┼─────────────────────────────────────┤
│cdi_hVPB     │0     │2     │W   │hVPB for the drive mapped to this CDS│
├─────────────┼──────┼──────┼────┼─────────────────────────────────────┤
│cdi_end      │2     │2     │W   │End of assignment                    │
├─────────────┼──────┼──────┼────┼─────────────────────────────────────┤
│cdi_flags    │4     │1     │B   │fs independent flags (see below)     │
├─────────────┼──────┼──────┼────┼─────────────────────────────────────┤
│cdi_text[260]│5     │104   │A   │                                     │
└─────────────┴──────┴──────┴────┴─────────────────────────────────────┘
</PRE>

<P>
<U><I>curdir</I></U>
<PRE>┌─────────────┬──────┬──────┬────┬───────────────────────────────────────┐
│<I>Field Name</I>   │<I>Offset</I>│<I>Length</I>│<I>Type</I>│<I>Description</I>                            │
├─────────────┼──────┼──────┼────┼───────────────────────────────────────┤
│cd_handle    │0     │2     │W   │lookup key for this CDS                │
├─────────────┼──────┼──────┼────┼───────────────────────────────────────┤
│cd_pid       │2     │2     │W   │PID part of lockup key for handles 1-26│
├─────────────┼──────┼──────┼────┼───────────────────────────────────────┤
│cd_refcnt    │4     │2     │W   │reference count CDS's                  │
├─────────────┼──────┼──────┼────┼───────────────────────────────────────┤
│cd_flags     │6     │1     │B   │See below for definitions              │
├─────────────┼──────┼──────┼────┼───────────────────────────────────────┤
│cd_devptr    │7     │4     │D   │local pointer to DPB or net device     │
├─────────────┼──────┼──────┼────┼───────────────────────────────────────┤
│cd_OwnerFSC  │B     │2     │W   │Owner FSC.Offst                        │
├─────────────┼──────┼──────┼────┼───────────────────────────────────────┤
│cd_fsd       │D     │8     │S   │File system dependent section          │
├─────────────┼──────┼──────┼────┼───────────────────────────────────────┤
│cd_fsi       │15    │10A   │S   │File system independent section        │
├─────────────┼──────┼──────┼────┼───────────────────────────────────────┤
├─────────────┼──────┼──────┼────┼───────────────────────────────────────┤
│cdi_hVPB     │15    │2     │W   │hVPB for the drive mapped to this CDS  │
├─────────────┼──────┼──────┼────┼───────────────────────────────────────┤
│cdi_end      │17    │2     │W   │End of assignment                      │
├─────────────┼──────┼──────┼────┼───────────────────────────────────────┤
│cdi_flags    │19    │1     │B   │fs independent flags (see below)       │
├─────────────┼──────┼──────┼────┼───────────────────────────────────────┤
│cdi_text[260]│1A    │104   │B   │                                       │
├─────────────┼──────┼──────┼────┼───────────────────────────────────────┤
│             │11E   │1     │B   │                                       │
└─────────────┴──────┴──────┴────┴───────────────────────────────────────┘
</PRE>

<P>
<B>cd_flags</B> flag definitions
<PRE>┌───────────────┬─────────┬───────────────────────────────┐
│Name           │Bit Mask │Description                    │
├───────────────┼─────────┼───────────────────────────────┤
│CD_ISNET       │0x80     │This CDS is for a remote drive │
├───────────────┼─────────┼───────────────────────────────┤
│CD_INUSE       │0x40     │This CDS is in use             │
├───────────────┼─────────┼───────────────────────────────┤
│CD_SPLICE      │0x20     │This CDS is for a JOINed drive │
├───────────────┼─────────┼───────────────────────────────┤
│CD_JOIN        │CD_SPLICE│This CDS is for a JOINed drive │
├───────────────┼─────────┼───────────────────────────────┤
│CD_LOCAL       │0x10     │This CDS is for a SUBSTed drive│
├───────────────┼─────────┼───────────────────────────────┤
│CD_ISPSEUDOCHAR│0x08     │This CDS for a pseudo-char dev │
├───────────────┼─────────┼───────────────────────────────┤
│CD_ISUNC       │0x04     │This CDS for a UNC name        │
└───────────────┴─────────┴───────────────────────────────┘
</PRE>
 
<P>
<B>cdi_flags</B> flag definitions 
<PRE>┌────────────────┬────────┬─────────────────────────────────┐
│Name            │Bit Mask│Description                      │
├────────────────┼────────┼─────────────────────────────────┤
│CDI_ISVALID     │0x80    │This CDS contains a valid cd_fsd │
├────────────────┼────────┼─────────────────────────────────┤
│CDI_ISROOT      │0x40    │This CDS is for a root (no cdfsd)│
├────────────────┼────────┼─────────────────────────────────┤
│CDI_MEDIASWAPPED│0x20    │This CDS may not be valid (forces│
└────────────────┴────────┴─────────────────────────────────┘
</PRE>


<P><HR>

<A HREF="3217_L3_DriveParameterBlockf.html">[Back: Drive Parameter Block for OS/2 Warp V4.0 and OS/2 Warp V3.0]</A> <BR>
<A HREF="3219_L3_FileSystemBufferforO.html">[Next: File System Buffer for OS/2 Warp V4.0 and OS/2 Warp V3.0]</A> 
</BODY>
</HTML>
