<HTML>
<HEAD>
<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="TEXT/HTML; CHARSET=UTF-8">
<TITLE>Kernel Public Heaps</TITLE>
</HEAD>
<BODY>
<H1>Kernel Public Heaps</H1><!-- entering slot 184 -->
<P>
The kernel has 7 heaps for general use by itself, device drivers and file
system drivers. They have the following object id mnemonics:<!-- lm: 0x2 1 -->
<UL>
<P>
<B>vmkshro</B><!-- lm: 0x2 13 -->
<UL> Swappable read-only heap<!-- lm: 0x2 1 -->
</UL><B> vmkshrw
</B><!-- lm: 0x2 13 -->
<UL>Swappable read/write heap<!-- lm: 0x2 1 -->
</UL><B> vmkrhro
</B><!-- lm: 0x2 13 -->
<UL>Resident read-only heap<!-- lm: 0x2 1 -->
</UL><B> vmkrhrw
</B><!-- lm: 0x2 13 -->
<UL>Resident read/write heap<!-- lm: 0x2 1 -->
</UL><B> krhro1m
</B><!-- lm: 0x2 13 -->
<UL>Resident read-only &lt; 1Mb heap<!-- lm: 0x2 1 -->
</UL><B> krhrw1m
</B><!-- lm: 0x2 13 -->
<UL>Resident read/write &lt; 1Mb heap<!-- lm: 0x2 1 -->
</UL><B> kbdsym
</B><!-- lm: 0x2 13 -->
<UL>Resident kernel debugger symbol heap<!-- lm: 0x2 1 -->
</UL>
<P>
Not all heaps are always built. Note in particular:<!-- lm: 0x2 6 -->
<UL>
<P>
<B>hdbsym</B> is not present under the RETAIL kernel.<!-- lm: 0x2 6 -->
<P>
<B>vmkshrw</B> is used for the<B> krhro1m</B>,<B> krhrw1m</B>,<B> vmkshrw
</B>and<B> vmkshro</B> heaps under the RETAIL kernel.<!-- lm: 0x2 6 -->
<P>
<B>vmkrhrw</B> is used for both<B> vmkrhrw</B> and<B> vmkrhro</B> under
the RETAIL kernel.<!-- lm: 0x2 1 -->
</UL>
<P>
Notice that each of the heaps is either resident or swappable.
<P>
Each heap is partitioned into blocks.
<P>
Swappable heap blocks have an 8 byte prefix followed by the block data.

<P>
Resident heap blocks have two forms:<!-- lm: 0x2 6 -->
<UL>
<P>
Regular: for smaller allocation. These have a 4 byte prefix.<!-- lm: 0x2 6 -->
<P>
Attributed or extended: These use a 4 byte prefix and an 8 byte suffix.
<!-- lm: 0x2 1 -->
</UL>

<P><HR>

<A HREF="147_L5_BlockingontheAddress.html">[Back: Blocking on the Address of a Resource]</A> <BR>
<A HREF="149_L6_SwappableHeapBlocks.html">[Next: Swappable Heap Blocks]</A> 
</BODY>
</HTML>
