<HTML>
<HEAD>
<TITLE>Exception Handler Structures</TITLE>
</HEAD>
<BODY>
<H1>Exception Handler Structures</H1><!-- entering slot 3474 --> 
<P>
<!-- lm: 0x2 1 -->
<UL>
<P>
<B>Pointers</B><!-- lm: 0x11 11 -->
<UL> TIB field<B> tib_pexchain</B> points
to the head of the chain of EXCEPTIONREGISTRATIONRECORDs.
<P>
The 1st parameter to the exception handler points to the EXCEPTIONREPORTRECORD.

<P>
The 2nd parameter to the exception handler points to the EXCEPTIONREGISTRATIONRECORD.

<P>
The 3nd parameter to the exception handler points to the CONTEXTRECORD.
 <!-- lm: 0x2 1 -->
</UL><B>Locations</B><!-- lm: 0x11 11 -->
<UL> Allocated
in the Process' Private Arena,. <!-- lm: 0x2 1 -->
</UL><B> VM Owner</B><!-- lm: 0x11 11 -->
<UL><B> tktib
(0xff3f)</B> (also used for PIB ownership).<!-- lm: 0x2 1 -->
</UL> 
<P>
<B><A HREF="3252_L0_.html">Format</A></B> 
<P>
<B>CONTEXTRECORD</B> Exception handler context record.
<PRE>зддддддддддддддддбддддддбддддддбддддбдддддддддддддддддддддддддддддддддддддддд©Ё<I>Field Name</I>      Ё<I>Offset</I>Ё<I>Length</I>Ё<I>Type</I>Ё<I>Description</I>                             Ё
цддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
ЁContextFlags    Ё+0    Ё4     ЁD   ЁFlags                                   Ё
цддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
цддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
Ё                Ё+4    Ё6c    ЁS   ЁFloating point section                  Ё
цддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
цддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
Ёctx_env         Ё+4    Ё1c    ЁD   ЁFloating point environment              Ё
цддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
Ёctx_stack       Ё+20   Ё50    ЁS   ЁFloating point register stack (8 FPREG  Ё
Ё                Ё      Ё      Ё    Ёstructures)                             Ё
цддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
цддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
Ё                Ё+70   Ё10    ЁS   ЁSegment Register section                Ё
цддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
цддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
Ёctx_SegGs       Ё+70   Ё4     ЁD   ЁGS segment register                     Ё
цддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
Ёctx_SegFs       Ё+74   Ё4     ЁD   ЁFS segment register                     Ё
цддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
Ёctx_SegEs       Ё+78   Ё4     ЁD   ЁES segment register                     Ё
цддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
Ёctx_SegDs       Ё+7c   Ё4     ЁD   ЁDS segment register                     Ё
цддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
цддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
Ё                Ё+80   Ё18    ЁS   ЁInteger Register section                Ё
цддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
цддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
Ёctx_RegEdi      Ё+80   Ё4     ЁD   ЁEDI register                            Ё
цддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
Ёctx_RegEsi      Ё+84   Ё4     ЁD   ЁESI register                            Ё
цддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
Ёctx_RegEax      Ё+88   Ё4     ЁD   ЁEAX register                            Ё
цддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
Ёctx_RegEbx      Ё+8c   Ё4     ЁD   ЁEBX register                            Ё
цддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
Ёctx_RegEcx      Ё+90   Ё4     ЁD   ЁECX register                            Ё
цддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
Ёctx_RegEdx      Ё+94   Ё4     ЁD   ЁEDX register                            Ё
цддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
цддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
Ё                Ё+98   Ё18    ЁS   ЁControl Register section                Ё
цддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
цддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
Ёctx_RegEbp      Ё+98   Ё4     ЁD   ЁEBP register                            Ё
цддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
Ёctx_RegEip      Ё+9c   Ё4     ЁD   ЁEIP register                            Ё
цддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
Ёctx_SegCs       Ё+a0   Ё4     ЁD   ЁCS selector                             Ё
цддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
Ёctx_EFlags      Ё+a4   Ё4     ЁD   ЁProcessor Flags register                Ё
цддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
Ёctx_RegEsp      Ё+a8   Ё4     ЁD   ЁESP register                            Ё
цддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
Ёctx_SegSs       Ё+ac   Ё4     ЁD   ЁSS segment register                     Ё
юддддддддддддддддаддддддаддддддаддддадддддддддддддддддддддддддддддддддддддддды
</PRE>
 
<P>
<B>FPREG</B> Floating Point Register Stack Element
<PRE>зддддддддддддддддбддддддбддддддбддддбдддддддддддддддддддддддддддддддддддддддд©
Ё<I>Field Name</I>      Ё<I>Offset</I>Ё<I>Length</I>Ё<I>Type</I>Ё<I>Description</I>                             Ё
цддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
Ёlosig           Ё+0    Ё4     ЁD   ЁLow significance double-word            Ё
цддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
Ёhisig           Ё+4    Ё4     ЁD   ЁHigh significance double-word           Ё
цддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
Ёsignexp         Ё+8    Ё2     ЁW   ЁExponent                                Ё
юддддддддддддддддаддддддаддддддаддддадддддддддддддддддддддддддддддддддддддддды
</PRE>
 
<P>
<B>ContextFlags</B> flag definitions:
<PRE>зддддддддддддддддддддддбдддддддддддбдддддддддддддддддддддддддддд©
ЁName                  ЁBit Mask   ЁDescription                 Ё
цддддддддддддддддддддддедддддддддддедддддддддддддддддддддддддддд╢
ЁCONTEXT_CONTROL       Ё0x00000001LЁSS:ESP, CS:EIP, EFLAGS, EBP Ё
цддддддддддддддддддддддедддддддддддедддддддддддддддддддддддддддд╢
ЁCONTEXT_INTEGER       Ё0x00000002LЁEAX, EBX, ECX, EDX, ESI, EDIЁ
цддддддддддддддддддддддедддддддддддедддддддддддддддддддддддддддд╢
ЁCONTEXT_SEGMENTS      Ё0x00000004LЁDS, ES, FS, GS              Ё
цддддддддддддддддддддддедддддддддддедддддддддддддддддддддддддддд╢
ЁCONTEXT_FLOATING_POINTЁ0x00000008LЁNumeric coprocessor state   Ё
юддддддддддддддддддддддадддддддддддадддддддддддддддддддддддддддды
</PRE>
  
<P>
<B>EXCEPTIONREPORTRECORD</B> Exception Handler Report Record.
<PRE>зддддддддддддддддддддддддддддбддддддбддддддбддддбдддддддддддддддддддддддддддддддддддддддд©
Ё<I>Field Name</I>                  Ё<I>Offset</I>Ё<I>Length</I>Ё<I>Type</I>Ё<I>Description</I>                             Ё
цддддддддддддддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
ЁExceptionNum                Ё+0    Ё4     ЁD   ЁException number                        Ё
цддддддддддддддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
ЁfHandlerFlags               Ё+4    Ё4     ЁD   ЁException attributes                    Ё
цддддддддддддддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
ЁNestedExceptionReportRecord Ё+8    Ё4     ЁD   ЁPreceding exception's report record if  Ё
Ё                            Ё      Ё      Ё    Ёnested exception                        Ё
цддддддддддддддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
ЁExceptionAddress            Ё+c    Ё4     ЁD   ЁException address                       Ё
цддддддддддддддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
ЁcParameters                 Ё+10   Ё4     ЁD   ЁSize of exception specific information  Ё
цддддддддддддддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
ЁExceptionInfo               Ё+14   Ё10    ЁD   ЁException specfic information           Ё
юддддддддддддддддддддддддддддаддддддаддддддаддддадддддддддддддддддддддддддддддддддддддддды
</PRE>
 
<P>
<B>fHandlerFlags</B> flag definitions:
<PRE>здддддддддддддддддбддддддддбдддддддддддддддддддддддддддддддд©
ЁName             ЁBit MaskЁDescription                     Ё
цдддддддддддддддддеддддддддедддддддддддддддддддддддддддддддд╢
ЁEH_NONCONTINUABLEЁ0x1     ЁNoncontinuable exception        Ё
цдддддддддддддддддеддддддддедддддддддддддддддддддддддддддддд╢
ЁEH_UNWINDING     Ё0x2     ЁUnwind is in progress           Ё
цдддддддддддддддддеддддддддедддддддддддддддддддддддддддддддд╢
ЁEH_EXIT_UNWIND   Ё0x4     ЁExit unwind is in progress      Ё
цдддддддддддддддддеддддддддедддддддддддддддддддддддддддддддд╢
ЁEH_STACK_INVALID Ё0x8     ЁStack out of limits or unalignedЁ
цдддддддддддддддддеддддддддедддддддддддддддддддддддддддддддд╢
ЁEH_NESTED_CALL   Ё0x10    ЁNested exception handler call   Ё
юдддддддддддддддддаддддддддадддддддддддддддддддддддддддддддды
</PRE>
 
<P>
<B>EXCEPTIONREGISTRATIONRECORD</B> Exception Handler Registration Record.

<PRE>зддддддддддддддддбддддддбддддддбддддбдддддддддддддддддддддддддддддддддддддддд©
Ё<I>Field Name</I>      Ё<I>Offset</I>Ё<I>Length</I>Ё<I>Type</I>Ё<I>Description</I>                             Ё
цддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
Ёprev_structure  Ё+0    Ё4     ЁD   ЁPreviously <!-- entering slot 3475 -->registered exception handler Ё
цддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
ЁExceptionHandlerЁ+4    Ё4     ЁD   ЁException handler entry point address orЁ
Ё                Ё      Ё      Ё    Ё-1 if end of chain                      Ё
юддддддддддддддддаддддддаддддддаддддадддддддддддддддддддддддддддддддддддддддды
</PRE>


<P><HR>

<A HREF="3194_L3_ExitListEntryDataStr.html">[Back: Exit List Entry Data Structure]</A> <BR>
<A HREF="3196_L2_LoaderControlBlockRe.html">[Next: Loader Control Block Reference]</A> 
</BODY>
</HTML>
