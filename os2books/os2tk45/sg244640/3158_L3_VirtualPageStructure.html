<HTML>
<HEAD>
<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="TEXT/HTML; CHARSET=UTF-8">
<TITLE>Virtual Page Structure</TITLE>
</HEAD>
<BODY>
<H1>Virtual Page Structure</H1><!-- entering slot 3400 --> 
<P>
<!-- lm: 0x2 1 -->
<UL>
<P>
<B>Pointers</B><!-- lm: 0x11 11 -->
<UL><B> pf_pvp</B> points to the head
of the VP array.<!-- lm: 0x2 1 -->
</UL><B> Locations</B><!-- lm: 0x11 11 -->
<UL> System
Arena.<!-- lm: 0x2 1 -->
</UL><B> VM Owner</B><!-- lm: 0x11 11 -->
<UL><B> pgvp
(0xffb3)</B><!-- lm: 0x2 1 -->
</UL> 
<P>
<B><A HREF="3252_L0_.html">Format</A></B>
<PRE>┌────────────┬────┬────────┬────┬────────────────────────────────────────┐│<I>Field Name</I>  │<I>Off</I> │<I>Length</I>  │<I>Type</I>│<I>Description</I>                             │
├────────────┼────┼────────┼────┼────────────────────────────────────────┤
│avp_s       │+0  │c       │S   │active vp                               │
├────────────┼────┼────────┼────┼────────────────────────────────────────┤
│vp_frame    │+0  │2.4     │D   │frame, swp or ldr block #               │
├────────────┼────┼────────┼────┼────────────────────────────────────────┤
│vp_flags    │    │1.4     │    │flags                                   │
├────────────┼────┼────────┼────┼────────────────────────────────────────┤
│vp_obpg     │+4  │2       │W   │object relative page number             │
├────────────┼────┼────────┼────┼────────────────────────────────────────┤
│vp_hob      │+6  │2       │W   │handle to object record                 │
├────────────┼────┼────────┼────┼────────────────────────────────────────┤
│vp_refcount │+8  │2       │W   │virtual page reference count            │
├────────────┼────┼────────┼────┼────────────────────────────────────────┤
│vp_semowner │+a  │2       │W   │Slot number of semaphore owner          │
├────────────┼────┼────────┼────┼────────────────────────────────────────┤
├────────────┼────┼────────┼────┼────────────────────────────────────────┤
│fvp_s       │+0  │a       │S   │Free vp                                 │
├────────────┼────┼────────┼────┼────────────────────────────────────────┤
│vp_flink    │+0  │4       │D   │forward link                            │
├────────────┼────┼────────┼────┼────────────────────────────────────────┤
│vp_blink    │+4  │4       │D   │backward link                           │
├────────────┼────┼────────┼────┼────────────────────────────────────────┤
│            │+8  │2       │W   │pad                                     │
└────────────┴────┴────────┴────┴────────────────────────────────────────┘
</PRE>

<P>
<B>vp_flag</B> flag definitions:
<PRE>┌────────────────┬──────────┬──────────────────────────────┐
│<I>name</I>            │<I>bit mask</I>  │<I>description</I>                   │
├────────────────┼──────────┼──────────────────────────────┤
│VP_BUSY         │0x001     │page semaphore taken          │
├────────────────┼──────────┼──────────────────────────────┤
│VP_WANTED       │0x002     │page semaphore requested      │
├────────────────┼──────────┼──────────────────────────────┤
│VP_CACHE        │0x004     │search page cache for pf      │
├────────────────┼──────────┼──────────────────────────────┤
│VP_PFIDLE       │0x008     │cross linked to idle pf       │
├────────────────┼──────────┼──────────────────────────────┤
│VP_PF           │0x010     │cross linked to pf            │
├────────────────┼──────────┼──────────────────────────────┤
│VP_DF           │0x020     │has swap file disk frame      │
├────────────────┼──────────┼──────────────────────────────┤
│VP_DIRTY        │0x040     │contents written to - from pte│
├────────────────┼──────────┼──────────────────────────────┤
│VP_SHDIRTY      │0x080     │shadow dirty bit (for VDMs)   │
├────────────────┼──────────┼──────────────────────────────┤
│VP_SOW          │0x100     │change to swappable on write  │
├────────────────┼──────────┼──────────────────────────────┤
│VP_PRIVATIZED   │0x200     │vp privatized                 │
├────────────────┼──────────┼──────────────────────────────┤
│VP_RESIDENT     │0x400     │cannot be moved - value from  │
│                │          │pte                           │
├────────────────┼──────────┼──────────────────────────────┤
│VP_DISCARDABLE  │0x800     │1 = discardable, 0 = swappable│
└────────────────┴──────────┴──────────────────────────────┘
</PRE>


<P><HR>

<A HREF="3157_L3_VMObjectRecord.html">[Back: VM Object Record]</A> <BR>
<A HREF="3159_L3_KernelHeapHeaderStru.html">[Next: Kernel Heap Header Structure]</A> 
</BODY>
</HTML>
