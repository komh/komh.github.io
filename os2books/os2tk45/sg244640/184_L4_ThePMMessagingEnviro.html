<HTML>
<HEAD>
<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="TEXT/HTML; CHARSET=UTF-8">
<TITLE>The PM Messaging Environment</TITLE>
<STYLE>
PRE {
  FONT-FAMILY: Consolas, "Lucida Console", "Courier New", Courier, MONOSPACE;
}
</STYLE>
</HEAD>
<BODY>
<H1>The PM Messaging Environment</H1><!-- entering slot 274 -->
<P>
First consider the non-PM application programming model as shown in the
following diagram:<!-- Unable to decode bitmap format --><IMG SRC="184_L4_ThePMMessagingEnviro_16.gif" WIDTH=717 HEIGHT=1011>
<P>
This diagram illustrates the following points:<!-- lm: 0x2 3 -->
<UL>
<P>
<LI><!-- lm: 0x2 6 -->Non-PM application threads run in a relatively unconstrained
environment (compare this with the following situation).<!-- lm: 0x2 3 -->
<P>
<LI><!-- lm: 0x2 6 -->The Operating System provides a<I> black-box</I> set
of services and interfaces.<!-- lm: 0x2 3 -->
<P>
<LI><!-- lm: 0x2 6 -->The Hardware is not directly accessible by the application.
<!-- lm: 0x2 1 -->
</UL>
<P>
For PM message threads, the environment is radically different. The key
difference is that application code that runs on a PM message thread is
effectively a subroutine of the<B> WinGetMsg</B> API even though<B> WinGetMsg
</B> is called by the application. The terminology often used to describe
this reversal is<B><I> Program Inversion</B></I>.<B> WinGetMsg</B> is said
to be<B><I> inverted</B></I> with respect to the application's message thread.

<P>
We see this illustrated in the following diagram.<!-- Unable to decode bitmap format --><IMG SRC="184_L4_ThePMMessagingEnviro_17.gif" WIDTH=717 HEIGHT=1011>
<P>
Also illustrated by this diagram are the following points:<!-- lm: 0x2 3 -->
<UL>
<P>
<LI><!-- lm: 0x2 6 -->PM Message threads act in a co-operative way. They
wait for messages, and<I> pass them on</I> to the appropriate application
if not for themselves.<!-- lm: 0x2 3 -->
<P>
<LI><!-- lm: 0x2 6 -->PM Message threads should spend most of their elapsed
time waiting for notification of messages - because of their co-operative
nature.<!-- lm: 0x2 3 -->
<P>
<LI><!-- lm: 0x2 6 -->Application code that runs on the message thread should
be limited to very short duration processing. We often speak of the<I> tenth-of-a-second
rule</I>, which is intended to imply the transient nature of application
code processing rather than a precise measure.<!-- lm: 0x2 3 -->
<P>
<LI><!-- lm: 0x2 6 -->If a message thread communicates with another thread
or the operating system, then this should be done either asynchronously
or so as not to violate the tenth-of-a-second rule.<!-- lm: 0x2 1 -->
</UL> 

<P><HR>

<A HREF="183_L3_Exploring32bitPresen.html">[Back: Exploring 32-bit Presentation Manager Under WARP]</A> <BR>
<A HREF="185_L4_PMMessageQueues.html">[Next: PM Message Queues]</A> 
</BODY>
</HTML>
