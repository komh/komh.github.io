<HTML>
<HEAD>
<TITLE>Volume Parameter Block for OS/2 Warp V4.0 and OS/2 Warp V3.0</TITLE>
</HEAD>
<BODY>
<H1>Volume Parameter Block for OS/2 Warp V4.0 and OS/2 Warp V3.0</H1><!-- entering slot 3501 --> 
<P>
<!-- lm: 0x2 1 -->
<UL>
<P>
<B>Pointers</B><!-- lm: 0x11 11 -->
<UL> SFT field<B> sfi_hVPB</B> contains
the offset within the VPB segment of the associated VPB.
<P>
MFT field<B> mft_hVPB</B> contains the offset within the VPB segment of
the associated VPB.
<P>
DPB field<B> dpb_hVPB</B> contains the offset within the VPB segment of
the associated VPB.
<P>
CDS field<B> cdi_hVPB</B> contains the offset within the VPB segment of
the associated VPB.
<P>
<B>GDT_VPB</B> locates the GDT descriptor for the VPB segment.<!-- lm: 0x2 1 -->
</UL><B> Locations
</B><!-- lm: 0x11 11 -->
<UL>VPB segment is dynamically allocated from the
kernel resident heap. <!-- lm: 0x2 1 -->
</UL><B> VM Owner</B><!-- lm: 0x11 11 -->
<UL><B> vpb
(0xffa2)</B>.<!-- lm: 0x2 1 -->
</UL> 
<P>
<B><A HREF="3252_L0_.html">Format</A></B>
<P>
<U><I>vpb</I></U>
<PRE>зддддддддддддддддбддддддбддддддбддддбдддддддддддддддддддддддддддддддддддддддд©Ё<I>Field Name</I>      Ё<I>Offset</I>Ё<I>Length</I>Ё<I>Type</I>Ё<I>Description</I>                             Ё
цддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
Ёvpb_flink       Ё0     Ё2     ЁW   Ёhandle of forward link                  Ё
цддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
Ёvpb_blink       Ё2     Ё2     ЁW   Ёhandle of back link                     Ё
цддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
Ёvpb_ref_count   Ё4     Ё2     ЁW   Ёcount of objects that point to VPB      Ё
цддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
Ёvpb_search_countЁ6     Ё2     ЁW   Ёcount of searches that point to VPB     Ё
цддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
Ёvpb_first_accessЁ8     Ё1     ЁB   Ёinitialized to -1 to force a media      Ё
цддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
Ёvpb_signature   Ё9     Ё2     ЁW   ЁSignature specifying VPB validity       Ё
цддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
Ёvpb_flags       ЁB     Ё1     ЁB   Ёflags (bits 7,6,3-0 defined below)      Ё
цддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
Ёvpb_fMisc       ЁC     Ё1     ЁB   ЁMore flags (bit 7 defined below)        Ё
цддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
Ёvpb_FSC         ЁD     Ё4     ЁD   ЁPointer to the file system control blockЁ
Ё                Ё      Ё      Ё    Ё(FSC).                                  Ё
цддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
Ёvpb_fsd         Ё11    Ё40    ЁS   ЁFile system dependent section           Ё
цддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
Ёvpb_fsi         Ё51    Ё2C    ЁS   ЁFile system independent section         Ё
юддддддддддддддддаддддддаддддддаддддадддддддддддддддддддддддддддддддддддддддды
</PRE>

<P>
<B>vpb_signature</B> values
<PRE>здддддддддддбддддддддбддддддддддд©
ЁName       ЁBit MaskЁDescriptionЁ
цдддддддддддеддддддддеддддддддддд╢
ЁVPB_VALID  Ё0x444A  Ё           Ё
цдддддддддддеддддддддеддддддддддд╢
ЁVPB_INVALIDЁ0x4A47  Ё           Ё
юдддддддддддаддддддддаддддддддддды
</PRE>

<P>
<B>vpb_ID</B> values
<PRE>здддддддддддддддбддддддддбдддддддддддддддддддддддддддддддддддддддд©
ЁName           ЁBit MaskЁDescription                             Ё
цдддддддддддддддеддддддддедддддддддддддддддддддддддддддддддддддддд╢
ЁUNREAD_ID1     Ё0x4A52  ЁMedia unreadable                        Ё
цдддддддддддддддеддддддддедддддддддддддддддддддддддддддддддддддддд╢
ЁUNREAD_ID2     Ё0x534E  ЁMedia unreadable                        Ё
цдддддддддддддддеддддддддедддддддддддддддддддддддддддддддддддддддд╢
ЁDAMAGED_ID1    Ё0x0000  ЁMedia damaged but recognised by IFS     Ё
цдддддддддддддддеддддддддедддддддддддддддддддддддддддддддддддддддд╢
ЁDAMAGED_ID2    Ё0x0000  ЁMedia damaged but recognised by IFS     Ё
юдддддддддддддддаддддддддадддддддддддддддддддддддддддддддддддддддды
</PRE>

<P>
<B>vpb_falgs</B> flag definitions
<PRE>зддддддддддддддбддддддддбдддддддддддддддддддддддддддддддддддддддд©
ЁName          ЁBit MaskЁDescription                             Ё
цддддддддддддддеддддддддедддддддддддддддддддддддддддддддддддддддд╢
ЁVPBCHECK      Ё0x01    Ёa volume ID check is going on for this  Ё
Ё              Ё        ЁVPB                                     Ё
цддддддддддддддеддддддддедддддддддддддддддддддддддддддддддддддддд╢
ЁVPBNEWBOOT    Ё0x02    Ёnew format disk                         Ё
цддддддддддддддеддддддддедддддддддддддддддддддддддддддддддддддддд╢
ЁVPBMOUNT      Ё0x04    ЁMount in progress                       Ё
цддддддддддддддеддддддддедддддддддддддддддддддддддддддддддддддддд╢
ЁVPBFORMATMOUNTЁ0x08    ЁFormatMount done, not cleared           Ё
цддддддддддддддеддддддддедддддддддддддддддддддддддддддддддддддддд╢
ЁVPBINVALID    Ё0x10    Ёvolume formatted - old vpb invalid      Ё
цддддддддддддддеддддддддедддддддддддддддддддддддддддддддддддддддд╢
ЁVPBINITCACHE  Ё0x20    ЁInitializing Cache Data                 Ё
цддддддддддддддеддддддддедддддддддддддддддддддддддддддддддддддддд╢
ЁVPBSETVID     Ё0x40    Ёvid set is in progress                  Ё
цддддддддддддддеддддддддедддддддддддддддддддддддддддддддддддддддд╢
ЁVPBALLOCATE   Ё0x80    Ёcluster allocation in progress          Ё
юддддддддддддддаддддддддадддддддддддддддддддддддддддддддддддддддды
</PRE>

<P>
<B>vpb_fMisc</B> flag definitions
<PRE>зддддддддддддддддддддддбддддддддбдддддддддддддддддддддддддддддддддддддддд©
ЁName                  ЁBit MaskЁDescription                             Ё
цддддддддддддддддддддддеддддддддедддддддддддддддддддддддддддддддддддддддд╢
ЁVPB_FM_WRITEABLE      Ё0x01    ЁSet if we know volume can be written    Ё
цддддддддддддддддддддддеддддддддедддддддддддддддддддддддддддддддддддддддд╢
ЁVPB_FM_UNKNOWN        Ё0x02    ЁSet if no FATs and not claimed by FSD   Ё
цддддддддддддддддддддддеддддддддедддддддддддддддддддддддддддддддддддддддд╢
ЁVPB_REMOTE_DRIVE      Ё0x04    Ёset for attaches of remote drives       Ё
цддддддддддддддддддддддеддддддддедддддддддддддддддддддддддддддддддддддддд╢
ЁVPB_FM_ALLOCSHWAIT    Ё0x08    ЁSet if somebody wants alloc access so   Ё
Ё                      Ё        Ёthat they can get some disk clusters forЁ
Ё                      Ё        Ёthis volume                             Ё
цддддддддддддддддддддддеддддддддедддддддддддддддддддддддддддддддддддддддд╢
ЁVPB_FM_ALLOCEXWAIT    Ё0x10    Ёexcl.access wait for somebody who wants Ё
Ё                      Ё        Ёto release some clusters                Ё
цддддддддддддддддддддддеддддддддедддддддддддддддддддддддддддддддддддддддд╢
ЁVPB_FM_INITCACHE_ERRORЁ0x20    ЁError initializing cache                Ё
цддддддддддддддддддддддеддддддддедддддддддддддддддддддддддддддддддддддддд╢
ЁVPB_FM_INITCACHE_DONE Ё0x40    Ё                                        Ё
юддддддддддддддддддддддаддддддддадддддддддддддддддддддддддддддддддддддддды
</PRE>

<P>
<U><I>vpbfsd</I></U>
<PRE>зддддддддддддбддддддбддддддбддддбдддддддддддд©
Ё<I>Field Name</I>  Ё<I>Offset</I>Ё<I>Length</I>Ё<I>Type</I>Ё<I>Description</I> Ё
цддддддддддддеддддддеддддддеддддедддддддддддд╢
Ёvpd_work<!-- entering slot 3502 -->[64]Ё0     Ё40    ЁB   Ё            Ё
цддддддддддддеддддддеддддддеддддедддддддддддд╢
цддддддддддддеддддддеддддддеддддедддддддддддд╢
Ё            Ё      Ё      ЁB   Ё            Ё
юддддддддддддаддддддаддддддаддддадддддддддддды
</PRE>

<P>
<U><I>vpbfsi</I></U>
<PRE>зддддддддддддбддддддбддддддбддддбдддддддддддддддддддддддддддддддддддддддд©
Ё<I>Field Name</I>  Ё<I>Offset</I>Ё<I>Length</I>Ё<I>Type</I>Ё<I>Description</I>                             Ё
цддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
Ёvpi_ID      Ё0     Ё4     ЁD   Ё32 bit unique ID of file (See           Ё
Ё            Ё      Ё      Ё    ЁUNREAD_IDx, DAMAGED_IDx )               Ё
цддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
Ёvpi_pDPB    Ё4     Ё4     ЁD   ЁDrive volume is in                      Ё
цддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
Ёvpi_cbSectorЁ8     Ё2     ЁW   ЁSize of physical sector in bytes        Ё
цддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
Ёvpi_totsec  ЁA     Ё4     ЁD   ЁTotal number of sectors on medium       Ё
цддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
Ёvpi_trksec  ЁE     Ё2     ЁW   ЁSectors per track on medium             Ё
цддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
Ёvpi_nhead   Ё10    Ё2     ЁW   ЁNumber of heads in device               Ё
цддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
Ёvpi_text[12]Ё12    ЁC     ЁB   Ё                                        Ё
цддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
Ёvpi_pDCS    Ё1E    Ё4     ЁD   Ёdevice capability struc                 Ё
цддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
Ёvpi_pVCS    Ё22    Ё4     ЁD   Ёvolume characteristic struc             Ё
цддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
Ёvpi_drive   Ё26    Ё1     ЁB   Ёdrive (0=A)                             Ё
цддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
Ёvpi_unit    Ё27    Ё1     ЁB   Ёunit                                    Ё
цддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
Ёvpi_flags   Ё28    Ё2     ЁW   Ёflags for memory restrictions           Ё
цддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
юддддддддддддаддддддаддддддаддддадддддддддддддддддддддддддддддддддддддддды
</PRE>

<P>
<U><I>vpdFATFS</I></U>
<PRE>зддддддддддддддддддддддбддддддбддддддбддддбдддддддддддддддддддддддддддддддддддддддд©
Ё<I>Field Name</I>            Ё<I>Offset</I>Ё<I>Length</I>Ё<I>Type</I>Ё<I>Description</I>                             Ё
цддддддддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
ЁvpdFAT_cluster_mask   Ё0     Ё1     ЁB   ЁSectors/cluster - 1                     Ё
цддддддддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
ЁvpdFAT_cluster_shift  Ё1     Ё1     ЁB   ЁLog2 of sectors/cluster                 Ё
цддддддддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
ЁvpdFAT_first_FAT      Ё2     Ё2     ЁW   ЁStarting record of FATs                 Ё
цддддддддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
ЁvpdFAT_FAT_count      Ё4     Ё1     ЁB   ЁNumber of FATs for this drive           Ё
цддддддддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
ЁvpdFAT_root_entries   Ё5     Ё2     ЁW   ЁNumber of directory entries             Ё
цддддддддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
ЁvpdFAT_first_sector   Ё7     Ё4     ЁD   ЁFirst sector of first cluster           Ё
цддддддддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
ЁvpdFAT_max_cluster    ЁB     Ё2     ЁW   ЁNumber of clusters on drive + 1         Ё
цддддддддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
ЁvpdFAT_FAT_size       ЁD     Ё2     ЁW   ЁNumber of records occupied by FAT       Ё
цддддддддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
ЁvpdFAT_dir_sector     ЁF     Ё4     ЁD   ЁStarting record of directory            Ё
цддддддддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
ЁvpdFAT_media          Ё13    Ё1     ЁB   ЁMedia byte (duplicate of VPB)           Ё
цддддддддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
ЁvpdFAT_next_free      Ё14    Ё2     ЁW   ЁCluster # of last allocated cluster     Ё
цддддддддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
ЁvpdFAT_free_cnt       Ё16    Ё2     ЁW   ЁCount of free clusters, -1 if unknown   Ё
цддддддддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
ЁvpdFAT_FATentrysize   Ё18    Ё1     ЁB   Ё12 or 16 - can you guess why ??? @@     Ё
цддддддддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
ЁvpdFAT_IDsector       Ё19    Ё4     ЁD   Ёsector number of ID                     Ё
цддддддддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
ЁvpdFAT_minEOF         Ё1D    Ё2     ЁW   Ёminimum EOF cluster value: 12-bit -&gt;    Ё
Ё                      Ё      Ё      Ё    ЁFF8, 16-bit -&gt; FFF8                     Ё
цддддддддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
ЁvpdFAT_access         Ё1F    Ё2     ЁW   Ёwhether rmdir XOR mov dir XOR (chdir    Ё
Ё                      Ё      Ё      Ё    Ёmkdir OR mov file OR create)* has accessЁ
Ё                      Ё      Ё      Ё    Ёto volume                               Ё
цддддддддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
ЁvpdFAT_accwait        Ё21    Ё2     ЁW   Ёwho's waiting for access                Ё
цддддддддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
ЁvpdFAT_alloc          Ё23    Ё2     ЁW   Ёwhether disk cluster alloc OR release   Ё
цддддддддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
ЁvpdFAT_eaflags        Ё25    Ё2     ЁW   Ёflags for EA usage                      Ё
цддддддддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
ЁvpdFAT_eareaders      Ё27    Ё2     ЁW   Ёnumber of threads with pending reads    Ё
цддддддддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
ЁvpdFAT_eawaiters      Ё29    Ё2     ЁW   Ёnumber of threads waiting to run        Ё
цддддддддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
ЁvpdFAT_eahandles      Ё2B    Ё2     ЁW   Ёnumber of handles in EAOffTable         Ё
цддддддддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
ЁvpdFAT_pEASFT         Ё2D    Ё4     ЁD   ЁSFT for "EA DATA. SF"                   Ё
цддддддддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
ЁvpdFAT_pBadSector     Ё31    Ё4     ЁD   ЁPtr for Bad sectors data                Ё
цддддддддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
ЁvpdFAT_pClusBitMap    Ё35    Ё4     ЁD   ЁPtr to free cluster bit map             Ё
цддддддддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
ЁvpdFAT_pNextFreeBitMapЁ39    Ё4     ЁD   ЁPtr to next free bit map position       Ё
цддддддддддддддддддддддеддддддеддддддеддддедддддддддддддддддддддддддддддддддддддддд╢
ЁvpdFAT_cNextFreeBitMapЁ3D    Ё2     ЁW   ЁCount of dwords remaining in bit map    Ё
юддддддддддддддддддддддаддддддаддддддаддддадддддддддддддддддддддддддддддддддддддддды
</PRE>

<P>
<B>vpdFAT_eaflags</B> flag definitiions
<PRE>зддддддддддддддбддддддддбдддддддддддддддддддддддддддддддддд©
ЁName          ЁBit MaskЁDescription                       Ё
цддддддддддддддеддддддддедддддддддддддддддддддддддддддддддд╢
Ёeavpb_fileopenЁ0x0001  Ёthe EA file on this volume is openЁ
цддддддддддддддеддддддддедддддддддддддддддддддддддддддддддд╢
Ёeavpb_changingЁ<!-- entering slot 3503 -->0x0002  Ёthe EA file is changing           Ё
цддддддддддддддеддддддддедддддддддддддддддддддддддддддддддд╢
Ёeavpb_dooropenЁ0x0004  Ёthe drive door has been opened    Ё
юддддддддддддддаддддддддадддддддддддддддддддддддддддддддддды
</PRE>


<P><HR>

<A HREF="3215_L3_RecordLockRecordforO.html">[Back: Record Lock Record for OS/2 Warp V4.0 and OS/2 Warp V3.0]</A> <BR>
<A HREF="3217_L3_DriveParameterBlockf.html">[Next: Drive Parameter Block for OS/2 Warp V4.0 and OS/2 Warp V3.0]</A> 
</BODY>
</HTML>
