<HTML>
<HEAD>
<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="TEXT/HTML; CHARSET=UTF-8">
<TITLE>Block Management Package Header (VMBH) for OS/2 Warp V4.0 and OS/2 Warp V3.0</TITLE>
</HEAD>
<BODY>
<H1>Block Management Package Header (VMBH) for OS/2 Warp V4.0 and OS/2 Warp V3.0</H1><!-- entering slot 3361 -->
<P>
The <A HREF="3324_L0_.html">BMP</A> is a generalised facility used to manage
tables of fixed length entities. The BMP consists of a header followed by
the table it manages. The use of the BMP is many and varied, but almost
always occurs where an expandable table of fixed length entries is required
by the system.
<P>
<!-- lm: 0x2 1 -->
<UL>
<P>
<B>Pointers</B><!-- lm: 0x11 11 -->
<UL> The<B> VMBH</B> prefixes tables,
which are pointed to by:<!-- lm: 0x2 11 -->
<P>
<B><LI>parVMOne</B><!-- lm: 0x2 36 -->
<UL> The table of VM Arena Records
(<B>VMARs</B>).<!-- lm: 0x2 11 -->
</UL><B> _pobVMOne</B><!-- lm: 0x2 36 -->
<UL> The
table of VM Object Records (<B>VMOBs</B>).<!-- lm: 0x2 11 -->
</UL><B> _palVMAliases</B>.
<!-- lm: 0x2 36 -->
<UL>The table of VM Alias Records (<B>VMALs</B>).<!-- lm: 0x2 11 -->
</UL><B> _pcoVMOne
</B><!-- lm: 0x2 36 -->
<UL>The table of VM Context Records (<B>VMCO</B>).
<!-- lm: 0x2 11 -->
</UL><B>s2BmpSel</B><!-- lm: 0x2 36 -->
<UL> BMP Selector
for Device Driver Strategy 2 Request Packets.<!-- lm: 0x2 11 -->
</UL><B> pFSLIST_BMP
</B><!-- lm: 0x2 36 -->
<UL>ListIO BMP segment.<!-- lm: 0x2 11 -->
</UL><B> NmpBmpSel
</B><!-- lm: 0x2 36 -->
<UL>BMP Selector for Named Pipe NP Structures.<!-- lm: 0x2 11 -->
</UL><B> _pVPB_BMP
</B><!-- lm: 0x2 36 -->
<UL>Volume Parameters Block BMP.<!-- lm: 0x2 11 -->
</UL><B> _pFPEMVMBH
</B><!-- lm: 0x2 36 -->
<UL>Floating point emulator BMP.<!-- lm: 0x2 11 -->
</UL><B> _pkshdVMDescs
</B><!-- lm: 0x2 36 -->
<UL>BMP for Swappable Kernel Heap Descriptors (<B>VMKSHD</B>).
<!-- lm: 0x2 11 -->
</UL><B>pslhLockHandles</B><!-- lm: 0x2 36 -->
<UL> BMP
for Memory Lock Handles.<!-- lm: 0x2 11 -->
</UL><B> _pbhPvwRPD</B><!-- lm: 0x2 36 -->
<UL> PerfView
counters<!-- lm: 0x2 11 -->
</UL><B> _paPTDA</B><!-- lm: 0x2 36 -->
<UL> The
array of<B> PTDA</B> structures.<!-- lm: 0x2 11 -->
</UL><B> _paTCB</B><!-- lm: 0x2 36 -->
<UL> The
array of<B> TCB</B> structures.<!-- lm: 0x2 11 --> <!-- lm: 0x2 1 -->
</UL><B> Locations
</B><!-- lm: 0x11 11 -->
<UL>Many. <!-- lm: 0x2 1 -->
</UL><B> VM Owner
</B><!-- lm: 0x11 11 -->
<UL>The VMBH is usualy part of the the object from
which the BMP is allocted, thus adopts the object id of the table.<!-- lm: 0x2 1 -->
</UL> 
<P>
<B><A HREF="3252_L0_.html">Format</A></B>
<P>
<B>VMBH</B> BMP Header Structure.
<PRE>┌────────────────┬──────┬──────┬────┬────────────────────────────────────────┐│<I>Field Name</I>      │<I>Offset</I>│<I>Length</I>│<I>Type</I>│<I>Description</I>                             │
├────────────────┼──────┼──────┼────┼────────────────────────────────────────┤
│bh_pbFreeHead   │+0    │4     │D   │Free list pointer                       │
├────────────────┼──────┼──────┼────┼────────────────────────────────────────┤
│bh_pbEndBlocks  │+4    │4     │D   │End of valid blocks                     │
├────────────────┼──────┼──────┼────┼────────────────────────────────────────┤
│bh_pbEndVirt    │+8    │4     │D   │End of virtual memory                   │
├────────────────┼──────┼──────┼────┼────────────────────────────────────────┤
│bh_pbLastBusy   │+C    │4     │D   │Pointer to last busy block              │
├────────────────┼──────┼──────┼────┼────────────────────────────────────────┤
│bh_pfnisbusy    │+10   │4     │D   │Busy block identifier function          │
├────────────────┼──────┼──────┼────┼────────────────────────────────────────┤
│bh_filler       │+14   │4     │D   │Paragraph boundary filler               │
├────────────────┼──────┼──────┼────┼────────────────────────────────────────┤
│bh_flpgtype     │+18   │4     │D   │New page type flags                     │
├────────────────┼──────┼──────┼────┼────────────────────────────────────────┤
│bh_cbPerBlock   │+1c   │2     │W   │Size of a block in bytes                │
├────────────────┼──────┼──────┼────┼────────────────────────────────────────┤
│bh_hob          │+1e   │2     │W   │Object record handle                    │
└────────────────┴──────┴──────┴────┴────────────────────────────────────────┘
</PRE>
  
<P>
<B>bh_flpgtype</B> flag definitions.
<PRE>┌──────────────┬──────────┬─────────────────────────────────┐
│Name          │Bit Mask  │Description                      │
├──────────────┼──────────┼─────────────────────────────────┤
│PG_CONTIG     │0x00000001│contiguous physical memory       │
├──────────────┼──────────┼─────────────────────────────────┤
│PG_NOINCR     │0x00000001│don't increment physical addrs   │
├──────────────┼──────────┼─────────────────────────────────┤
│PG_W          │0x00000002│Writable - value from pte        │
├──────────────┼──────────┼─────────────────────────────────┤
│PG_U          │0x00000004│user mode accessible - from pte  │
├──────────────┼──────────┼─────────────────────────────────┤
│PG_X          │0x00000008│eXecutable                       │
├──────────────┼──────────┼─────────────────────────────────┤
│PG_R          │0x00000010│Readable                         │
├──────────────┼──────────┼─────────────────────────────────┤
│PG_1M         │0x00000020│must reside below 1 meg physical │
├──────────────┼──────────┼─────────────────────────────────┤
│PG_GUARD      │0x00000040│guard page - from pte            │
├──────────────┼──────────┼─────────────────────────────────┤
│PG_16M        │0x00000040│must reside below 16 meg physical│
├──────────────┼──────────┼─────────────────────────────────┤
│PG_ZEROFILL   │0x00000080│zero initialize <!-- entering slot 3362 -->pages            │
├──────────────┼──────────┼─────────────────────────────────┤
│PG_SWAPONWRITE│0x00000100│value from vp                    │
├──────────────┼──────────┼─────────────────────────────────┤
│PG_UVIRT      │0x00000200│value from pte                   │
├──────────────┼──────────┼─────────────────────────────────┤
│PG_RESIDENT   │0x00000400│value from pte                   │
├──────────────┼──────────┼─────────────────────────────────┤
│PG_DISCARDABLE│0x00000800│value from vp                    │
└──────────────┴──────────┴─────────────────────────────────┘
</PRE>


<P><HR>

<A HREF="3120_L3_SystemAnchorSegmentS.html">[Back: System Anchor Segment (SAS) for OS/2 Warp V4.0 and OS/2 Warp V3.0]</A> <BR>
<A HREF="3122_L3_RecordManagementPack.html">[Next: Record Management Package (RMP) for OS/2 Warp V4.0 and OS/2 Warp V3.0]</A> 
</BODY>
</HTML>
