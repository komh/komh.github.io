<HTML>
<HEAD>
<TITLE>File System Buffer for OS/2 Warp V4.0 and OS/2 Warp V3.0</TITLE>
</HEAD>
<BODY>
<H1>File System Buffer for OS/2 Warp V4.0 and OS/2 Warp V3.0</H1><!-- entering slot 3506 --> 
<P>
<!-- lm: 0x2 1 -->
<UL>
<P>
<B>Pointers</B><!-- lm: 0x11 11 -->
<UL> SAS field<B> SAS_file_Buffers</B> contains
the selector for the file system buffer segment.
<P>
<B>GDT_Buffers</B> locates the GDT descriptor for the BUFSEG segment. <!-- lm: 0x2 1 -->
</UL><B> Locations
</B><!-- lm: 0x11 11 -->
<UL>BUFSEG segment is dynamically allocated from
the kernel resident heap. <!-- lm: 0x2 1 -->
</UL><B> VM Owner</B><!-- lm: 0x11 11 -->
<UL><B> fsbuf
(0xff93)</B>.<!-- lm: 0x2 1 -->
</UL> 
<P>
<B><A HREF="3252_L0_.html">Format</A></B> 
<P>
<U><I>BUFSEG</I></U>
<PRE>旼컴컴컴컴컴컴컴컫컴컴컴쩡컴컴컫컴컴쩡컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴커<I>Field Name</I>      <I>Offset</I><I>Length</I><I>Type</I><I>Description</I>                             
쳐컴컴컴컴컴컴컴컵컴컴컴탠컴컴컵컴컴탠컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴캑
쿫s_MRUHead      +0    2     쿥   쿓ead of MRU buffer list (LRU tail)      
쳐컴컴컴컴컴컴컴컵컴컴컴탠컴컴컵컴컴탠컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴캑
쿫s_MRUTail      +2    2     쿥   쿟ail of MRU buffer list (LRU head)      
쳐컴컴컴컴컴컴컴컵컴컴컴탠컴컴컵컴컴탠컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴캑
쿫s_FreeHead     +4    2     쿥   쿓ead of Free buffer list                
쳐컴컴컴컴컴컴컴컵컴컴컴탠컴컴컵컴컴탠컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴캑
쿫s_Handle       +6    2     쿥   쿓andle for virtual memory manager       
쳐컴컴컴컴컴컴컴컵컴컴컴탠컴컴컵컴컴탠컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴캑
쿫s_nBuffers     +8    2     쿥   쿙umber of buffers in segment            
쳐컴컴컴컴컴컴컴컵컴컴컴탠컴컴컵컴컴탠컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴캑
쿫s_buffsize     +a    2     쿥   쿞ize of buffer+header, in bytes.        
쳐컴컴컴컴컴컴컴컵컴컴컴탠컴컴컵컴컴탠컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴캑
쿫s_seglimit     +c    2     쿥   쿗imit for entire buffer segment.        
쳐컴컴컴컴컴컴컴컵컴컴컴탠컴컴컵컴컴탠컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴캑
쿫s_pStats       +e    2     쿥   쿚ffset of statistics block (for PROFILE)
쳐컴컴컴컴컴컴컴컵컴컴컴탠컴컴컵컴컴탠컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴캑
쿫s_offRemMed    +10   2     쿥   쿘inimum "legal" offset of buffer for    
                                퀁emovable media                         
쳐컴컴컴컴컴컴컴컵컴컴컴탠컴컴컵컴컴탠컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴캑
쿫s_MaxSec       +12   2     쿥   쿘aximum sector size for block device    
                                쿭rivers                                 
쳐컴컴컴컴컴컴컴컵컴컴컴탠컴컴컵컴컴탠컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴캑
쿫s_BigBufBase   +14   2     쿥   쿍ase of big buffers pool                
쳐컴컴컴컴컴컴컴컵컴컴컴탠컴컴컵컴컴탠컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴캑
쿫s_BigBufMap    +16   2     쿥   쿍ig buffers usage bit map (bit0 - Buf0) 
쳐컴컴컴컴컴컴컴컵컴컴컴탠컴컴컵컴컴탠컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴캑
쿫s_physBufSeg   +18   4     쿏   쿍uffer segment Physical Address         
읕컴컴컴컴컴컴컴컨컴컴컴좔컴컴컨컴컴좔컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴켸
</PRE>
 
<P>
<U><I>BUFFINFO</I></U>
<PRE>旼컴컴컴컴컴컴컴컫컴컴컴쩡컴컴컫컴컴쩡컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴커
<I>Field Name</I>      <I>Offset</I><I>Length</I><I>Type</I><I>Description</I>                             
쳐컴컴컴컴컴컴컴컵컴컴컴탠컴컴컵컴컴탠컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴캑
쿫uf_next        +0    2     쿥   쿛ointer to next buffer in list (-1 =    
                                쿮nd)                                    
쳐컴컴컴컴컴컴컴컵컴컴컴탠컴컴컵컴컴탠컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴캑
쿫uf_prev        +2    2     쿥   쿛ointer to previous buffer in list (-1 =
                                쿮nd)                                    
쳐컴컴컴컴컴컴컴컵컴컴컴탠컴컴컵컴컴탠컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴캑
쿫uf_freeLink    +4    2     쿥   쿛ointer to next free buffer (-1 = end)  
쳐컴컴컴컴컴컴컴컵컴컴컴탠컴컴컵컴컴탠컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴캑
쿫uf_hVPB        +6    1     쿥   퀂erial number of volume                 
쳐컴컴컴컴컴컴컴컵컴컴컴탠컴컴컵컴컴탠컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴캑
쿫uf_sector      +8    4     쿏   쿞ector number of buffer                 
쳐컴컴컴컴컴컴컴컵컴컴컴탠컴컴컵컴컴탠컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴캑
쿫uf_wrtcnt      +c    1     쿍   쿑or FAT sectors, # times sector written 
                                쿽ut                                     
쳐컴컴컴컴컴컴컴컵컴컴컴탠컴컴컵컴컴탠컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴캑
쿫uf_wrtcntinc   +d    2     쿥   쿑or FAT sectors, # sectors between each 
                                퀇rite                                   
쳐컴컴컴컴컴컴컴컵컴컴컴탠컴컴컵컴컴탠컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴캑
쿫uf_flags       +f    1     쿍   쿑lags                                   
쳐컴컴컴컴컴컴컴컵컴컴컴탠컴컴컵컴컴탠컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴캑
쿫uf_tid         +10   2     쿥   퀃hread ID of buffer owner               
쳐컴컴컴컴컴컴컴컵컴컴컴탠컴컴컵컴컴탠컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴캑
쿫uf_refcnt      +12   2     쿥   쿻umber of threads using buffer for read 
쳐컴컴컴컴컴컴컴컵컴컴컴탠컴컴컵컴컴탠컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴캑
쿫uf_fill        +14   2     쿥   퀁andom debugging information            
쳐컴컴컴컴컴컴컴컵컴컴컴탠컴컴컵컴컴탠컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴캑
쿫uf_pad         +16   2     쿥   쿑orce dword alignment.                  
읕컴컴컴컴컴컴컴컨컴컴컴좔컴컴컨컴컴좔컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴켸
</PRE>
 
<P>
<B>buf_falgs</B>  flag definitions:
<PRE>旼컴컴컴컴컴컴컴컴컴컫컴컴컴컴쩡컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴커
쿙ame                쿍it Mask쿏escription                             
쳐컴컴컴컴컴컴컴컴컴컵컴컴컴컴탠컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴캑
쿍UF_DIRTY           0x80    쿍it 7 = 1 if buffer dirty               
쳐컴컴컴컴컴컴컴컴컴컵컴컴컴컴탠컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴캑
쿍UF_VISIT           0x40    쿍it 6 = 1 if buffer seen in search      
쳐컴컴컴컴컴컴컴컴컴컵컴컴컴컴탠컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴캑
쿍UF_WANT            0x20    쿍it 5 = 1 if process waiting for buffer 
쳐컴컴컴컴컴컴컴컴컴컵컴컴컴컴탠컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴캑
쿍UF_BUSY            0x10    쿍it 4 = 1 if in use by process          
쳐컴컴컴컴컴컴컴컴컴컵컴컴컴컴탠컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴캑
쿍UF_ISDATA          0x08    쿍it 3 = 1 if buffer is DATA             
쳐컴컴컴컴컴컴컴컴컴컵컴컴컴컴탠컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴캑
쿍UF_ISDIR           0x04    쿍it 2 = 1 if buffer is DIR              
쳐컴컴컴컴컴컴컴컴컴컵컴컴컴컴탠컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴캑
쿍UF_ISFAT           0x02    쿍it 1 = 1 if buffer is FAT              
쳐컴컴컴컴컴컴컴컴컴컵컴컴컴컴탠컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴캑
쿍UF_ATTEMPTING_READ 0x01    쿍it 0 = 1 if buffer is in swapper pool  
읕컴컴컴컴컴컴컴컴컴컨컴컴컴컴좔컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴켸
</PRE>


<P><HR>

<A HREF="3218_L3_CurrentDirectoryStru.html">[Back: Current Directory Structure for OS/2 Warp V4.0 and OS/2 Warp V3.0]</A> <BR>
<A HREF="3220_L3_NamedPipeStructuresf.html">[Next: Named Pipe Structures for OS/2 Warp V4.0 and OS/2 Warp V3.0]</A> 
</BODY>
</HTML>
