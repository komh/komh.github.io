<HTML>
<HEAD>
<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="TEXT/HTML; CHARSET=UTF-8">
<TITLE>File Naming and Location</TITLE>
</HEAD>
<BODY>
<H1>File Naming and Location</H1><!-- entering slot 574 -->The TDF file name is the same as the module to
be traced, but has a file extension of "TDF". The TFF has a name of the
form "TRC00xx.TFF" where xx is the major code, for example, a module with
major code 0xC2 will generate a TFF with the name "TRC00C2.TFF". This naming
convention is used to allow TRACEFMT to dynamically generate the TFF name
given only the major code.
<P>
TRCUST can be invoked to process a TSF or to combine several TFF files into
a single TFF. For processing a TSF, TRCUST is given the name of a TSF, and
optionally:<!-- lm: 0x2 3 -->
<UL>
<P>
<LI><!-- lm: 0x2 6 -->the desired name of the resulting TDF<!-- lm: 0x2 3 -->
<P>
<LI><!-- lm: 0x2 6 -->the MAP file name<!-- lm: 0x2 3 -->
<P>
<LI><!-- lm: 0x2 6 -->the error message level<!-- lm: 0x2 1 -->
</UL>
<P>
TRCUST will store the TSF tracepoint formatting specifications in the TFF
file and if the tracepoint specified was not for a static tracepoint, the
TSF tracepoint definition will be converted into the format required by
the Trace Utility and stored in the TDF file. On errors, TRCUST will display
appropriate messages, skip any tracepoint with errors in its definition,
and continue processing the next tracepoint definition.
<P>
For combining TFF files that use the same major code, TRCUST is given the
name of the file containing the TFF filenames to combine and the name of
the file to contain the combined trace format statements.
<P>
TRCUST will issue an error message and abort processing under the following
conditions:<!-- lm: 0x2 3 -->
<UL>
<P>
<LI><!-- lm: 0x2 6 -->the TSF cannot be opened<!-- lm: 0x2 3 -->
<P>
<LI><!-- lm: 0x2 6 -->when combining TFF files, if any TFF input files cannot
be read or if all TFF input files do not use the same major code<!-- lm: 0x2 3 -->
<P>
<LI><!-- lm: 0x2 6 -->when defining dynamic tracepoints, if the executable
module to contain the tracepoints cannot be read<!-- lm: 0x2 3 -->
<P>
<LI><!-- lm: 0x2 6 -->the TDF, or TFF files cannot be written to<!-- lm: 0x2 3 -->
<P>
<LI><!-- lm: 0x2 6 -->an error in the header definition in the TSF<!-- lm: 0x2 3 -->
<P>
<LI><!-- lm: 0x2 6 -->a missing ending quote in the TSF<!-- lm: 0x2 1 -->
</UL>
<P>
<B>Note: </B> TRCUST always returns 0 so that, when invoking it from a makefile,
processing of the rest of the makefile can continue if TRCUST aborts.
<P>
Combine TFF files when several modules that use dynamic tracing use the
same major code.  The Trace Formatter can only use one TFF file per major
code to get formatting information from. After the TSF file for each module
is run through TRCUST to produce a TDF and TFF file, TRCUST can be invoked
again, this time using the combine TFF files option and a file that only
contains the paths to all the TFF files using the same major code. TRCUST
will read all the TFF files.  If all TFF files don't use the same major
code, TRCUST will issue an error message and abort. TRCUST will read each
trace format record from the TFF files and write them (in ascending order
according to minor code) to the destination TFF file given.

<P><HR>

<A HREF="396_L2_Overview.html">[Back: Overview]</A> <BR>
<A HREF="398_L3_InvokingtheTraceCust.html">[Next: Invoking the Trace Customizer]</A> 
</BODY>
</HTML>
