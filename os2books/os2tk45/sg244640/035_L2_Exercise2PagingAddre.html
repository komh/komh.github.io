<HTML>
<HEAD>
<TITLE>Exercise 2: Paging, Addresses, Data</TITLE>
</HEAD>
<BODY>
<H1>Exercise 2: Paging, Addresses, Data</H1><!-- entering slot 46 -->
<P>
Objectives:<!-- lm: 0x2 2 -->
<UL>
<P>
 <LI><LI><!-- lm: 0x2 6 -->Reinforce the knowlege from exercise 1<!-- lm: 0x2 2 -->
<P>
 <LI><LI><!-- lm: 0x2 6 -->Learn how to display page table data<!-- lm: 0x2 2 -->
<P>
 <LI><LI><!-- lm: 0x2 6 -->Learn how to convert a logical address to a linear
address<!-- lm: 0x2 2 -->
<P>
 <LI><LI><!-- lm: 0x2 6 -->Learn how to convert a linear address to a physical
address<!-- lm: 0x2 2 -->
<P>
 <LI><LI><!-- lm: 0x2 6 -->Learn how to display storage as ASCII, bytes,
words, and doublewords.<!-- lm: 0x2 1 -->
</UL>
<P>
Startup directions:<!-- lm: 0x2 2 -->
<UL>
<P>
 <LI><LI><!-- lm: 0x2 6 -->Start the dump formatter by typing  DF_RET ..\DUMPS.162\DUMP01.DMP
<!-- lm: 0x2 2 -->
<P>
 <LI><LI><!-- lm: 0x2 6 -->You should see the standard startup messages.
<!-- lm: 0x2 2 -->
<P>
 <LI><LI><!-- lm: 0x2 6 -->The initial register display is what the application
registers were at the time the application (ring 3) program trapped.<!-- lm: 0x2 2 -->
<P>
 <LI><LI><!-- lm: 0x2 6 -->You can see these at any time by entering the
".R" command.<!-- lm: 0x2 2 -->
<P>
 <LI><LI><!-- lm: 0x2 6 -->Use the dump formatter to look at the dump and
answer these questions. The dump formatter is NOT case sensitive.<!-- lm: 0x2 1 -->
</UL>
<P>
<B>Note: </B> Paging data may be displayed using the "DP" command, followed
by the address.
<P>
<B>Note: </B> The dump process DESTROYS the first entry of the page directory.
You will get quite confused if you try to follow the hardware method to
look at paging information for addresses 0 - 3FFFFF. If you must, use the
'.N' command to find "savepage", which will tell you the physical address
of the page table for that address range.
<P>
This may well be the last time you use a physical address in an OS/2 debugging
session. With the notable exceptions of physical memory management and physical
device drivers, OS/2 is almost completely unaware of physical addresses.
 The 32-bit virtual address, also called a linear address, and a 'flat'
address, is what is used in general throughout OS/2.
<P>
Assuming these registers, answer the following questions:
<PRE>eax=0000c8cf ebx=00002910 ecx=000000df edx=00000000 esi=00000030 edi=00000060
eip=000000be esp=000014be ebp=000014e6 iopl=2 rf -- -- nv up ei pl zr na pe nc
cs=000f ss=001f ds=001f es=0017 fs=150b gs=0000  cr2=00000000  cr3=001a7000
</PRE>
<!-- lm: 0x2 2 -->
<UL>
<P>
 <LI><LI><!-- lm: 0x2 6 -->What are the base and limit fields for selector
000F?  (the base is the linear address...) <!-- lm: 0x2 2 -->
<P>
 <LI><LI><!-- lm: 0x2 6 -->How many 4k pages are in this segment? Hint:
Look closely at the limit field. <!-- lm: 0x2 2 -->
<P>
 <LI><LI><!-- lm: 0x2 6 -->How many physical pages are allocated for the
virtual memory segment starting at F:0?<!-- lm: 0x2 1 -->
</UL> Hint:  DP
0F:0   or   DP %10000 <!-- lm: 0x2 2 -->
<UL>
<P>
 <LI><LI><!-- lm: 0x2 6 -->Why are the above two answers different? <!-- lm: 0x2 2 -->
<P>
 <LI><LI><!-- lm: 0x2 6 -->What is the physical address of the data at F:0?
<!-- lm: 0x2 1 -->
</UL>Observation:  You now have three ways to address
the data.<!-- lm: 0x2 7 -->
<UL>
<P>
 a.<!-- lm: 0x2 11 -->
<UL>Real or V86 (&amp;selector:offset)<!-- lm: 0x2 7 -->
</UL>
b.<!-- lm: 0x2 11 -->
<UL>Logical   (#selector:offset)<!-- lm: 0x2 7 -->
</UL>
c.<!-- lm: 0x2 11 -->
<UL>Linear    (%address)<!-- lm: 0x2 7 -->
</UL> <!-- entering slot 47 --> d.<!-- lm: 0x2 11 -->
<UL>Physical
  (%%address)<!-- lm: 0x2 6 --><!-- lm: 0x2 1 -->
</UL> We will now display
the same storage many ways, to confirm we know how. <!-- lm: 0x2 2 -->
<UL>
<P>
 <LI><LI><!-- lm: 0x2 6 -->What is the command to display the storage at
SS:BP in words using a logical address? <!-- lm: 0x2 2 -->
<P>
 <LI><LI><!-- lm: 0x2 6 -->What is the command to display the storage at
SS:BP in words using a linear address? <!-- lm: 0x2 2 -->
<P>
 <LI><LI><!-- lm: 0x2 6 -->What is the command to display the storage at
SS:BP in words using a physical address? 
<P>
For each of the following, study the results until you understand.<!-- lm: 0x2 2 -->
<P>
 <LI><LI><!-- lm: 0x2 6 -->Display the data at 7:0 as bytes, and words.
 <!-- lm: 0x2 2 -->
<P>
10.<!-- lm: 0x2 6 -->
<UL>Display the data at 7:1 as bytes and words. <!-- lm: 0x2 2 -->
</UL> 11.<!-- lm: 0x2 6 -->
<UL>Display
the data at 7:0 and 7:1 as words. <!-- lm: 0x2 2 -->
</UL> 12.<!-- lm: 0x2 6 -->
<UL>Display
the data at 7:0 as words and doublewords. <!-- lm: 0x2 2 -->
</UL> 13.<!-- lm: 0x2 6 -->
<UL>Display
the data at 1F:15C6 as bytes and ASCII. Also look at 1F:15DA as bytes and
ASCII.<!-- lm: 0x2 1 -->
</UL>

<P><HR>

<A HREF="034_L2_DataFormatinStorage.html">[Back: Data Format in Storage]</A> <BR>
<A HREF="036_L2_InstructionSet.html">[Next: Instruction Set]</A> 
</BODY>
</HTML>
