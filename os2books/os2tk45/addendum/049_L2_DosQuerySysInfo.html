<HTML>
<HEAD>
<TITLE>DosQuerySysInfo</TITLE>
</HEAD>
<BODY>
<H1>DosQuerySysInfo</H1><!-- entering slot 80 -->
<P>
<B>Purpose</B>
<P>
DosQuerySysInfo returns values of static system variables.
<P>
<B>Syntax</B>
<PRE>#define INCL DOSMISC
#include   os2.h 

</PRE>
<!-- lm: 0x2 1 -->
<UL>
<P>
APIRET DosQuerySysInfo<!-- lm: 0x2 11 -->
<UL><B> (ULONG iStart, ULONG iLast,
PVOID pBuf, ULONG cbBuf)</B><!-- lm: 0x2 1 -->
</UL>
<P>
<B>Parameters</B><!-- lm: 0x2 1 -->
<P>
iStart  ULONG)  input<!-- lm: 0x11 11 -->
<UL> Ordinal of the first system
variable to return.<!-- lm: 0x2 1 -->
</UL> iLast  ULONG)  input<!-- lm: 0x11 11 -->
<UL> Ordinal
of the last system variable to return.<!-- lm: 0x2 1 -->
</UL> pBuf  PVOID)
 output<!-- lm: 0x11 11 -->
<UL> Address of the data buffer where the system
returns the variable values.<!-- lm: 0x2 1 -->
</UL> cbBuf  ULONG)  input
<!-- lm: 0x11 11 -->
<UL>Length, in bytes, of the data buffer.<!-- lm: 0x2 1 -->
</UL>
<P>
<B>Returns</B><!-- lm: 0x2 1 -->
<P>
ulrc  APIRET)  returns<!-- lm: 0x11 11 -->
<UL> Return Code.
<P>
DosQuerySysInfo returns one of the following values <!-- lm: 0x2 11 -->
<P>
<LI><!-- lm: 0x2 26 -->NO_ERROR<!-- lm: 0x2 11 -->
<P>
87<!-- lm: 0x2 26 -->
<UL> ERROR_INVALID_PARAMETER<!-- lm: 0x2 11 -->
</UL> 111
<!-- lm: 0x2 26 -->
<UL>ERROR_BUFFER_OVERFLOW<!-- lm: 0x2 11 --><!-- lm: 0x2 1 -->
</UL>
<P>
<B>Remarks</B>
<P>
DosQuerySysInfo returns a single system variable or a range of system variables
to a user-allocated buffer. To request a single system variable, set<I> iStart
</I>equal to<I> iLast</I>. To request a range of system variables, set<I> iStart
</I>less than<I> iLast</I>.
<P>
Each system variable is a ULONG value. The following list gives the ordinal
index, name, and description of the system variables.<!-- lm: 0x2 1 -->
<P>
<LI><!-- lm: 0x2 5 -->QSV_MAX_PATH_LENGTH
<P>
Maximum length, in bytes, of a path name.<!-- lm: 0x2 1 -->
<P>
<LI><!-- lm: 0x2 5 -->QSV_MAX_TEXT_SESSIONS
<P>
Maximum number of text sessions.<!-- lm: 0x2 1 -->
<P>
<LI><!-- lm: 0x2 5 -->QSV_MAX_PM_SESSIONS
<P>
Maximum number of PM sessions.<!-- lm: 0x2 1 -->
<P>
<LI><!-- lm: 0x2 5 -->QSV_MAX_VDM_SESSIONS
<P>
Maximum number of DOS sessions.<!-- lm: 0x2 1 -->
<P>
<LI><!-- lm: 0x2 5 -->QSV_BOOT_DRIVE
<P>
Drive from which the system was started (1 means drive A, 2 means drive
B, and so on).<!-- lm: 0x2 1 -->
<P>
<LI><!-- lm: 0x2 5 -->QSV_DYN_PRI_VARIATION
<P>
Dynamic priority variation flag (0 means absolute priority, 1 means dynamic
priority).<!-- lm: 0x2 1 -->
<P>
<LI><!-- lm: 0x2 5 -->QSV_MAX_WAIT
<P>
Maximum wait in seconds.<!-- lm: 0x2 1 -->
<P>
<LI><!-- lm: 0x2 5 -->QSV_MIN_SLICE
<P>
Minimum time slice in milliseconds.<!-- lm: 0x2 1 -->
<P>
<LI><!-- lm: 0x2 5 -->QSV_MAX_SLICE
<P>
Maximum time slice in milliseconds.<!-- lm: 0x2 1 -->
<P>
10<!-- lm: 0x2 5 -->
<UL> QSV_PAGE_SIZE
<P>
Memory page size in bytes. This value is 4096 for the 80386 processor.<!-- lm: 0x2 1 -->
</UL> 11
<!-- lm: 0x2 5 -->
<UL>QSV_VERSION_MAJOR
<P>
Major version number (see note below).<!-- lm: 0x2 1 -->
</UL> 12<!-- lm: 0x2 5 -->
<UL> QSV_VERSION_MINOR

<P>
Minor version number (see note below).<!-- lm: 0x2 1 -->
</UL> 13<!-- lm: 0x2 5 -->
<UL> QSV_VERSION_REVISION

<P>
Revision number (see note below).<!-- lm: 0x2 1 -->
</UL> 14<!-- lm: 0x2 5 -->
<UL> QSV_MS_COUNT

<P>
Value of a 32-bit, free-running millisecond counter. This value is zero
when the system is started.<!-- lm: 0x2 1 -->
</UL> 15<!-- lm: 0x2 5 -->
<UL> QSV_TIME_LOW

<P>
Low-order 32 bits of the time in seconds since January 1, 1970 at 0 00 00.
<!-- lm: 0x2 1 -->
</UL>16<!-- lm: 0x2 5 -->
<UL> QSV_TIME_HIGH
<P>
High-order 32 bits of the time in seconds since January 1, 1970 at 0 00
00.<!-- lm: 0x2 1 -->
</UL> 17<!-- lm: 0x2 5 -->
<UL> QSV_TOTPHYSMEM
<P>
Total number of bytes of physical memory in the system.<!-- lm: 0x2 1 -->
</UL> 18
<!-- lm: 0x2 5 -->
<UL>QSV_TOTRESMEM
<P>
Total number of bytes of resident memory in the system.<!-- lm: 0x2 1 -->
</UL> 19
<!-- lm: 0x2 5 -->
<UL>QSV_TOTAVAILMEM
<P>
Maximum number of bytes of memory that can be allocated by all processes
in the system. This number is advisory and is not guaranteed, since system
conditions change constantly.<!-- lm: 0x2 1 -->
</UL> 20<!-- lm: 0x2 5 -->
<UL> QSV_MAXPRMEM

<P>
Maximum number of bytes of memory that this process can allocate in its
private arena. This number is advisory and is not guaranteed, since system
conditions change constantly.<!-- lm: 0x2 1 -->
</UL> 21<!-- lm: 0x2 5 -->
<UL> QSV_MAXSHMEM

<P>
Maximum number of bytes of memory that a process can allocate in the shared
arena. This number is advisory and is not guaranteed, since system conditions
change constantly.<!-- lm: 0x2 1 -->
</UL> 22<!-- lm: 0x2 5 -->
<UL> QSV_TIMER_INTERVAL

<P>
Timer interval in tenths of a millisecond.<!-- lm: 0x2 1 -->
</UL> 23<!-- lm: 0x2 5 -->
<UL> QSV_MAX_COMP_LENGTH

<P>
Maximum length, in bytes, of one component in a path name.<!-- lm: 0x2 1 -->
</UL> 24
<!-- lm: 0x2 5 -->
<UL>QSV_FOREGROUND_FS_SESSION
<P>
Session ID of the current foreground full-screen<!-- entering slot 81 --> session.
Note that this only applies to full-screen sessions. The Presentation Manager
session (which displays Vio-windowed, PM, and windowed DOS Sessions) is
full-screen session ID 1.<!-- lm: 0x2 1 -->
</UL> 25<!-- lm: 0x2 5 -->
<UL> QSV_FOREGROUND_PROCESS

<P>
Process ID of the current foreground process.<!-- lm: 0x2 1 -->
</UL> 26
<!-- lm: 0x2 5 -->
<UL>QSV_NUMPROCESSORS
<P>
Number of processors in the machine<!-- lm: 0x2 1 -->
</UL> 27<!-- lm: 0x2 5 -->
<UL> QSV_MAXHPRMEM

<P>
Maximum amount of free space in process's high private arena. Because system
conditions change constantly, this number is advisory and is not guaranteed.
 In addition, this number does not indicate the largest single memory object
you can allocate because the arena may be fragmented.<!-- lm: 0x2 1 -->
</UL> 28
<!-- lm: 0x2 5 -->
<UL>QSV_MAXHSHMEM
<P>
Maximum amount of free space in process's high shared arena. Because system
conditions change constantly, this number is advisory and is not guaranteed.
In addition, this number does not indicate the largest single memory object
you can allocate because the arena may be fragmented.<!-- lm: 0x2 1 -->
</UL> 29
<!-- lm: 0x2 5 -->
<UL>QSV_MAXPROCESSES
<P>
Maximum number of concurrent processes supported.<!-- lm: 0x2 1 -->
</UL> 30
<!-- lm: 0x2 5 -->
<UL>QSV_VIRTUALADDRESSLIMIT
<P>
Size of the user's address space in megabytes (that is, the value of the
rounded VIRTUALADDRESSLIMIT)<!-- lm: 0x2 1 -->
</UL> 30<!-- lm: 0x2 5 -->
<UL> QSV_MAX
<!-- lm: 0x2 1 -->
</UL>
<P>
<B>Note: </B> Major, minor and revision numbers for versions of OS/2 operating
system are described below <!-- lm: 0x2 1 -->
<P>

<PRE>                Major           Minor           RevisionOS/2 2.0        20              00              0
OS/2 2.1        20              10              0
OS/2 2.11       20              11              0
OS/2 3.0        20              30              0
OS/2 4.0        20              40              0
</PRE>

<P>
An application can specify file objects managed by an installable file system
that supports long file names.  Because some installable file systems support
longer names than others, the application should issue DosQuerySysInfo upon
initialization.
<P>
DosQuerySysInfo returns the maximum path length (QSV_MAX_PATH_LENGTH) supported
by the installed file system. The path length includes the drive specifier
(d ), the leading backslash (  ), and the trailing null character. The value
returned by DosQuerySysInfo can be used to allocate buffers for path names
returned by other functions, for example, DosFindFirst and DosFindNext.

<P>
<B>Related Functions</B><!-- lm: 0x2 3 -->
<UL>
<P>
<LI><!-- lm: 0x2 6 -->DosCreateDir<!-- lm: 0x2 3 -->
<P>
<LI><!-- lm: 0x2 6 -->DosFindFirst<!-- lm: 0x2 3 -->
<P>
<LI><!-- lm: 0x2 6 -->DosFindNext<!-- lm: 0x2 3 -->
<P>
<LI><!-- lm: 0x2 6 -->DosOpen<!-- lm: 0x2 3 -->
<P>
<LI><!-- lm: 0x2 6 -->DosQueryCurrentDir<!-- lm: 0x2 3 -->
<P>
<LI><!-- lm: 0x2 6 -->DosQueryFSInfo<!-- lm: 0x2 3 -->
<P>
<LI><!-- lm: 0x2 6 -->DosQueryPathInfo<!-- lm: 0x2 3 -->
<P>
<LI><!-- lm: 0x2 6 -->DosSearchPath<!-- lm: 0x2 3 -->
<P>
<LI><!-- lm: 0x2 6 -->DosSetCurrentDir<!-- lm: 0x2 3 -->
<P>
<LI><!-- lm: 0x2 6 -->DosSetPathInfo<!-- lm: 0x2 3 -->
<P>
<LI><!-- lm: 0x2 6 -->DosSetFSInfo<!-- lm: 0x2 1 -->
</UL>
<P>
<B>Example Code</B>
<P>
This example queries and displays the maximum length for a path name and
the total amount of physical memory in bytes.
<PRE>#define INCL_DOSMISC       /* DOS Miscellaneous values */#define INCL_DOSERRORS     /* DOS Error values         */
#include  os2.h 
#include  stdio.h 

int main(VOID)   

ULONG   aulSysInfo QSV_MAX  =  0 ;       /* System Information Data Buffer */
APIRET  rc                  = NO_ERROR;  /* Return code                    */

rc = DosQuerySysInfo(1L,                 /* Request all available system   */
QSV_MAX,            /* information                    */
(PVOID)aulSysInfo,
sizeof(ULONG)*QSV_MAX);

if (rc != NO_ERROR)  
printf("DosQuerySysInfo error  return code = %u\<!-- entering slot 82 -->n", rc);
return 1;
  else  
printf("Maximum length for a path name is %u characters.\n",
aulSysInfo QSV_MAX_PATH_LENGTH-1 );  /* Max length of path name */

printf("Total physical memory is %u bytes.\n",
aulSysInfo QSV_TOTPHYSMEM-1 );       /* Total physical memory   */
  /* endif */

return NO_ERROR;
 
</PRE>


<P><HR>

<A HREF="048_L2_DosQueryPathInfo.html">[Back: DosQueryPathInfo]</A> <BR>
<A HREF="050_L2_DosQuerySysState.html">[Next: DosQuerySysState]</A> 
</BODY>
</HTML>
