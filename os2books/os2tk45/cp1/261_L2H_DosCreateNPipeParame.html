<HTML XPOS=30% YPOS=TOP WIDTH=70% HEIGHT=100%HIDDEN>
<HEAD>
<!-- extra bytes: 03 00 14 1E 00 04 00 11 46 00 64 00 --><TITLE>DosCreateNPipe - Parameters</TITLE>
</HEAD>
<BODY>
<H1>DosCreateNPipe - Parameters</H1><!-- entering slot 264 --><!-- lm: 0x2 1 -->
<UL>
<P>
<B>pszName</B> (<A><!-- external link: 1D C1 C4 BA -->PSZ</A>) - input<!-- lm: 0x11 4 -->
<UL> The
ASCIIZ name of the pipe to be opened.
<P>
Pipe names must include the prefix \PIPE\ and must conform to file-system
naming conventions.<!-- lm: 0x2 1 -->
</UL><!-- lm: 0x2 1 -->
<P>
<B>pHpipe</B> (<A><!-- external link: 1D 9E C4 AE -->PHPIPE</A>) - output
<!-- lm: 0x11 4 -->
<UL>A pointer to the variable in which the system returns
the handle of the pipe that is created.<!-- lm: 0x2 1 -->
</UL><!-- lm: 0x2 1 -->
<P>
<B>openmode</B> (<A><!-- external link: 1D DB C4 E2 -->ULONG</A>) - input
<!-- lm: 0x11 4 -->
<UL>A set of flags defining the mode in which to open
the pipe.
<P>
This parameter contains the following bit fields:<!-- lm: 0x2 4 -->
<P>
Bit<!-- lm: 0x2 19 -->
<UL> Description<!-- lm: 0x2 4 -->
</UL> 31-16<!-- lm: 0x2 19 -->
<UL> Reserved.
<!-- lm: 0x2 4 -->
</UL>15<!-- lm: 0x2 19 -->
<UL> Reserved and must be
0.<!-- lm: 0x2 4 -->
</UL> 14<!-- lm: 0x2 19 -->
<UL> Write-through bit.
Possible values are shown in the following list:<!-- lm: 0x2 19 -->
<P>
<LI><!-- lm: 0x2 28 -->NP_WRITEBEHIND (0x0000) Write-behind to remote pipes
is allowed.<!-- lm: 0x2 19 -->
<P>
<LI><!-- lm: 0x2 28 -->NP_NOWRITEBEHIND (0x4000)
<BR>
Write-behind to remote pipes is not allowed.<!-- lm: 0x2 19 -->
<P>
This bit is meaningful only for a remote pipe. Occasionally, data written
to a remote pipe is buffered locally and then sent across the network to
the pipe at a later time. Setting the write-through bit ensures that data
is sent to the remote pipe as soon as it is written.<!-- lm: 0x2 4 -->
</UL> 13-8
<!-- lm: 0x2 19 -->
<UL>Reserved.<!-- lm: 0x2 4 -->
</UL> 7<!-- lm: 0x2 19 -->
<UL> Inheritance
flag. Possible values are shown in the following list:<!-- lm: 0x2 19 -->
<P>
<LI><!-- lm: 0x2 28 -->NP_INHERIT (0x0000)
<BR>
The pipe handle is inherited by a child process.<!-- lm: 0x2 19 -->
<P>
<LI><!-- lm: 0x2 28 -->NP_NOINHERIT (0x0080)
<BR>
The pipe handle is private to the current process and cannot be inherited.
<!-- lm: 0x2 19 -->
<P>
This bit is not inherited by child processes.<!-- lm: 0x2 4 -->
</UL> 6-3
<!-- lm: 0x2 19 -->
<UL>Reserved and must be 0.<!-- lm: 0x2 4 -->
</UL> 2-0
<!-- lm: 0x2 19 -->
<UL>Access mode. The pipe access is defined as shown
in the following list:<!-- lm: 0x2 19 -->
<P>
000<!-- lm: 0x2 30 -->
<UL> NP_ACCESS_INBOUND (0x0000)
<BR>
Inbound pipe (client to server).<!-- lm: 0x2 19 -->
</UL> 001<!-- lm: 0x2 30 -->
<UL> NP_ACCESS_OUTBOUND
(0x0001)
<BR>
Outbound pipe (server to client).<!-- lm: 0x2 19 -->
</UL> 010<!-- lm: 0x2 30 -->
<UL> NP_ACCESS_DUPLEX
(0x0002)
<BR>
Duplex pipe (server to and from client).<!-- lm: 0x2 19 -->
</UL> Any other
value is invalid.<!-- lm: 0x2 4 --><!-- lm: 0x2 1 -->
</UL><!-- lm: 0x2 1 -->
<P>
<B>pipemode</B> (<A><!-- external link: 1D DB C4 E2 -->ULONG</A>) - input
<!-- lm: 0x11 4 -->
<UL>A set of flags defining the mode of the pipe.
<P>
This parameter contains the following bit fields:<!-- lm: 0x2 4 -->
<P>
Bit<!-- lm: 0x2 19 -->
<UL> Description<!-- lm: 0x2 4 -->
</UL> 31-16<!-- lm: 0x2 19 -->
<UL> Reserved.
<!-- lm: 0x2 4 -->
</UL>15<!-- lm: 0x2 19 -->
<UL> Blocking mode. Blocking
mode is defined as either "blocking" or "nonblocking," as follows:<!-- lm: 0x2 19 -->
<P>
<LI><!-- lm: 0x2 28 -->NP_WAIT (0x0000) Blocking mode: <A HREF="1413_L2_DosRead.html">DosRead
</A>and <A HREF="1994_L2_DosWrite.html">DosWrite</A> block if no data is
available.<!-- lm: 0x2 19 -->
<P>
<LI><!-- lm: 0x2 28 -->NP_NOWAIT = NP_NBLK (0x8000)
<BR>
Nonblocking mode: <A HREF="1413_L2_DosRead.html">DosRead</A> and <A HREF="1994_L2_DosWrite.html">DosWrite
</A>return immediately if no data is available.<!-- lm: 0x2 19 -->
<P>
<A HREF="1413_L2_DosRead.html">DosRead</A> normally blocks until at least
partial data can be returned. <A HREF="1994_L2_DosWrite.html">DosWrite</A> blocks
by default until all of the requested bytes have been written. Nonblocking
mode changes this behavior as following:
<P>
<A HREF="1413_L2_DosRead.html">DosRead</A> returns immediately with ERROR_NO_DATA
if no data is available.
<P>
<A HREF="1994_L2_DosWrite.html">DosWrite</A> returns immediately with a
value of 0 for<I> pcbActual</I> if there is not enough buffer space available
in the pipe; otherwise, the entire data area is transferred.<!-- lm: 0x2 4 -->
</UL> 14-12
<!-- lm: 0x2 19 -->
<UL>Reserved.<!-- lm: 0x2 4 -->
</UL> 11-10<!-- lm: 0x2 19 -->
<UL> Type
of named pipe. The pipe type is defined as follows:<!-- lm: 0x2 19 -->
<P>
00<!-- lm: 0x2 29 -->
<UL> NP_TYPE_BYTE (0x0000)
<BR>
The pipe is a byte pipe; that is, data is written to the pipe as an undifferentiated
stream of bytes.<!-- lm: 0x2 19 -->
</UL> 01<!-- lm: 0x2 29 -->
<UL> NP_TYPE_MESSAGE
= NP_WMESG (0x0400)
<BR>
The pipe is a message pipe; that is, data is written to the pipe as messages.
The system records the length of each message in the first two bytes of
the message, which are called the<I> message header</I>. A header of all
zeroes is reserved, and zero-length messages are not allowed.<!-- lm: 0x2 19 --><!-- lm: 0x2 4 -->
</UL> 9-8
<!-- lm: 0x2 19 -->
<UL>Read mode. The read mode is defined as follows:
<!-- lm: 0x2 19 -->
<P>
00<!-- lm: 0x2 29 -->
<UL> NP_READMODE_BYTE (0x0000)
<BR>
Byte-read mode: Read the pipe as a byte stream.<!-- lm: 0x2 19 -->
</UL> 01
<!-- lm: 0x2 29 -->
<UL>NP_READMODE_MESSAGE = NP_RMESG (0x0100)
<BR>
Message-read mode: Read the pipe as a message stream.<!-- lm: 0x2 19 -->
</UL> Message
pipes can be read as either byte streams or message streams, depending on
the value of this bit. Byte pipes can be read only as byte streams.<!-- lm: 0x2 4 -->
</UL> 7-0
<!-- lm: 0x2 19 -->
<UL>ICount (Instance count). When the first instance
of a named pipe is created, ICount specifies<!-- entering slot 265 --> how
many instances (including the first instance) may be created. Possible values
are shown in the following list:<!-- lm: 0x2 19 -->
<P>
<LI><!-- lm: 0x2 42 -->This is the only instance permitted (the pipe is
unique).<!-- lm: 0x2 19 -->
<P>
<LI>&lt; value &lt; 255<!-- lm: 0x2 42 -->
<UL> The number of instances
is limited to the value specified.<!-- lm: 0x2 19 -->
</UL> -1<!-- lm: 0x2 42 -->
<UL> NP_UNLIMITED_INSTANCES
(0x00FF)
<BR>
The number of instances is unlimited.<!-- lm: 0x2 19 -->
</UL> 0<!-- lm: 0x2 42 -->
<UL> Reserved
value.<!-- lm: 0x2 19 -->
</UL> ICount is ignored when specifying any instance
of a pipe other than the first one. Subsequent attempts to create a pipe
instance fail if the maximum number of allowed instances already exists.
When multiple instances are allowed, multiple clients can simultaneously
open the same pipe name; they will receive handles to distinct pipe instances.
<!-- lm: 0x2 4 --><!-- lm: 0x2 1 -->
</UL><!-- lm: 0x2 1 -->
<P>
<B>cbOutbuf</B> (<A><!-- external link: 1D DB C4 8B -->ULONG</A>) - input
<!-- lm: 0x11 4 -->
<UL>The number of bytes to allocate for the outbound
(server to client) buffer.<!-- lm: 0x2 1 -->
</UL><!-- lm: 0x2 1 -->
<P>
<B>cbInbuf</B> (<A><!-- external link: 1D DB C4 8B -->ULONG</A>) - input
<!-- lm: 0x11 4 -->
<UL>The number of bytes to allocate for the inbound
(client to server) buffer.<!-- lm: 0x2 1 -->
</UL><!-- lm: 0x2 1 -->
<P>
<B>msec</B> (<A><!-- external link: 1D DB C4 8B -->ULONG</A>) - input<!-- lm: 0x11 4 -->
<UL> The
maximum time, in milliseconds, to wait for a named-pipe instance to become
available.
<P>
This is the default value for the<I> msec</I> parameter of <A HREF="1974_L2_DosWaitNPipe.html">DosWaitNPipe</A>.

<P>
This value may be set only when the first instance of the pipe name is being
created. If the value is 0, a system-wide default value (50 ms) is chosen.
<!-- lm: 0x2 1 -->
</UL><!-- lm: 0x2 1 -->
<P>
<B>ulrc</B> (<A><!-- external link: 1D 67 C4 18 -->APIRET</A>) - returns
<!-- lm: 0x11 4 -->
<UL>Return Code.
<P>
DosCreateNPipe returns one of the following values:<!-- lm: 0x2 4 -->
<P>
<LI><!-- lm: 0x2 19 -->NO_ERROR<!-- lm: 0x2 4 --> 3<!-- lm: 0x2 19 -->
<UL> ERROR_PATH_NOT_FOUND
<!-- lm: 0x2 4 -->
</UL>8<!-- lm: 0x2 19 -->
<UL> ERROR_NOT_ENOUGH_MEMORY<!-- lm: 0x2 4 -->
</UL>84<!-- lm: 0x2 19 -->
<UL> ERROR_OUT_OF_STRUCTURES<!-- lm: 0x2 4 -->
</UL>87<!-- lm: 0x2 19 -->
<UL> ERROR_INVALID_PARAMETER<!-- lm: 0x2 4 -->
</UL>231<!-- lm: 0x2 19 -->
<UL> ERROR_PIPE_BUSY<!-- lm: 0x2 4 -->
</UL> On
the PowerPC platform, DosCreateNPipe fails with error code ERROR_PATH_NOT_FOUND
when the pipe name contains more than one \ in the name. For example, the
following pipe name would cause DosCreateNPipe to fail:
<PRE>  \pipe\\\\\longname.nam</PRE>

<P>
For a full list of error codes, see<A><!-- external link: 1D E8 C4 FC --> Errors</A>.
<!-- lm: 0x2 1 -->
</UL>

<P><HR>

<A HREF="260_L2H_DosCreateNPipeReturn.html">[Back: DosCreateNPipe Return Value - ulrc]</A> <BR>
<A HREF="262_L2H_DosCreateNPipeRelate.html">[Next: DosCreateNPipe - Related Functions]</A> 
</BODY>
</HTML>
