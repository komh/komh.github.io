<HTML XPOS=30% YPOS=TOP WIDTH=70% HEIGHT=100%HIDDEN>
<HEAD>
<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="TEXT/HTML; CHARSET=UTF-8">
<!-- extra bytes: 03 00 14 1E 00 04 00 11 46 00 64 00 --><TITLE>DosOpen - Parameters</TITLE>
<STYLE>
PRE {
  FONT-FAMILY: Consolas, "Lucida Console", "Courier New", Courier, MONOSPACE;
}
</STYLE>
</HEAD>
<BODY>
<H1>DosOpen - Parameters</H1><!-- entering slot 774 --><!-- lm: 0x2 1 -->
<UL>
<P>
<B>pszFileName</B> (<A><!-- external link: 1D C1 C4 BA -->PSZ</A>) - input
<!-- lm: 0x11 4 -->
<UL>Address of the ASCIIZ path name of the file or device
to be opened.<!-- lm: 0x2 1 -->
</UL><!-- lm: 0x2 1 -->
<P>
<B>pHf</B> (<A><!-- external link: 1D 98 C4 B7 -->PHFILE</A>) - output<!-- lm: 0x11 4 -->
<UL> Address
of the handle for the file.  A file handle of zero is valid.<!-- lm: 0x2 1 -->
</UL><!-- lm: 0x2 1 -->
<P>
<B>pulAction</B> (<A><!-- external link: 1D DB C4 BD -->PULONG</A>) - output
<!-- lm: 0x11 4 -->
<UL>Address of the variable that receives the value
that specifies the action taken by the DosOpen function.
<P>
If DosOpen fails, this value has no meaning. Otherwise, it is one of the
following values:<!-- lm: 0x2 4 -->
<P>
<LI><!-- lm: 0x2 13 -->FILE_EXISTED File already existed.<!-- lm: 0x2 4 -->
<P>
<LI><!-- lm: 0x2 13 -->FILE_CREATED
<BR>
File was created.<!-- lm: 0x2 4 -->
<P>
<LI><!-- lm: 0x2 13 -->FILE_TRUNCATED
<BR>
File existed and was changed to a given size (file was replaced).<!-- lm: 0x2 4 --><!-- lm: 0x2 1 -->
</UL><!-- lm: 0x2 1 -->
<P>
<B>cbFile</B> (<A><!-- external link: 1D DB C4 E3 -->ULONG</A>) - input
<!-- lm: 0x11 4 -->
<UL>New logical size of the file (end of data, EOD),
in bytes.
<P>
This parameter is significant only when creating a new file or replacing
an existing one. Otherwise, it is ignored. It is an error to create or replace
a file with a nonzero length if the<I> fsOpenMode</I> Access-Mode flag is
set to read-only.<!-- lm: 0x2 1 -->
</UL><!-- lm: 0x2 1 -->
<P>
<B>ulAttribute</B> (<A><!-- external link: 1D DB C4 E3 -->ULONG</A>) - input
<!-- lm: 0x11 4 -->
<UL>File attribute information.
<P>
Possible values are shown in the following list.:<!-- lm: 0x2 4 -->
<P>
Bit<!-- lm: 0x2 19 -->
<UL> Description<!-- lm: 0x2 4 -->
</UL> 31-6<!-- lm: 0x2 19 -->
<UL> Reserved,
must be 0.<!-- lm: 0x2 4 -->
</UL> 5<!-- lm: 0x2 19 -->
<UL> FILE_ARCHIVED
(0x00000020) File has been archived.<!-- lm: 0x2 4 -->
</UL> 4<!-- lm: 0x2 19 -->
<UL> FILE_DIRECTORY
(0x00000010)
<BR>
File is a subdirectory.<!-- lm: 0x2 4 -->
</UL> 3<!-- lm: 0x2 19 -->
<UL> Reserved,
must be 0.<!-- lm: 0x2 4 -->
</UL> 2<!-- lm: 0x2 19 -->
<UL> FILE_SYSTEM
(0x00000004)
<BR>
File is a system file.<!-- lm: 0x2 4 -->
</UL> 1<!-- lm: 0x2 19 -->
<UL> FILE_HIDDEN
(0x00000002)
<BR>
File is hidden and does not appear in a directory listing.<!-- lm: 0x2 4 -->
</UL> 0
<!-- lm: 0x2 19 -->
<UL>FILE_READONLY (0x00000001)
<BR>
File can be read from, but not written to.<!-- lm: 0x2 4 -->
</UL> 0<!-- lm: 0x2 19 -->
<UL> FILE_NORMAL
(0x00000000)
<BR>
File can be read from or written to.<!-- lm: 0x2 4 -->
</UL> File attributes
apply only if the file is created.
<P>
These bits may be set individually or in combination. For example, an attribute
value of 0x00000021 (bits 5 and 0 set to 1) indicates a read-only file that
has been archived.<!-- lm: 0x2 1 -->
</UL><!-- lm: 0x2 1 -->
<P>
<B>fsOpenFlags</B> (<A><!-- external link: 1D DB C4 E3 -->ULONG</A>) - input
<!-- lm: 0x11 4 -->
<UL>The action to be taken depending on whether the
file exists or does not exist.
<P>
Possible values are shown in the following list:<!-- lm: 0x2 4 -->
<P>
Bits<!-- lm: 0x2 19 -->
<UL> Description<!-- lm: 0x2 4 -->
</UL> 31-8<!-- lm: 0x2 19 -->
<UL> Reserved,
must be 0.<!-- lm: 0x2 4 -->
</UL> 7-4<!-- lm: 0x2 19 -->
<UL> The following
flags apply if the file does not exist:<!-- lm: 0x2 19 -->
<P>
0000<!-- lm: 0x2 30 -->
<UL> OPEN_ACTION_FAIL_IF_NEW Open an existing file;
fail if the file does not exist.<!-- lm: 0x2 19 -->
</UL> 0001<!-- lm: 0x2 30 -->
<UL> OPEN_ACTION_CREATE_IF_NEW

<BR>
Create the file if the file does not exist.<!-- lm: 0x2 19 --><!-- lm: 0x2 4 -->
</UL> 3-0
<!-- lm: 0x2 19 -->
<UL>The following flags apply if the file already exists:
<!-- lm: 0x2 19 -->
<P>
0000<!-- lm: 0x2 30 -->
<UL> OPEN_ACTION_FAIL_IF_EXISTS
<BR>
Open the file; fail if the file already exists.<!-- lm: 0x2 19 -->
</UL> 0001
<!-- lm: 0x2 30 -->
<UL>OPEN_ACTION_OPEN_IF_EXISTS
<BR>
Open the file if it already exists.<!-- lm: 0x2 19 -->
</UL> 0010<!-- lm: 0x2 30 -->
<UL> OPEN_ACTION_REPLACE_IF_EXISTS

<BR>
Replace the file if it already exists.<!-- lm: 0x2 19 --><!-- lm: 0x2 4 --><!-- lm: 0x2 1 -->
</UL><!-- lm: 0x2 1 -->
<P>
<B>fsOpenMode</B> (<A><!-- external link: 1D DB C4 E3 -->ULONG</A>) - input
<!-- lm: 0x11 4 -->
<UL>The mode of the open function. Possible values are
shown in the following list:
<P>
<!-- lm: 0x2 4 -->
<P>
Bit<!-- lm: 0x2 19 -->
<UL> Description<!-- lm: 0x2 4 -->
</UL> 31-16<!-- lm: 0x2 19 -->
<UL> Reserved,
must be zero.<!-- lm: 0x2 4 -->
</UL> 15<!-- lm: 0x2 19 -->
<UL> OPEN_FLAGS_DASD
(0x00008000) Direct Open flag:<!-- lm: 0x2 19 -->
<P>
<LI><!-- lm: 0x2 28 --><I>pszFileName</I> represents a file to be opened
normally.<!-- lm: 0x2 19 -->
<P>
<LI><!-- lm: 0x2 28 --><I>pszFileName</I> is "drive:" (such as C: or A:),
and represents a mounted disk or diskette volume to be opened for direct
access.<!-- lm: 0x2 19 --><!-- lm: 0x2 4 -->
</UL> 14<!-- lm: 0x2 19 -->
<UL> OPEN_FLAGS_WRITE_THROUGH
(0x00004000)
<BR>
Write-Through flag:<!-- lm: 0x2 19 -->
<P>
<LI><!-- lm: 0x2 28 -->Writes to the file may go through the file-system
driver's cache. The file-system driver writes the sectors when the cache
is full or the file is closed.<!-- lm: 0x2 19 -->
<P>
<LI><!-- lm: 0x2 28 -->Writes to the file may go through the file-system
driver's cache, but the sectors are written (the actual file I/O operation
is completed) before a synchronous write call returns. This state of the
file defines it as a synchronous file. For synchronous files, this bit must
be set, because the data must be written to the medium for synchronous write
operations.<!-- lm: 0x2 19 --> This bit flag is not inherited by child processes.
<!-- lm: 0x2 4 -->
</UL><!-- entering slot 775 -->13<!-- lm: 0x2 19 -->
<UL> OPEN_FLAGS_FAIL_ON_ERROR
(0x00002000)
<BR>
Fail-Errors flag. Media I/O errors are handled as follows:<!-- lm: 0x2 19 -->
<P>
<LI><!-- lm: 0x2 28 -->Reported through the system critical-error handler.
<!-- lm: 0x2 19 -->
<BR>
<LI><!-- lm: 0x2 28 -->Reported directly to the caller by way of a return
code.<!-- lm: 0x2 19 -->
<P>
Media I/O errors generated through<A><!-- external link: 1D B6 C5 48 --> Category
08h Logical Disk Control IOCtl Commands</A> always get reported directly
to the caller by way of return code. The Fail-Errors function applies only
to non-IOCtl handle-based file I/O calls.
<P>
This flag bit is not inherited by child processes.<!-- lm: 0x2 4 -->
</UL> 12
<!-- lm: 0x2 19 -->
<UL>OPEN_FLAGS_NO_CACHE (0x00001000)
<BR>
No-Cache/Cache flag:<!-- lm: 0x2 19 -->
<P>
<LI><!-- lm: 0x2 28 -->The file-system driver should place data from I/O
operations into its cache.<!-- lm: 0x2 19 -->
<P>
<LI><!-- lm: 0x2 28 -->I/O operations to the file need not be done through
the file-system driver's cache.<!-- lm: 0x2 19 -->
<P>
The setting of this bit determines whether file-system drivers should place
data into the cache. Like the write-through bit, this is a per-handle bit,
and is not inherited by child processes.<!-- lm: 0x2 4 -->
</UL> 11<!-- lm: 0x2 19 -->
<UL> Reserved;
must be 0.<!-- lm: 0x2 4 -->
</UL> 10-8<!-- lm: 0x2 19 -->
<UL> The locality
of reference flags contain information about how the application is to get
access to the file. The values are as follows:<!-- lm: 0x2 19 -->
<P>
000<!-- lm: 0x2 29 -->
<UL> OPEN_FLAGS_NO_LOCALITY (0x00000000)
<BR>
No locality known.<!-- lm: 0x2 19 -->
</UL> 001<!-- lm: 0x2 29 -->
<UL> OPEN_FLAGS_SEQUENTIAL
(0x00000100)
<BR>
Mainly sequential access.<!-- lm: 0x2 19 -->
</UL> 010<!-- lm: 0x2 29 -->
<UL> OPEN_FLAGS_RANDOM
(0x00000200)
<BR>
Mainly random access.<!-- lm: 0x2 19 -->
</UL> 011<!-- lm: 0x2 29 -->
<UL> OPEN_FLAGS_RANDOMSEQUENTIAL
(0x00000300)
<BR>
Random with some locality.<!-- lm: 0x2 19 --><!-- lm: 0x2 4 -->
</UL> 7
<!-- lm: 0x2 19 -->
<UL>OPEN_FLAGS_NOINHERIT (0x00000080)
<BR>
Inheritance flag:<!-- lm: 0x2 19 -->
<P>
<LI><!-- lm: 0x2 28 -->File handle is inherited by a process created from
a call to <A HREF="445_L2_DosExecPgm.html">DosExecPgm</A>.<!-- lm: 0x2 19 -->
<P>
<LI><!-- lm: 0x2 28 -->File handle is private to the current process.<!-- lm: 0x2 19 -->
<P>
This bit is not inherited by child processes.<!-- lm: 0x2 4 -->
</UL> 6-4
<!-- lm: 0x2 19 -->
<UL>Sharing Mode flags. This field defines any restrictions
to file access placed by the caller on other processes. The values are as
follows:<!-- lm: 0x2 19 -->
<P>
001<!-- lm: 0x2 29 -->
<UL> OPEN_SHARE_DENYREADWRITE (0x00000010)
<BR>
Deny read/write access.<!-- lm: 0x2 19 -->
</UL> 010<!-- lm: 0x2 29 -->
<UL> OPEN_SHARE_DENYWRITE
(0x00000020)
<BR>
Deny write access.<!-- lm: 0x2 19 -->
</UL> 011<!-- lm: 0x2 29 -->
<UL> OPEN_SHARE_DENYREAD
(0x00000030)
<BR>
Deny read access.<!-- lm: 0x2 19 -->
</UL> 100<!-- lm: 0x2 29 -->
<UL> OPEN_SHARE_DENYNONE
(0x00000040)
<BR>
Deny neither read nor write access (deny none).<!-- lm: 0x2 19 -->
</UL> Any
other value is invalid.<!-- lm: 0x2 4 -->
</UL> 3<!-- lm: 0x2 19 -->
<UL> Reserved;
must be 0.<!-- lm: 0x2 4 -->
</UL> 2-0<!-- lm: 0x2 19 -->
<UL> Access-Mode
flags. This field defines the file access required by the caller. The values
are as follows:<!-- lm: 0x2 19 -->
<P>
000<!-- lm: 0x2 29 -->
<UL> OPEN_ACCESS_READONLY (0x00000000)
<BR>
Read-only access<!-- lm: 0x2 19 -->
</UL> 001<!-- lm: 0x2 29 -->
<UL> OPEN_ACCESS_WRITEONLY
(0x00000001)
<BR>
Write-only access<!-- lm: 0x2 19 -->
</UL> 010<!-- lm: 0x2 29 -->
<UL> OPEN_ACCESS_READWRITE
(0x00000002)
<BR>
Read/write access.<!-- lm: 0x2 19 -->
</UL> Any other value is invalid,
as are any other combinations.<!-- lm: 0x2 4 -->
</UL> File sharing requires
the cooperation of sharing processes. This cooperation is communicated through
sharing and access modes. Any sharing restrictions placed on a file opened
by a process are removed when the process closes the file with a <A HREF="132_L2_DosClose.html">DosClose
</A>request.<!-- lm: 0x2 4 -->
<P>
Sharing Mode<!-- lm: 0x11 13 -->
<UL> Specifies the type of file access
that other processes may have. For example, if other processes can continue
to read the file while your process is operating on it, specify Deny Write.
The sharing mode prevents other processes from writing to the file but still
allows them to read it.<!-- lm: 0x2 4 -->
</UL> Access Mode<!-- lm: 0x11 13 -->
<UL> Specifies
the type of file access (access mode) needed by your process. For example,
if your process requires read/write access, and another process has already
opened the file with a sharing mode of Deny None, your DosOpen request succeeds.
However, if the file is open with a sharing mode of Deny Write, the process
is denied access.
<P>
If the file is inherited by a child process, all sharing and access restrictions
also are inherited.
<P>
If an open file handle is duplicated by a call to <A HREF="369_L2_DosDupHandle.html">DosDupHandle</A>,
all sharing and access restrictions also are duplicated.<!-- lm: 0x2 4 --><!-- lm: 0x2 1 -->
</UL><!-- lm: 0x2 1 -->
<P>
<B>peaop2</B> (<A><!-- external link: 1D 7B C4 B7 -->PEAOP2</A>) - in/out
<!-- lm: 0x11 4 -->
<UL>Extended attributes.
<P>
This parameter is only<!-- entering slot 776 --> used to specify extended
attributes (EAs) when creating a new file, replacing an existing file, or
truncating an existing file. When opening existing files, it should be set
to null.<!-- lm: 0x2 4 -->
<P>
Input<!-- lm: 0x2 17 -->
<UL> The address of the extended-attribute buffer,
which contains an<A><!-- external link: 1D 7B C4 35 --> EAOP2</A> structure.
<I>fpFEA2List</I> points to a data area where the relevant<A><!-- external link: 1D 82 C4 40 --> FEA2
</A>list is to be found.<I> fpGEA2List</I> and<I> oError</I> are ignored.
<!-- lm: 0x2 4 -->
</UL>Output<!-- lm: 0x2 17 -->
<UL><I> fpGEA2List</I> and
<I>fpFEA2List</I> are unchanged. The area that<I> fpFEA2List</I> points
to is unchanged. If an error occurred during the set,<I> oError</I> is the
offset of the<A><!-- external link: 1D 82 C4 40 --> FEA2</A> entry where
the error occurred. The return code from DosOpen is the error code for that
error condition. If no error occurred,<I> oError</I> is undefined.
<P>
If<I> peaop2</I> is zero, then no extended attributes are defined for the
file.
<P>
If extended attributes are not to be defined or modified, the pointer<I> peaop2
</I>must be set to zero.<!-- lm: 0x2 4 --><!-- lm: 0x2 1 -->
</UL><!-- lm: 0x2 1 -->
<P>
<B>ulrc</B> (<A><!-- external link: 1D 67 C4 1C -->APIRET</A>) - returns
<!-- lm: 0x11 4 -->
<UL>Return Code.
<P>
DosOpen returns one of the following values:<!-- lm: 0x2 4 -->
<P>
<LI><!-- lm: 0x2 19 -->NO_ERROR<!-- lm: 0x2 4 --> 2<!-- lm: 0x2 19 -->
<UL> ERROR_FILE_NOT_FOUND
<!-- lm: 0x2 4 -->
</UL>3<!-- lm: 0x2 19 -->
<UL> ERROR_PATH_NOT_FOUND<!-- lm: 0x2 4 -->
</UL>4<!-- lm: 0x2 19 -->
<UL> ERROR_TOO_MANY_OPEN_FILES<!-- lm: 0x2 4 -->
</UL>5<!-- lm: 0x2 19 -->
<UL> ERROR_ACCESS_DENIED<!-- lm: 0x2 4 -->
</UL>12<!-- lm: 0x2 19 -->
<UL> ERROR_INVALID_ACCESS<!-- lm: 0x2 4 -->
</UL>26<!-- lm: 0x2 19 -->
<UL> ERROR_NOT_DOS_DISK<!-- lm: 0x2 4 -->
</UL>32<!-- lm: 0x2 19 -->
<UL> ERROR_SHARING_VIOLATION<!-- lm: 0x2 4 -->
</UL>36<!-- lm: 0x2 19 -->
<UL> ERROR_SHARING_BUFFER_EXCEEDED<!-- lm: 0x2 4 -->
</UL>82<!-- lm: 0x2 19 -->
<UL> ERROR_CANNOT_MAKE<!-- lm: 0x2 4 -->
</UL>87<!-- lm: 0x2 19 -->
<UL> ERROR_INVALID_PARAMETER<!-- lm: 0x2 4 -->
</UL>99<!-- lm: 0x2 19 -->
<UL> ERROR_DEVICE_IN_USE<!-- lm: 0x2 4 -->
</UL>108<!-- lm: 0x2 19 -->
<UL> ERROR_DRIVE_LOCKED<!-- lm: 0x2 4 -->
</UL>110<!-- lm: 0x2 19 -->
<UL> ERROR_OPEN_FAILED<!-- lm: 0x2 4 -->
</UL>112<!-- lm: 0x2 19 -->
<UL> ERROR_DISK_FULL<!-- lm: 0x2 4 -->
</UL>206<!-- lm: 0x2 19 -->
<UL> ERROR_FILENAME_EXCED_RANGE<!-- lm: 0x2 4 -->
</UL>231<!-- lm: 0x2 19 -->
<UL> ERROR_PIPE_BUSY<!-- lm: 0x2 4 -->
</UL> For
a full list of error codes, see<A><!-- external link: 1D E8 C4 FC --> Errors</A>.
<!-- lm: 0x2 1 -->
</UL>

<P><HR>

<A HREF="764_L2H_DosOpenReturnValueul.html">[Back: DosOpen Return Value - ulrc]</A> <BR>
<A HREF="766_L2H_DosOpenRemarks.html">[Next: DosOpen - Remarks]</A> 
</BODY>
</HTML>
