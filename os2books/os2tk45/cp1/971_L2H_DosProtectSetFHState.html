<HTML XPOS=30% YPOS=TOP WIDTH=70% HEIGHT=100%HIDDEN>
<HEAD>
<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="TEXT/HTML; CHARSET=UTF-8">
<!-- extra bytes: 03 00 14 1E 00 04 00 11 46 00 64 00 --><TITLE>DosProtectSetFHState - Parameters</TITLE>
</HEAD>
<BODY>
<H1>DosProtectSetFHState - Parameters</H1><!-- entering slot 987 --><!-- lm: 0x2 1 -->
<UL>
<P>
<B>hFile</B> (<A><!-- external link: 1D 98 C4 72 -->HFILE</A>) - input<!-- lm: 0x11 4 -->
<UL> File
handle to be set.<!-- lm: 0x2 1 -->
</UL><!-- lm: 0x2 1 -->
<P>
<B>mode</B> (<A><!-- external link: 1D DB C4 BC -->ULONG</A>) - input<!-- lm: 0x11 4 -->
<UL> Contents
of the<I> fsOpenMode</I> field defined in a previous <A HREF="754_L2_DosOpen.html">DosOpen</A>.

<P>
Possible modes are shown in the list below:<!-- lm: 0x2 4 -->
<P>
Bit<!-- lm: 0x2 19 -->
<UL> Description<!-- lm: 0x2 4 -->
</UL> 15<!-- lm: 0x2 19 -->
<UL> OPEN_FLAGS_DASD
(0x00008000) This bit must be set to 0.<!-- lm: 0x2 4 -->
</UL> 14<!-- lm: 0x2 19 -->
<UL> OPEN_FLAGS_WRITE_THROUGH
(0x00004000)
<BR>
Write-Through flag:<!-- lm: 0x2 19 -->
<P>
<LI><!-- lm: 0x2 28 -->Writes to the file may go through the system-buffer
cache.<!-- lm: 0x2 19 -->
<P>
<LI><!-- lm: 0x2 28 -->Writes to the file may go through the system-buffer
cache, but the data is written (the actual file I/O operation is completed)
before a synchronous-write call returns. This state of the file defines
it as a synchronous file. For synchronous files, this bit must be set, because
the data must be written to the medium for synchronous-write operations.
<!-- lm: 0x2 19 -->
<P>
This flag bit is not inherited by child processes.<!-- lm: 0x2 4 -->
</UL> 13
<!-- lm: 0x2 19 -->
<UL>OPEN_FAIL_ON_ERROR (0x00002000)
<BR>
Fail-Errors flag. Media I/O errors are handled as follows:<!-- lm: 0x2 19 -->
<P>
<LI><!-- lm: 0x2 28 -->Reported through the system critical-error handler.
<!-- lm: 0x2 19 -->
<BR>
<LI><!-- lm: 0x2 28 -->Reported directly to the caller by way of a return
code.<!-- lm: 0x2 19 -->
<P>
Media I/O errors generated through<A><!-- external link: 1D B6 C5 38 --> Category
08h Logical Disk Control IOCtl Commands</A> are always reported directly
to the caller by way of a return code. The Fail-Errors function applies
only to non-IOCtl handle-based file I/O functions.
<P>
This flag bit is not inherited by child processes.<!-- lm: 0x2 4 -->
</UL> 12
<!-- lm: 0x2 19 -->
<UL>OPEN_FLAGS_NO_CACHE (0x00002000)
<BR>
Cache or No-Cache flag. The file is opened as follows:<!-- lm: 0x2 19 -->
<P>
<LI><!-- lm: 0x2 28 -->The disk driver should place data from I/O operations
into cache.<!-- lm: 0x2 19 -->
<P>
<LI><!-- lm: 0x2 28 -->I/O operations to the file need not be done through
the disk-driver cache.<!-- lm: 0x2 19 -->
<P>
This bit is an advisory bit, and is used to advise file-system drivers and
device drivers about whether the data should be cached. This bit, like the
write-through bit, is a per-handle bit.
<P>
This bit is not inherited by child processes.<!-- lm: 0x2 4 -->
</UL> 11-8
<!-- lm: 0x2 19 -->
<UL>These bits are reserved, and should be set to the
values returned by <A HREF="1155_L2_DosQueryFHState.html">DosQueryFHState
</A>in these positions.<!-- lm: 0x2 4 -->
</UL> 7<!-- lm: 0x2 19 -->
<UL> OPEN_FLAGS_NOINHERIT
(0x00000080)
<BR>
Inheritance flag:<!-- lm: 0x2 19 -->
<P>
<LI><!-- lm: 0x2 28 -->File handle is inherited by a process created by
<A HREF="445_L2_DosExecPgm.html">DosExecPgm</A>.<!-- lm: 0x2 19 -->
<BR>
<LI><!-- lm: 0x2 28 -->File handle is private to the current process.<!-- lm: 0x2 19 --><!-- lm: 0x2 4 -->
</UL> 6-4
<!-- lm: 0x2 19 -->
<UL>These bits must be set to 0. Any other values are
invalid.<!-- lm: 0x2 4 -->
</UL> 3<!-- lm: 0x2 19 -->
<UL> This bit is reserved,
and should be set to the value returned by <A HREF="1155_L2_DosQueryFHState.html">DosQueryFHState
</A>for this position.<!-- lm: 0x2 4 -->
</UL> 2-0<!-- lm: 0x2 19 -->
<UL> These
bits must be set to 0. Any other values are invalid.<!-- lm: 0x2 4 --><!-- lm: 0x2 1 -->
</UL><!-- lm: 0x2 1 -->
<P>
<B>fhFileHandleLockID</B> (<A><!-- external link: 1D 84 C4 5B -->FHLOCK</A>)
- input<!-- lm: 0x11 4 -->
<UL> The lockid of the protected file handle.
<!-- lm: 0x2 1 -->
</UL><!-- lm: 0x2 1 -->
<P>
<B>ulrc</B> (<A><!-- external link: 1D 67 C4 23 -->APIRET</A>) - returns
<!-- lm: 0x11 4 -->
<UL>Return Code.
<P>
DosProtectFHState returns one of the following values:<!-- lm: 0x2 4 -->
<P>
<LI><!-- lm: 0x2 19 -->NO_ERROR<!-- lm: 0x2 4 --> 6<!-- lm: 0x2 19 -->
<UL> ERROR_INVALID_HANDLE
<!-- lm: 0x2 4 -->
</UL>87<!-- lm: 0x2 19 -->
<UL> ERROR_INVALID_PARAMETER<!-- lm: 0x2 4 -->
</UL> For
a full list of error codes, see<A><!-- external link: 1D E8 C4 FC --> Errors</A>.
<!-- lm: 0x2 1 -->
</UL>

<P><HR>

<A HREF="970_L2H_DosProtectSetFHState.html">[Back: DosProtectSetFHState Return Value - ulrc]</A> <BR>
<A HREF="972_L2H_DosProtectSetFHState.html">[Next: DosProtectSetFHState - Remarks]</A> 
</BODY>
</HTML>
