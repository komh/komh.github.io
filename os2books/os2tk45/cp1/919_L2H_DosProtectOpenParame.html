<HTML XPOS=30% YPOS=BOTTOM WIDTH=70% HEIGHT=50%HIDDEN>
<HEAD>
<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="TEXT/HTML; CHARSET=UTF-8">
<!-- extra bytes: 03 00 14 1E 00 08 00 11 46 00 32 00 --><TITLE>DosProtectOpen Parameter - fsOpenMode</TITLE>
<STYLE>
PRE {
  FONT-FAMILY: Consolas, "Lucida Console", "Courier New", Courier, MONOSPACE;
}
</STYLE>
</HEAD>
<BODY>
<H1>DosProtectOpen Parameter - fsOpenMode</H1><!-- entering slot 931 --><!-- lm: 0x2 1 -->
<UL>
<P>
<B>fsOpenMode</B> (<A><!-- external link: 1D DB C4 E1 -->ULONG</A>) - input
<!-- lm: 0x11 4 -->
<UL>The mode of the open function.
<P>
This parameter contains the following bit fields:<!-- lm: 0x2 4 -->
<P>
Bit<!-- lm: 0x2 19 -->
<UL> Description<!-- lm: 0x2 4 -->
</UL> 29-16<!-- lm: 0x2 19 -->
<UL> Reserved,
must be zero.<!-- lm: 0x2 4 -->
</UL> 30<!-- lm: 0x2 19 -->
<UL> OPEN_FLAGS_PROTECTED_HANDLE
(0x40000000)
<BR>
Protected file handle flag.<!-- lm: 0x2 19 -->
<P>
<LI><!-- lm: 0x2 28 -->Unprotected Handle<!-- lm: 0x2 19 -->
<BR>
<LI><!-- lm: 0x2 28 -->Protected Handle<!-- lm: 0x2 19 -->
<P>
Protected handle requires the<I> pfhFileHandleLockID</I> to be specified
on subsequent DosProtectxxxx calls.
<P>
Unprotected handle requires the<I> pfhFileHandleLockID</I> value to be specified
as zero on subsequent DosProtectxxxx calls. An unprotected handle may be
used with the unprotected calls such as <A HREF="1413_L2_DosRead.html">DosRead
</A>and <A HREF="1994_L2_DosWrite.html">DosWrite</A>.<!-- lm: 0x2 4 -->
</UL> 31
<!-- lm: 0x2 19 -->
<UL>Reserved, must be zero.<!-- lm: 0x2 4 -->
</UL> 15
<!-- lm: 0x2 19 -->
<UL>OPEN_FLAGS_DASD (x00008000)
<BR>
Direct Open flag:<!-- lm: 0x2 19 -->
<P>
<LI><!-- lm: 0x2 28 --><I>pszFileName</I> represents a file to be opened
normally.<!-- lm: 0x2 19 -->
<P>
<LI><!-- lm: 0x2 28 --><I>pszFileName</I> is "drive:" (such as C: or A:),
and represents a mounted disk or diskette volume to be opened for direct
access.<!-- lm: 0x2 19 --><!-- lm: 0x2 4 -->
</UL> 14<!-- lm: 0x2 19 -->
<UL> OPEN_FLAGS_WRITE_THROUGH
(0x00004000)
<BR>
Write-Through flag:<!-- lm: 0x2 19 -->
<P>
<LI><!-- lm: 0x2 28 -->Writes to the file may go through the file-system
driver's cache. The file-system driver writes the sectors when the cache
is full or the file is closed.<!-- lm: 0x2 19 -->
<P>
<LI><!-- lm: 0x2 28 -->Writes to the file may go through the file-system
driver's cache, but the sectors are written (the actual file I/O operation
is completed) before a synchronous write call returns. This state of the
file defines it as a synchronous file. For synchronous files, this bit must
be set, because the data must be written to the medium for synchronous write
operations.<!-- lm: 0x2 19 -->
<P>
This bit flag is not inherited by child processes.<!-- lm: 0x2 4 -->
</UL> 13
<!-- lm: 0x2 19 -->
<UL>OPEN_FLAGS_FAIL_ON_ERROR (0x00002000)
<BR>
Fail-Errors flag. Media I/O errors are handled as follows:<!-- lm: 0x2 19 -->
<P>
<LI><!-- lm: 0x2 28 -->Reported through the system critical-error handler.
<!-- lm: 0x2 19 -->
<BR>
<LI><!-- lm: 0x2 28 -->Reported directly to the caller by way of a return
code.<!-- lm: 0x2 19 -->
<P>
Media I/O errors generated through<A><!-- external link: 1D B6 C5 45 --> Category
08h Logical Disk Control IOCtl Commands</A> always get reported directly
to the caller by way of return code. The Fail-Errors function applies only
to non-IOCtl handle-based file I/O calls.
<P>
This flag bit is not inherited by child processes.<!-- lm: 0x2 4 -->
</UL> 12
<!-- lm: 0x2 19 -->
<UL>OPEN_FLAGS_NO_CACHE (0x00001000)
<BR>
No-Cache/Cache flag:<!-- lm: 0x2 19 -->
<P>
<LI><!-- lm: 0x2 28 -->The file-system driver should place data from I/O
operations into its cache.<!-- lm: 0x2 19 -->
<P>
<LI><!-- lm: 0x2 28 -->I/O operations to the file need not be done through
the file-system driver's cache.<!-- lm: 0x2 19 -->
<P>
The setting of this bit determines whether file-system drivers should place
data into the cache. Like the write-through bit, this is a per-handle bit,
and is not inherited by child processes.<!-- lm: 0x2 4 -->
</UL> 11<!-- lm: 0x2 19 -->
<UL> Reserved;
must be 0.<!-- lm: 0x2 4 -->
</UL> 10-8<!-- lm: 0x2 19 -->
<UL> The locality
of reference flags contain information about how the application is to get
access to the file. The values are as follows:<!-- lm: 0x2 19 -->
<P>
000<!-- lm: 0x2 30 -->
<UL> OPEN_FLAGS_NO_LOCALITY (0x00000000)
<BR>
No locality known.<!-- lm: 0x2 19 -->
</UL> 001<!-- lm: 0x2 30 -->
<UL> OPEN_FLAGS_SEQUENTIAL
(0x00000100)
<BR>
Mainly sequential access.<!-- lm: 0x2 19 -->
</UL> 010<!-- lm: 0x2 30 -->
<UL> OPEN_FLAGS_RANDOM
(0x00000200)
<BR>
Mainly random access.<!-- lm: 0x2 19 -->
</UL> 011<!-- lm: 0x2 30 -->
<UL> OPEN_FLAGS_RANDOMSEQUENTIAL
(0x00000300)
<BR>
Random with some locality.<!-- lm: 0x2 19 --><!-- lm: 0x2 4 -->
</UL> 7
<!-- lm: 0x2 19 -->
<UL>OPEN_FLAGS_NOINHERIT (0x00000080)
<BR>
Inheritance flag:<!-- lm: 0x2 19 -->
<P>
<LI><!-- lm: 0x2 28 -->File handle is inherited by a process created from
a call to <A HREF="445_L2_DosExecPgm.html">DosExecPgm</A>.<!-- lm: 0x2 19 -->
<P>
<LI><!-- lm: 0x2 28 -->File handle is private to the current process.<!-- lm: 0x2 19 -->
<P>
This bit is not inherited by child processes.<!-- lm: 0x2 4 -->
</UL> 6-4
<!-- lm: 0x2 19 -->
<UL>Sharing Mode flags. This field defines any restrictions
to file access placed by the caller on other processes. The values are as
follows:<!-- lm: 0x2 19 -->
<P>
001<!-- lm: 0x2 30 -->
<UL> OPEN_SHARE_DENYREADWRITE (0x00000010)
<BR>
Deny read/write access.<!-- lm: 0x2 19 -->
</UL> 010<!-- lm: 0x2 30 -->
<UL> OPEN_SHARE_<!-- entering slot 932 -->DENYWRITE(
0x00000020 )
<BR>
Deny write access.<!-- lm: 0x2 19 -->
</UL> 011<!-- lm: 0x2 30 -->
<UL> OPEN_SHARE_DENYREAD
(0x00000030)
<BR>
Deny read access.<!-- lm: 0x2 19 -->
</UL> 100<!-- lm: 0x2 30 -->
<UL> OPEN_SHARE_DENYNONE
(0x00000040)
<BR>
Deny neither read nor write access (deny none).<!-- lm: 0x2 19 -->
</UL> Any
other value is invalid.<!-- lm: 0x2 4 -->
</UL> 3<!-- lm: 0x2 19 -->
<UL> Reserved;
must be 0.<!-- lm: 0x2 4 -->
</UL> 2-0<!-- lm: 0x2 19 -->
<UL> Access-Mode
flags. This field defines the file access required by the caller. The values
are as follows:<!-- lm: 0x2 19 -->
<P>
000<!-- lm: 0x2 30 -->
<UL> OPEN_ACCESS_READONLY (0x00000000)
<BR>
Read-only access<!-- lm: 0x2 19 -->
</UL> 001<!-- lm: 0x2 30 -->
<UL> OPEN_ACCESS_WRITEONLY
(0x00000001)
<BR>
Write-only access<!-- lm: 0x2 19 -->
</UL> 010<!-- lm: 0x2 30 -->
<UL> OPEN_ACCESS_READWRITE
(0x00000002)
<BR>
Read/write access.<!-- lm: 0x2 19 -->
</UL> Any other value is invalid,
as are any other combinations.<!-- lm: 0x2 4 -->
</UL> File sharing requires
the cooperation of sharing processes. This cooperation is communicated through
sharing and access modes. Any sharing restrictions placed on a file opened
by a process are removed when the process closes the file with a <A HREF="132_L2_DosClose.html">DosClose
</A>request.<!-- lm: 0x2 4 -->
<P>
Sharing Mode<!-- lm: 0x11 13 -->
<UL> Specifies the type of file access
that other processes may have. For example, if other processes can continue
to read the file while your process is operating on it, specify Deny Write.
The sharing mode prevents other processes from writing to the file but still
allows them to read it.<!-- lm: 0x2 4 -->
</UL> Access Mode<!-- lm: 0x11 13 -->
<UL> Specifies
the type of file access (access mode) needed by your process. For example,
if your process requires read/write access, and another process has already
opened the file with a sharing mode of Deny None, your DosProtectOpen request
succeeds. However, if the file is open with a sharing mode of Deny Write,
the process is denied access.
<P>
If the file is inherited by a child process, all sharing and access restrictions
also are inherited.
<P>
If an open file handle is duplicated by a call to <A HREF="369_L2_DosDupHandle.html">DosDupHandle</A>,
all sharing and access restrictions also are duplicated.<!-- lm: 0x2 4 --><!-- lm: 0x2 1 -->
</UL>

<P><HR>

<A HREF="918_L2H_DosProtectOpenParame.html">[Back: DosProtectOpen Parameter - fsOpenFlags]</A> <BR>
<A HREF="920_L2H_DosProtectOpenParame.html">[Next: DosProtectOpen Parameter - peaop2]</A> 
</BODY>
</HTML>
