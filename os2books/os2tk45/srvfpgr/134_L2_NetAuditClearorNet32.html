<HTML>
<HEAD>
<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="TEXT/HTML; CHARSET=UTF-8">
<TITLE>NetAuditClear or Net32AuditClear</TITLE>
</HEAD>
<BODY>
<H1>NetAuditClear or Net32AuditClear</H1><!-- entering slot 164 -->NetAuditClear or Net32AuditClear
<P>
The NetAuditClear API clears the audit log file and, optionally, saves the
contents to another file.<!-- lm: 0x2 1 -->
<UL>
<P>
Restrictions
<P>
<!-- lm: 0x2 10 -->
<UL>
<P>
This API can be called from DLS and OS/2 workstations, but DLS workstations
can issue this call only to a remote LAN Server workstation. Administrator
authority is required to call this API.<!-- lm: 0x2 1 -->
</UL> Syntax
<P>
<!-- lm: 0x2 10 -->
<UL>
<PRE>#include &lt;netcons.h&gt;
#include &lt;audit.h&gt;
 
NetAuditClear(<I>pszServername</I>, <I>pszBackupFile</I>,
              <I>reserved</I>);     /* 16 bit */
 
Net32AuditClear(<I>pszServername</I>, <I>pszBackupFile</I>,
              <I>reserved</I>);     /* 32 bit */
</PRE>
<!-- lm: 0x2 1 -->
</UL>Parameters
<P>
<!-- lm: 0x2 10 -->
<UL>
<P>
See <A HREF="021_L2_CommonParameterDefin.html">Common Parameter Definitions
</A>for descriptions of parameters not defined here.<!-- lm: 0x2 10 -->
<P>
<I>pszBackupFile</I><!-- lm: 0x12 20 -->
<UL> (const unsigned char LSFAR
*) optionally points to an ASCIIZ string containing the name for a backup
file.  The calling application must have write privilege for the path specified
by<I> pszBackupFile</I>.  The path name also must be accessible by the OS/2
DosMove function.  If the path name is relative, it is assumed to be relative
to the IBMLAN\LOGS directory.
<P>
A NULL pointer tells NetAuditClear not to save the audit log entries.<!-- lm: 0x2 10 -->
</UL><I> reserved
</I><!-- lm: 0x12 20 -->
<UL>(unsigned char LSFAR *) must be NULL.<!-- lm: 0x2 10 -->
</UL><!-- lm: 0x2 1 -->
</UL>Return Codes
<P>
<!-- lm: 0x2 10 -->
<UL>
<P>
The following table lists the return codes most significant to this API.
 (See <A HREF="462_L1_APIReturnCodes.html">API Return Codes</A> for a complete
list of return codes.) ┌─────────────────────────────┬───────┬────────────────────────────────────────┐│SYMBOLICCONSTANT
    │VALUE│MEANING                │
<BR>
├─────────────────────────────┼───────┼────────────────────────────────────────┤
<BR>
│ NERR_Success         │ 0   │ No errors were encountered.       │
<BR>
├─────────────────────────────┼───────┼────────────────────────────────────────┤
<BR>
│ ERROR_PATH_NOT_FOUND     │ 3   │ The path was not found.         │
<BR>
├─────────────────────────────┼───────┼────────────────────────────────────────┤
<BR>
│ ERROR_ACCESS_DENIED     │ 5   │ Administrator privilege is required.  │

<BR>
├─────────────────────────────┼───────┼────────────────────────────────────────┤
<BR>
│ ERROR_SHARING_VIOLATION   │ 32   │ A sharing violation occurred.      │
<BR>
├─────────────────────────────┼───────┼────────────────────────────────────────┤
<BR>
│ ERROR_BAD_NETPATH      │ 53   │ The network path cannot be found.    │
<BR>
├─────────────────────────────┼───────┼────────────────────────────────────────┤
<BR>
│ ERROR_NETWORK_ACCESS_DENIED │ 65   │ Network access is denied.        │
<BR>
├─────────────────────────────┼───────┼────────────────────────────────────────┤
<BR>
│ ERROR_INVALID_PARAMETER   │ 87   │ At least one parameter value is not
  │
<BR>
│               │    │ valid.                 │
<BR>
├─────────────────────────────┼───────┼────────────────────────────────────────┤
<BR>
│ ERROR_INVALID_NAME      │ 123  │ There is an incorrect character or   │

<BR>
│               │    │ incorrectly formed file system name.  │
<BR>
├─────────────────────────────┼───────┼────────────────────────────────────────┤
<BR>
│ ERROR_FILENAME_EXCED_RANGE  │ 206.  │ The file name is longer than 8 charac-
│
<BR>
│               │    │ ters or the extension is longer than 3 │
<BR>
│               │    │ characters.               │
<BR>
├─────────────────────────────┼───────┼────────────────────────────────────────┤
<BR>
│ NERR_NetNotStarted      │ 2102  │ The redirector NETWKSTA.200 has not
  │
<BR>
│               │    │ been started.              │
<BR>
├─────────────────────────────┼───────┼────────────────────────────────────────┤
<BR>
│ NERR_RemoteOnly       │ 2106  │ This operation is not supported on   │

<BR>
│               │    │ workstations.              │
<BR>
├─────────────────────────────┼───────┼────────────────────────────────────────┤
<BR>
│ NERR_WkstaNotStarted     │ 2138  │ The Requester service has not been
  │
<BR>
│               │    │ started.                │
<BR>
├─────────────────────────────┼───────┼────────────────────────────────────────┤
<BR>
│ NERR_InternalError      │ 2140  │ An internal error has occurred.     │
<BR>
├─────────────────────────────┼───────┼────────────────────────────────────────┤
<BR>
│ NERR_BadTransactConfig    │ 2141  │ The server is not configured for 
 │
<BR>
│               │    │ transactions.              │
<BR>
├─────────────────────────────┼───────┼────────────────────────────────────────┤
<BR>
│ NERR_InvalidAPI       │ 2142  │ The requested API is not supported on
 │
<BR>
│               │    │ the remote server.           │
<BR>
├─────────────────────────────┼───────┼────────────────────────────────────────┤
<BR>
│ NERR_InvalidComputer     │ 2351  │ The specified computer name is not
  │
<BR>
│               │    │ valid.                 │
<BR>
└─────────────────────────────┴───────┴────────────────────────────────────────┘
<BR>

<P>
Other codes could be returned from the following functions:<!-- lm: 0x2 12 -->
<UL>
<P>
<LI><!-- lm: 0x2 15 -->DosDelete<!-- lm: 0x2 12 -->
<BR>
<LI><!-- lm: 0x2 15 -->DosFsCtl<!-- lm: 0x2 12 -->
<BR>
<LI><!-- lm: 0x2 15 --><!-- entering slot 165 -->DosGetShrSeg<!-- lm: 0x2 12 -->
<BR>
<LI><!-- lm: 0x2 15 -->DosMove<!-- lm: 0x2 12 -->
<BR>
<LI><!-- lm: 0x2 15 -->DosOpen<!-- lm: 0x2 10 -->
</UL><!-- lm: 0x2 1 -->
</UL>Remarks
<P>
<!-- lm: 0x2 10 -->
<UL>
<P>
The NetAuditWrite API (see <A HREF="136_L2_NetAuditWriteorNet32.html">Auditing
- NetAuditWrite</A>) issues an<I> admin</I> alert when the audit log file
reaches 80% capacity and again when the file reaches 100% capacity. At 100%,
NetAuditWrite fails. Therefore, applications should periodically clear the
audit log file of outdated information.
<P>
To set a maximum size for the audit log file, use one of the following methods:
<!-- lm: 0x2 12 -->
<UL>
<P>
<LI><!-- lm: 0x2 15 -->Use the NET CONFIG command with the /MAXAUDITLOG
option (see the<I> LAN Server Commands and Utilities</I> for more information).
<!-- lm: 0x2 12 -->
<P>
<LI><!-- lm: 0x2 15 -->Set the<I> maxauditlog</I> parameter in the IBMLAN.INI
file (see the<I> LAN Server Network Administrator Reference Volume 2: Performance
Tuning</I> for a description of IBMLAN.INI).<!-- lm: 0x2 12 -->
<P>
<LI><!-- lm: 0x2 15 -->Call the NetServerSetInfo API with the<I> sv_maxauditsz
</I>parameter.<!-- lm: 0x2 10 -->
</UL><!-- lm: 0x2 1 -->
</UL>Related Information
<P>
<!-- lm: 0x2 10 -->
<UL>
<P>
For information about:<!-- lm: 0x2 12 -->
<UL>
<P>
<LI><!-- lm: 0x2 15 -->Getting the status of audit log file capacity, see
<A HREF="079_L2_NetAlertRaiseorNet32.html">Alert - NetAlertRaise</A>.<!-- lm: 0x2 12 --> <!-- lm: 0x2 15 -->
<UL>Writing
an entry to the audit log file, see <A HREF="136_L2_NetAuditWriteorNet32.html">Auditing
- NetAuditWrite</A>.<!-- lm: 0x2 10 -->
</UL>

<P><HR>

<A HREF="133_L2_RelatedInformation.html">[Back: Related Information]</A> <BR>
<A HREF="135_L2_NetAuditReadorNet32A.html">[Next: NetAuditRead or Net32AuditRead]</A> 
</BODY>
</HTML>
