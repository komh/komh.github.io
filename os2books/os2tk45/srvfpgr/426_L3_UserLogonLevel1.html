<HTML>
<HEAD>
<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="TEXT/HTML; CHARSET=UTF-8">
<TITLE>User Logon Level 1</TITLE>
<STYLE>
PRE {
  FONT-FAMILY: Consolas, "Lucida Console", "Courier New", Courier, MONOSPACE;
}
</STYLE>
</HEAD>
<BODY>
<H1>User Logon Level 1</H1><!-- entering slot 555 -->
<PRE>struct user_logon_info_1 {
 unsigned short               usrlog1_code;
 unsigned char                usrlog1_eff_name[UNLEN+1];
 unsigned char                usrlog1_pad_1;
 unsigned short               usrlog1_priv;
 unsigned long                usrlog1_auth_flags;
 unsigned short               usrlog1_num_logons;
 unsigned short               usrlog1_bad_pw_count;
 unsigned long                usrlog1_last_logon;
 unsigned long                usrlog1_last_logoff;
 unsigned long                usrlog1_logoff_time;
 unsigned long                usrlog1_kickoff_time;
 long                         usrlog1_password_age;
 unsigned long                usrlog1_pw_can_change;
 unsigned long                usrlog1_pw_must_change;
 unsigned char LSFAR * LSPTR  usrlog1_computer;
 unsigned char LSFAR * LSPTR  usrlog1_domain;
 unsigned char LSFAR * LSPTR  usrlog1_script_path;
 unsigned long                usrlog1_reserved1;
};
</PRE>

<P>
where:<!-- lm: 0x2 3 -->
<UL>
<P>
<LI><!-- lm: 0x2 6 --><I>usrlog1_code</I> specifies a response from the
API, according to the following values: ┌─────────────────────────────┬───────┬────────────────────────────────────────┐
<BR>
│ SYMBOLIC CONSTANT      │ VALUE │ MEANING                 │
<BR>
├─────────────────────────────┼───────┼────────────────────────────────────────┤
<BR>
│ VALIDATED_LOGON       │ 0   │ No errors were encountered.       │
<BR>
├─────────────────────────────┼───────┼────────────────────────────────────────┤
<BR>
│ ERROR_ACCESS_DENIED     │ 5   │ The username and password do not cor-
 │
<BR>
│               │    │ respond to an active account.      │
<BR>
├─────────────────────────────┼───────┼────────────────────────────────────────┤
<BR>
│ NERR_NonValidatedLogon    │ 2217  │ The logon server could not validate
  │
<BR>
│               │    │ the logon.               │
<BR>
├─────────────────────────────┼───────┼────────────────────────────────────────┤
<BR>
│ NERR_InvalidRequester    │ 2240  │ The user is not allowed to log on from
│
<BR>
│               │    │ this requester.             │
<BR>
├─────────────────────────────┼───────┼────────────────────────────────────────┤
<BR>
│ NERR_InvalidLogonHours    │ 2241  │ The user is not allowed to log on
at  │
<BR>
│               │    │ this time.               │
<BR>
├─────────────────────────────┼───────┼────────────────────────────────────────┤
<BR>
│ NERR_PasswordExpired     │ 2242  │ The password has expired.        │
<BR>
└─────────────────────────────┴───────┴────────────────────────────────────────┘
<BR>

<P>
<!-- lm: 0x2 3 -->
<P>
<LI><!-- lm: 0x2 6 -->The second and third fields in the<I> user_logon_info_1
</I>are identical to the corresponding fields in the previous level.<!-- lm: 0x2 3 -->
<P>
<LI><!-- lm: 0x2 6 --><I>usrlog1_priv</I> specifies the user's privilege
level. It can be one of the following: ┌────────────────────┬───────┬─────────────────────────────────────────────────┐
<BR>
│ SYMBOLIC CONSTANT  │ VALUE │ PRIVILEGE                    │
<BR>
├────────────────────┼───────┼─────────────────────────────────────────────────┤
<BR>
│ USER_PRIV_GUEST   │ 0   │ Guest                      │
<BR>
├────────────────────┼───────┼─────────────────────────────────────────────────┤
<BR>
│ USER_PRIV_USER   │ 1   │ User                       │
<BR>
├────────────────────┼───────┼─────────────────────────────────────────────────┤
<BR>
│ USER_PRIV_ADMIN   │ 2   │ Administrator                  │
<BR>
└────────────────────┴───────┴─────────────────────────────────────────────────┘
<BR>
<!-- lm: 0x2 3 -->
<P>
<LI><!-- lm: 0x2 6 --><I>usrlog1_auth_flags</I> grants operator rights (accounts,
print, comm, and server) to users, both locally and remotely.  See the chart
about operator privileges at topic <A HREF="417_L3_UserAccountInformati.html">User
Account Information Level 2</A>.<!-- lm: 0x2 3 -->
<P>
<LI><!-- lm: 0x2 6 --><I>usrlog1_num_logons</I> is the number of instances
of logons to the account.  A value of -1 means the number of logons is unknown.
<!-- lm: 0x2 3 -->
<P>
<LI><!-- lm: 0x2 6 --><I>usrlog1_bad_pw_count</I> is the number of attempts
to validate a bad password.  A value of -1 means the number is unknown.
<!-- lm: 0x2 3 -->
<P>
<LI><!-- lm: 0x2 6 --><I>usrlog1_last_logon</I> is the time and date (seconds
since 1 January 1970) the user last logged on.<!-- lm: 0x2 3 -->
<P>
<LI><!-- lm: 0x2 6 --><I>usrlog1_last_logoff</I> is the time and date (seconds
since 1 January 1970) when the last logoff occurred.  A value of 0 means
the time is unknown.<!-- lm: 0x2 3 -->
<P>
<LI><!-- lm: 0x2 6 --><I>usrlog1_logoff_time</I> is the time (in seconds)
and date (since 1 January 1970) when the user should log off.  A value of
USER_NO_LOGOFF means the user never has to log off.  The constant USER_NO_LOGOFF
is defined in the ACCESS.H header file.<!-- lm: 0x2 3 -->
<P>
<LI><!-- lm: 0x2 6 --><I>usrlog1_kickoff_time</I> is the time (in seconds)
when the user will be logged off.  A value of USER_NO_LOGOFF means the user
will not be logged off by the system.  The constant USER_NO_LOGOFF is defined
in the ACCESS.H header file.<!-- lm: 0x2 3 -->
<P>
<LI><!-- lm: 0x2 6 --><I>usrlog1_password_age</I> is the time (in seconds)
since the password last was changed.<!-- lm: 0x2 3 -->
<P>
<LI><!-- lm: 0x2 6 --><I>usrlog1_pw_can_change</I> is the time (in seconds)
and date (since 1 January 1970) when the user can change his password.  A
value of TIMEQ_FOREVER, as defined in the ACCESS.H header file, means the
user never can change the password.<!-- lm: 0x2 3 -->
<P>
<LI><!-- lm: 0x2 6 --><I>usrlog1_pw_must_change</I> is the time (in seconds)
and the date (since 1 January 1970) when the password must be changed.<!-- lm: 0x2 3 -->
<P>
<LI><!-- lm: 0x2 6 --><I>usrlog1_computer</I> is the server that validated
the user's logon.<!-- lm: 0x2 3 -->
<P>
<LI><!-- lm: 0x2 6 --><I>usrlog1_domain</I> is the domain to which the user
currently is logged on.<!-- lm: 0x2 3 -->
<P>
<LI><!-- lm: 0x2 6 --><I>usrlog1_script_path</I> is the relative path to
the logon script of an account.<!-- lm: 0x2 3 -->
<P>
<LI><!-- lm: 0x2 6 --><I>usrlog1_reserved1</I> is reserved and cannot be
used.<!-- lm: 0x2 1 -->
</UL>

<P><HR>

<A HREF="425_L3_UserLogonLevel0.html">[Back: User Logon Level 0]</A> <BR>
<A HREF="427_L3_UserLogonLevel2.html">[Next: User Logon Level 2]</A> 
</BODY>
</HTML>
