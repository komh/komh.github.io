<HTML>
<HEAD>
<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="TEXT/HTML; CHARSET=UTF-8">
<TITLE>Starting and Restarting the Workplace Shell</TITLE>
</HEAD>
<BODY>
<H1>Starting and Restarting the Workplace Shell</H1><!-- entering slot 87 -->
<P>
The Workplace Shell starts automatically when OS/2 is booted. Because all
Workplace Shell applications run under the Workplace process, one application
with an error can cause the Workplace Shell to trap or to hang. Should the
Workplace Shell become inoperative, the system must be rebooted. To avoid
frequent reboots, one method that can be used is to start the Workplace
Shell from an OS/2 window. Then should a hang occur, the Workplace Shell
can be terminated by going to the OS/2 window and entering a Ctrl+Break.

<P>
The procedure for manually starting and restarting the Workplace Shell is
as follows:<!-- lm: 0x2 2 -->
<UL>
<P>
 <LI><LI><!-- lm: 0x2 6 -->Create a backup copy of your CONFIG.SYS file,
for example:
<PRE>   COPY CONFIG.SYS CONFIG.WPS
</PRE>
<!-- lm: 0x2 2 -->
<P>
 <LI><LI><!-- lm: 0x2 6 -->Edit CONFIG.SYS.  Find the following line:
<PRE>   SET RUNWORKPLACE=C:\OS2\PMSHELL.EXE
</PRE>

<P>
where C: is your boot drive. This line sets the name of the interface to
be started for OS/2. PMSHELL.EXE is the program for the Workplace Shell.
Replace the line with the following:
<PRE>   SET RUNWORKPLACE=C:\OS2\CMD.EXE
</PRE>

<P>
This changes the OS/2 interface from the Workplace Shell to an OS/2 session.
<!-- lm: 0x2 2 -->
<P>
 <LI><LI><!-- lm: 0x2 6 -->By default, the Workplace Shell attempts to recover
from any traps caused by itself or other Workplace Shell applications. Should
this recovery occur, you might see all the objects on the Desktop disappear
temporarily and then re-appear after the Workplace Shell re-initializes.
The Workplace Shell exception handler can be disabled by adding the following
line to the CONFIG.SYS file:
<PRE>   SET SHELLEXCEPTIONHANDLER=OFF
</PRE>

<P>
With the exception handler disabled, errors will result in the typical OS/2
error pop-up windows. Thus, errors encountered will not be masked by the
Workplace Shell's exception handler. However, the ability for the Workplace
Shell to recover from errors has been impacted.<!-- lm: 0x2 2 -->
<P>
 <LI><LI><!-- lm: 0x2 6 -->Save the changes to CONFIG.SYS. These changes
will not take effect until a shutdown and reboot are performed.<!-- lm: 0x2 2 -->
<P>
 <LI><LI><!-- lm: 0x2 6 -->Shutdown the system and then reboot.<!-- lm: 0x2 2 -->
<P>
 <LI><LI><!-- lm: 0x2 6 -->After the system reboots, instead of bringing
up the Workplace Shell (PMSHELL.EXE), the system will bring up an OS/2 prompt
(CMD.EXE).<!-- lm: 0x2 2 -->
<P>
 <LI><LI><!-- lm: 0x2 6 -->Start another OS/2 session by issuing START or
START /FS for a full-screen session. This session can be used for running
other programs if needed.<!-- lm: 0x2 2 -->
<P>
 <LI><LI><!-- lm: 0x2 6 -->Return to the original OS/2 session, and then
manually start the Workplace Shell by typing:
<PRE>   PMSHELL
</PRE>
<!-- lm: 0x2 1 -->
</UL>
<P>
It is important to invoke PMSHELL from the first OS/2 session. There are
two reasons for this:<!-- lm: 0x2 3 -->
<UL>
<P>
<LI><!-- lm: 0x2 6 -->First, the Workplace Shell assumes that it is the
first process in the system.<!-- lm: 0x2 3 -->
<P>
<LI><!-- lm: 0x2 6 -->Secondly, OS/2 assumes that the first application
to create a message queue is the Workplace Shell and allocates additional
resources for it. If another application creates a message queue before
the Workplace Shell, unpredictable problems occur when the Workplace Shell
is started.<!-- lm: 0x2 1 -->
</UL>
<P>
Now that the Workplace Shell has been started from an OS/2 session, should
the Workplace Shell trap or hang, it can be stopped by simply going back
to that OS/2 session and terminating the session, for example, by selecting
the Ctrl+Break keys. The Workplace Shell can then be restarted from the
same window by invoking PMSHELL again.
<P>
After the Workplace Shell has terminated, the DLLs containing Workplace
Shell objects should be unlocked. This allows them to be deleted or replaced
before restarting the Workplace Shell.

<P><HR>

<A HREF="082_L3_DebuggingwithUsefulC.html">[Back: Debugging with Useful CONFIG.SYS Statements]</A> <BR>
<A HREF="084_L3_DebuggingwiththeKern.html">[Next: Debugging with the Kernel Debugger]</A> 
</BODY>
</HTML>
