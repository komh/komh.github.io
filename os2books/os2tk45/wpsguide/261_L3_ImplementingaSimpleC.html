<HTML>
<HEAD>
<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="TEXT/HTML; CHARSET=UTF-8">
<TITLE>Implementing a Simple Class</TITLE>
</HEAD>
<BODY>
<H1>Implementing a Simple Class</H1><!-- entering slot 280 -->
<P>
The language binding files generated by the SOM compiler include a template
for the C-language source program for the class implementation. This program
template contains stub procedures for all new and override methods specified
in the class definition file. You must supply the code implementation for
the stub-method procedures. The sample codes illustrated in the following
figures show the stages in this process:
<PRE>/*
 * A class defining a set of objects (dogs)
*/
#ifndef dog1_idl
#define dog1_idl
#include &lt;somobj.idl&gt;

interface Dog : SOMObject
{
  void Bark();

  // Have the dog bark

  #ifdef __SOMIDL__
  implementation
  {
    releaseorder:  Bark;

    //# Class modifiers

    callstyle = oidl;    // For compatibility with SOM1
    majorversion = 1;
    minorversion = 2;
  };
  #endif /* __SOMIDL__ */
};
#endif  /* dog1_idl */

</PRE>

<P>
In the previous sample code, the Dog class is defined. According to this
class definition file, the Dog class is derived from the SOMObject class.
The behavior of the SOMObject class is defined in the file, SOMOBJ.IDL,
which was generated by the SOM compiler when the SOMObject class was implemented.
Object instances of the Dog class inherit the behavior of its parent class
SOMObject by specifying the SOMOBJ.IDL file in the Include section of the
Dog class definition file. This means that all methods that can act on instances
of SOMObject can act on the Dog class objects.
<P>
In the real world, dogs have many characteristics and behaviors. A comprehensive
definition of the Dog class would include methods that relate to these characteristics
and behaviors. In this example, the only behavior that is defined is barking.
The behavior, "dogs can bark" corresponds to the prototype of the "bark"
method specified in the Methods section of the class definition file.
<P>
The SOM compiler processes the DOG.IDL file as shown in the previous sample
code and generates the DOG.C C-language source-program template shown in
the following figure. Notice that DOG.IH, another file generated by the
SOM compiler, is included automatically in this program template. This file
contains the data structures, macros, and functions for accessing data and
methods for object instances of the Dog class. This file also provides stubs
for all methods prototyped in the Methods section of the DOG.IDL file.
<PRE>/*
*  This file was generated by the SOM compiler and Emitter framework.
*  Generated using:  SOM Emitter emitctm: 2.38
*/

#ifndef SOM_Module_dog1_Source
#define SOM_Module_dog1_Source
#endif

#define Dog_Class_Source

#include "dog1.ih"

/*
 * Have the dog bark
*/

SOM_Scope void  SOMLINK Bark(Dog *somSelf)
{
    /* DogData *somThis = DogGetData(somSelf); */
    DogMethodDebug("Dog","Bark");
}

</PRE>

<P>
The general form for a method stub is shown in the following figure:
<PRE>SOM_Scope void SOMLINK &lt;methodname&gt;(&lt;classname&gt; *somSelf)
{
  &lt;classname&gt;Data *somThis = &lt;classname&gt;GetData(somSelf);
  &lt;classname&gt;MethodDebug("&lt;classname&gt;", "&lt;methodname&gt;");
}

</PRE>

<P>
SOM_Scope and SOMLINK are C macros used internally with the C-binding files.


<P><HR>

<A HREF="260_L3_ProcessingIDLFiles.html">[Back: Processing IDL Files]</A> <BR>
<A HREF="262_L4_UsingsomSelf.html">[Next: Using somSelf]</A> 
</BODY>
</HTML>
