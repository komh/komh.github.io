<HTML>
<HEAD>
<TITLE>Handling a Scan Code</TITLE>
</HEAD>
<BODY>
<H1>Handling a Scan Code</H1><!-- entering slot 1721 -->
<P>
All WM_CHAR messages generated by keyboard input events have valid scan
codes.  WM_CHAR messages posted by other applications might or might not
have valid scan codes.  The following code fragment shows how to extract
a scan code from a WM_CHAR message:
<PRE>    USHORT fsKeyFlags;
    UCHAR  uchScanCode;

    case WM_CHAR:
    fsKeyFlags = (USHORT) SHORT1FROMMP(mp1);

    if (fsKeyFlags &amp; KC_SCANCODE) {

        /* Get the scan code from mp1.   */
        uchScanCode = CHAR4FROMMP(mp1);
        .
        . /* Process the scan code.      */
        .

        return (MRESULT) TRUE;
       }

</PRE>


<P><HR>

<A HREF="1683_L3_HandlingVirtualKeyCo.html">[Back: Handling Virtual-Key Codes]</A> <BR>
<A HREF="1685_L1_MousePointersandIcon.html">[Next: Mouse Pointers and Icons]</A> 
</BODY>
</HTML>
