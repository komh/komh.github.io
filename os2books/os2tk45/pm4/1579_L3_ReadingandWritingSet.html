<HTML>
<HEAD>
<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="TEXT/HTML; CHARSET=UTF-8">
<TITLE>Reading and Writing Settings</TITLE>
</HEAD>
<BODY>
<H1>Reading and Writing Settings</H1><!-- entering slot 1614 -->
<P>
An application can store strings, integers, and binary data in an initialization
file and retrieve them.  To read from or write to an initialization file,
your application must provide a section name and a key name that specify
which setting to read or change.  If the section or key name you specify
in a writing operation does not exist in the file, it is added to the file
and assigned the given value.
<P>
The following code fragment creates a section named "MyApp" and a key named
"MainWindowColor" in a previously opened initialization file, and assigns
the value of the RGB structure to the new setting:
<P>

<PRE>
    HINI hini;
    RGB rgb = { 0xff, 0x00, 0x00 };

    PrfWriteProfileData(hini, "MyApp", "MainWindowColor", &amp;rgb, sizeof(RGB));

</PRE>

<P>
To read a setting, your application can retrieve the size of the setting
and then read the setting into an appropriate buffer by using the PrfQueryProfileSize
and PrfQueryProfileData functions, as shown in the following example.  This
example reads the setting "MainWindowColor" from the "MyApp" section only
if the size of the data is equal to the size of the RGB structure.
<P>

<PRE>    HINI hini;
    ULONG cb;
    RGB rgb;

    PrfQueryProfileSize(hini, "MyApp", "MainWindowColor", &amp;cb);
    if (cb == sizeof(RGB))
        PrfQueryProfileData(hini, "MyApp", "MainWindowColor", &amp;rgb, &amp;cb);

</PRE>

<P>
An application can also read strings by using the PrfQueryProfileString
function, write strings by using the PrfWriteProfileString function, and
read integers (stored as strings) by using the PrfQueryProfileInt function.


<P><HR>

<A HREF="1578_L3_CreatingOpeningandCl.html">[Back: Creating, Opening, and Closing Initialization Files]</A> <BR>
<A HREF="1580_L3_IdentifyingtheOS2Ini.html">[Next: Identifying the OS/2 Initialization Files]</A> 
</BODY>
</HTML>
