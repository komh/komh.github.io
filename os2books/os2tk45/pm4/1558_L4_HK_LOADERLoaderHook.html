<HTML>
<HEAD>
<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="TEXT/HTML; CHARSET=UTF-8">
<TITLE>HK_LOADER - Loader Hook</TITLE>
</HEAD>
<BODY>
<H1>HK_LOADER - Loader Hook</H1><!-- entering slot 1592 -->
<P>
The<I> loader hook</I> allows the library and procedure loading and deleting
calls to be intercepted. The following code shows the syntax for a loader
hook function:
<PRE>BOOL EXPENTRY LoaderHook(HAB   hab,
                         LONG  idContext,
                         PSZ   pszLibname,
                         PHLIB hlib,
                         PSZ   pszProcname,
                         PFNWP wndProc);
</PRE>

<P>
If the hook attempts a load or deletion which is unsuccessful, then the
hook must establish the relevant error information.
<P>
The<I> hab</I> parameter is the anchor block handle.
<P>
The<I> idContext</I> parameter is the origin of the call to the hook:<!-- lm: 0x2 1 -->
<UL>
<P>
LHK_DELETEPROC<!-- lm: 0x12 11 -->
<UL> WinDeleteProcedure<!-- lm: 0x2 1 -->
</UL> LHK_DELETELIB
<!-- lm: 0x12 11 -->
<UL>WinDeleteLibrary<!-- lm: 0x2 1 -->
</UL> LHK_LOADPROC
<!-- lm: 0x12 11 -->
<UL>WinLoadProcedure<!-- lm: 0x2 1 -->
</UL> LHK_LOADLIB
<!-- lm: 0x12 11 -->
<UL>WinLoadLibrary<!-- lm: 0x2 1 -->
</UL>
<P>
The<I> pszLibname</I> parameter is the library name.
<P>
The<I> hlib</I> parameter is a pointer to a library handle.
<P>
If the<I> idContext</I> parameter parameter is set to LHK_LOADLIB, then
this hook must set the value of this parameter to the handle of the loaded
library or to NULLHANDLE if the load fails.
<P>
The<I> pszProcname</I> parameter is the procedure name.
<P>
The<I> wndProc</I> parameter is the window procedure identifier.
<P>
If the<I> idContext</I> parameter is set LHK_LOADPROC, then this hook must
set the value of this parameter to the handle of the loaded procedure or
to NULL if the load fails.
<P>
The<I> pfSuccess</I> parameter is the success indicator, which is either
TRUE or FALSE. If it is TRUE, the library or procedure loaded or deleted
successfully. If it is FALSE, the library or procedure not loaded or deleted
successfully.
<P>
When this function returns TRUE, it does not call the next hook in chain.
When this function returns FALSE, then it does call the next hook in chain.


<P><HR>

<A HREF="1557_L4_HK_JOURNALRECORDJour.html">[Back: HK_JOURNALRECORD - Journal Record Hook]</A> <BR>
<A HREF="1559_L4_HK_LOCKUPLockupHook.html">[Next: HK_LOCKUP - Lockup Hook]</A> 
</BODY>
</HTML>
