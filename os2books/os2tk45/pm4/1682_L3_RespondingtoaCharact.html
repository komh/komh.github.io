<HTML>
<HEAD>
<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="TEXT/HTML; CHARSET=UTF-8">
<TITLE>Responding to a Character Message</TITLE>
<STYLE>
PRE {
  FONT-FAMILY: Consolas, "Lucida Console", "Courier New", Courier, MONOSPACE;
}
</STYLE>
</HEAD>
<BODY>
<H1>Responding to a Character Message</H1><!-- entering slot 1719 -->
<P>
The following code fragment shows how to respond to a character message:

<PRE>    USHORT fsKeyFlags;
    UCHAR  uchChr1;

    case WM_CHAR:
    fsKeyFlags = (USHORT) SHORT1FROMMP(mp1);

    if (fsKeyFlags &amp; KC_CHAR) {

        /* Get the character code from mp2. */
        uchChr1 = (UCHAR) CHAR1FROMMP(mp2);
        .
        . /* Process the character.         */
        .

        return TRUE;
    }

</PRE>

<P>
If the KC_CHAR flag is not set, the<I> mp2</I> parameter from CHAR1FROMMP
still might contain useful information.  If either the Alt key or the Ctrl
key, or both, are down, the KC_CHAR bit is not set when the user presses
another key.  For example, if the user presses the<B> a</B> key when the
Alt key is down, the low word of<I> mp2</I> contains the ASCII value for
"a" (0x0061), the KC_ALT flag is set, and the KC_CHAR flag is clear.  If
the translation does not generate any valid characters, the<I> char</I> field
is set to 0.
<P>


<P><HR>

<A HREF="1681_L3_CheckingforaKeyUporK.html">[Back: Checking for a Key-Up or Key-Down Event]</A> <BR>
<A HREF="1683_L3_HandlingVirtualKeyCo.html">[Next: Handling Virtual-Key Codes]</A> 
</BODY>
</HTML>
