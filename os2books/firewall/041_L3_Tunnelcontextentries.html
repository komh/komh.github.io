<HTML XPOS=LEFT YPOS=BOTTOM WIDTH=100% HEIGHT=100%>
<HEAD>
<!-- extra bytes: 03 00 44 01 00 08 00 11 64 00 64 00 --><TITLE>Tunnel context entries</TITLE>
</HEAD>
<BODY>
<H1>Tunnel context entries</H1><!-- entering slot 42 -->
<P>
A<B> tunnel context entry</B> defines the properties of an IPSec tunnel
(and its Security Associations). 
<P>
Tunnel context entries are configured by entering the tunnel parameters
into the configuration file
<PRE>    %ETC%\SECURITY\FWMCTX.MAN
</PRE>
 
<P>
<B>Note: </B> It is possible to use a different file name; however, doing
so will cause an error in CFGFILT when the <A HREF="043_L3_IPfiltersfortunnelli.html">filter
rules</A> are activated.<!-- lm: 0x2 1 -->
<UL>
<P>
 
<P>
A context entry within the configuration file has the following fields,
one per line:<!-- lm: 0x2 5 -->
<UL><!-- lm: 0x2 5 -->
<P>
Line 1<!-- lm: 0x2 15 -->
<UL> <A HREF="088_L0_.html">Partner's IP address
</A><!-- lm: 0x2 5 -->
</UL>Line 2<!-- lm: 0x2 15 -->
<UL> <A HREF="089_L0_.html">Local IP address
</A><!-- lm: 0x2 5 -->
</UL>Line 3<!-- lm: 0x2 15 -->
<UL> <A HREF="090_L0_.html">Tunnel ID</A><!-- lm: 0x2 5 -->
</UL>Line 4<!-- lm: 0x2 15 -->
<UL> <A HREF="091_L0_.html">Partner's SA
for ESP</A><!-- lm: 0x2 5 -->
</UL>Line 5<!-- lm: 0x2 15 -->
<UL> <A HREF="092_L0_.html">Partner's SA
for AH</A><!-- lm: 0x2 5 -->
</UL>Line 6<!-- lm: 0x2 15 -->
<UL> <A HREF="093_L0_.html">Local SA for
ESP</A><!-- lm: 0x2 5 -->
</UL>Line 7<!-- lm: 0x2 15 -->
<UL> <A HREF="094_L0_.html">Local SA for
AH</A><!-- lm: 0x2 5 -->
</UL>Line 8<!-- lm: 0x2 15 -->
<UL> <A HREF="095_L0_.html">Local encryption
algorithm</A><!-- lm: 0x2 5 -->
</UL>Line 9<!-- lm: 0x2 15 -->
<UL> <A HREF="096_L0_.html">Local encryption
key length</A><!-- lm: 0x2 5 -->
</UL>Line 10<!-- lm: 0x2 15 -->
<UL> <A HREF="097_L0_.html">Local encryption
key</A><!-- lm: 0x2 5 -->
</UL>Line 11<!-- lm: 0x2 15 -->
<UL> <A HREF="098_L0_.html">Partner's encryption
algorithm</A><!-- lm: 0x2 5 -->
</UL>Line 12<!-- lm: 0x2 15 -->
<UL> <A HREF="099_L0_.html">Partner's encryption
key length</A><!-- lm: 0x2 5 -->
</UL>Line 13<!-- lm: 0x2 15 -->
<UL> <A HREF="100_L0_.html">Partner's encryption
key</A><!-- lm: 0x2 5 -->
</UL>Line 14<!-- lm: 0x2 15 -->
<UL> <A HREF="101_L0_.html">Local authentication
algorithm</A><!-- lm: 0x2 5 -->
</UL>Line 15<!-- lm: 0x2 15 -->
<UL> <A HREF="102_L0_.html">Local authentication
key length</A><!-- lm: 0x2 5 -->
</UL>Line 16<!-- lm: 0x2 15 -->
<UL> <A HREF="103_L0_.html">Local authentication
key</A><!-- lm: 0x2 5 -->
</UL>Line 17<!-- lm: 0x2 15 -->
<UL> <A HREF="104_L0_.html">Partner's authentication
algorithm</A><!-- lm: 0x2 5 -->
</UL>Line 18<!-- lm: 0x2 15 -->
<UL> <A HREF="105_L0_.html">Partner's authentication
key length</A><!-- lm: 0x2 5 -->
</UL>Line 19<!-- lm: 0x2 15 -->
<UL> <A HREF="106_L0_.html">Partner's authentication
key</A><!-- lm: 0x2 5 -->
</UL>Line 20<!-- lm: 0x2 15 -->
<UL> <A HREF="107_L0_.html">Start time</A><!-- lm: 0x2 5 -->
</UL>Line 21<!-- lm: 0x2 15 -->
<UL> <A HREF="108_L0_.html">End time</A><!-- lm: 0x2 5 -->
</UL>Line 22<!-- lm: 0x2 15 -->
<UL> <A HREF="109_L0_.html">Reserved</A><!-- lm: 0x2 5 -->
</UL><!-- lm: 0x2 1 -->
</UL>Any text following '#' on a line is considered
a comment. 
<P>
Multiple tunnel context entries can be defined in this file by specifying
them one after another. 
<P>

<P>
Connecting two MPTS IPSec hosts 
<P>
If you are creating a tunnel between two hosts running MPTS V5.3 or above,
you (and/or the administrator on the partner host) can use the tunnel context
definition on one host as the basis for the corresponding definition on
the other host. 
<P>
To do this, create the tunnel context definition on the first host; then,
copy the file FWMCTX.MAN over to the other host.  Edit the copy of FWMCTX.MAN
on the other host, and swap the following values:<!-- lm: 0x2 6 -->
<UL>
<P>
Line 1 and Line 2<!-- lm: 0x2 6 --> Line 4 and Line 6<!-- lm: 0x2 6 -->
<BR>
Line 5 and Line 7<!-- lm: 0x2 6 -->
<BR>
Line 8 and Line 11<!-- lm: 0x2 6 -->
<BR>
Line 9 and Line 12 (These should both be<B> 8</B>, so there is no need to
swap)<!-- lm: 0x2 6 -->
<BR>
Line 10 and Line 13<!-- lm: 0x2 6 -->
<BR>
Line 14 and Line 17 (These should both be<B> KEYED_MD5</B>, so there is
no need to swap)<!-- lm: 0x2 6 -->
<BR>
Line 15 and Line 18 (These should both be<B> 16</B>, so there is no need
to swap)<!-- lm: 0x2 6 -->
<BR>
Line 16 and Line 19<!-- lm: 0x2 1 -->
</UL> 
<P>

<P>
Activating the tunnel
<P>
To activate a tunnel, the <A HREF="053_L2_HAND_K.html">HAND_K</A> command
is used to load the context entries into the IPSec driver:
<PRE>    hand_k fwmctx.man
</PRE>

<P>
from within the directory where FWMCTX.MAN is located. 
<P>
If this command is successful, it will return with no output.  Any output
produced by the HAND_K command indicates an error.  Typical causes of errors
include syntax errors in FWMCTX.MAN, or one of the required device drivers
not being loaded. 
<P>
The tunnel must also be activated on the partner host, according to whatever
method is appropriate for the partner's VPN software.
<P>
  

<P><HR>

<A HREF="040_L3_IPSecdevicedrivers.html">[Back: IPSec device drivers]</A> <BR>
<A HREF="042_L3_Tunnelpolicies.html">[Next: Tunnel policies]</A> 
</BODY>
</HTML>
