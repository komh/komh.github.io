<HTML>
<HEAD>
<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="TEXT/HTML; CHARSET=UTF-8">
<TITLE>SysFileTree</TITLE>
<STYLE>
PRE {
  FONT-FAMILY: Consolas, "Lucida Console", "Courier New", Courier, MONOSPACE;
}
</STYLE>
</HEAD>
<BODY>
<H1>SysFileTree</H1><!-- entering slot 50 --><!-- lm: 0x2 1 -->
<UL>
<P>
Function:<!-- lm: 0x2 11 -->
<UL> SysFileTree<!-- lm: 0x2 1 -->
</UL> Syntax:
<!-- lm: 0x2 11 -->
<UL>rc = SysFileTree(filespec, stem, [options], [tattrib],
[nattrib])<!-- lm: 0x2 11 -->
<P>
<B>filespec</B><!-- lm: 0x2 26 -->
<UL> The filespec to search for.<!-- lm: 0x2 11 -->
</UL><B> stem
</B><!-- lm: 0x2 26 -->
<UL>The name of the stem variable to place the results.

<P>
<B>┴╓: </B> stem.0 contains the number of files and/or directories found.
<!-- lm: 0x2 11 -->
</UL><B>options</B><!-- lm: 0x2 26 -->
<UL> Any logical
combination of the following:<!-- lm: 0x2 26 -->
<P>
F<!-- lm: 0x2 41 -->
<UL> Search for files only.<!-- lm: 0x2 26 -->
</UL> D
<!-- lm: 0x2 41 -->
<UL>Search for directories only.<!-- lm: 0x2 26 -->
</UL> B
<!-- lm: 0x2 41 -->
<UL>Search for both files and directories. (default)
<!-- lm: 0x2 26 -->
</UL>S<!-- lm: 0x2 41 -->
<UL> Scan subdirectories recursively.
(non-default).<!-- lm: 0x2 26 -->
</UL> T<!-- lm: 0x2 41 -->
<UL> Return
time and date fields in the form:
<PRE>YY/MM/DD/HH/MM
</PRE>
<!-- lm: 0x2 26 -->
</UL>O<!-- lm: 0x2 41 -->
<UL> Only report fully qualified
file names.  The default is to report date, time, size, attributes and fully
qualified file name for each file found.<!-- lm: 0x2 26 --><!-- lm: 0x2 11 -->
</UL><B> tattrib
</B><!-- lm: 0x2 26 -->
<UL>The target attribute mask used when searching
for filespec matches. Only filespecs which match the mask will be reported.
 The default mask is '*****' which means the Archive, Directory, Hidden,
Read-Only, and System bits may be either set or clear.  The attributes in
the mask are positional dependant and in the alphabetical order 'ADHRS'.
<!-- lm: 0x2 26 -->
<P>
Mask Options<!-- lm: 0x2 41 -->
<UL> (Target Mask)<!-- lm: 0x2 41 -->
<P>
<LI><!-- lm: 0x2 56 -->The specified attribute may be either set or clear.
<!-- lm: 0x2 41 -->
<P>
<LI><!-- lm: 0x2 56 -->The specified attribute must be set.<!-- lm: 0x2 41 -->
<P>
<LI><!-- lm: 0x2 56 -->The specified attribute must be clear.<!-- lm: 0x2 41 -->
<P>
Examples:<!-- lm: 0x2 56 -->
<UL> (Target Mask)<!-- lm: 0x2 56 -->
<P>
<LI><LI><LI><LI><LI><LI><LI><!-- lm: 0x2 71 -->Find all files which have
set Read-Only bits.<!-- lm: 0x2 56 -->
<P>
<LI><LI><LI><LI><LI><LI><LI><!-- lm: 0x2 71 -->Find all files which have
set Read-Only and Archive bits.<!-- lm: 0x2 56 -->
<P>
<LI><LI><LI><LI><LI><LI><LI><!-- lm: 0x2 71 -->Find all hidden subdirectories.
<!-- lm: 0x2 56 -->
<P>
<LI><LI><LI><LI><LI><LI><LI><!-- lm: 0x2 71 -->Find all files which have
only the Read-Only bit set.<!-- lm: 0x2 56 --><!-- lm: 0x2 41 --><!-- lm: 0x2 26 --><!-- lm: 0x2 11 -->
</UL><B> nattrib
</B><!-- lm: 0x2 26 -->
<UL>The new attribute mask which will be used to
set the attributes of each filespec found to match the target mask.  The
default mask is '*****' which means the Archive, Directory, Hidden, Read-Only,
and System bits will not be changed.  The attributes in the mask are positional
dependant and in the alphabetical order 'ADHRS'.<!-- lm: 0x2 26 -->
<P>
Mask Options<!-- lm: 0x2 41 -->
<UL> (New Atrribute Mask)<!-- lm: 0x2 41 -->
<P>
<LI><!-- lm: 0x2 56 -->The specified attribute will not be changed.<!-- lm: 0x2 41 -->
<P>
<LI><!-- lm: 0x2 56 -->The specified attribute will be set.<!-- lm: 0x2 41 -->
<P>
<LI><!-- lm: 0x2 56 -->The specified attribute will be cleared.<!-- lm: 0x2 41 -->
<P>
Examples:<!-- lm: 0x2 56 -->
<UL> (New Attribute Mask)<!-- lm: 0x2 56 -->
<P>
<LI><LI><LI><LI><LI><LI><LI><!-- lm: 0x2 71 -->Set the Read-Only bit on
all files.<!-- lm: 0x2 56 -->
<P>
<LI><LI><LI><LI><LI><LI><LI><!-- lm: 0x2 71 -->Set the Read-Only and clear
the Archive bits of each file.<!-- lm: 0x2 56 -->
<P>
<LI><LI><LI><LI><LI><LI><LI><!-- lm: 0x2 71 -->Set all attributes on all
files, excluding directory attribute.<!-- lm: 0x2 56 -->
<P>
<LI><LI><LI><LI><LI><LI><LI><!-- lm: 0x2 71 -->Clear all attribute on all
files.
<P>
<B>┴╓: </B> You cannot set the directory bit on non-directory filespecs.
 The attribute field which is displayed in the stem variable is that of
the current attribute setting after any changes have been applied.<!-- lm: 0x2 56 --><!-- lm: 0x2 41 --><!-- lm: 0x2 26 --><!-- lm: 0x2 11 --><!-- lm: 0x2 1 -->
</UL> Purpose:
<!-- lm: 0x2 11 -->
<UL>Finds all files which are equal to the specified
filespec, and places their descriptions (date time size attr filespec) in
a stem variable.<!-- lm: 0x2 1 -->
</UL> RC:<!-- lm: 0x2 11 -->
<UL> Return
Codes<!-- lm: 0x2 11 -->
<P>
<LI><!-- lm: 0x2 26 -->Successful.<!-- lm: 0x2 11 -->
<P>
<LI><!-- lm: 0x2 26 -->Error.  Not enough memory.<!-- lm: 0x2 11 -->
<PRE> Examples:

  /****&lt;&lt; Syntax Examples.&gt;&gt;***********************/

  /* Find all subdirectories on C: */
   call SysFileTree 'c:\*.*', 'file', 'SD'

  /* Find all Read-Only files */
   call SysFileTree 'c:\*.*', 'file', 'S', '***+*'

  /* Clear Archive and Read-Only bits of files which have them set */
   call SysFileTree 'c:\*.*', 'file', 'S', '+**+*', '-**-*'


  /****&lt;&lt; Sample Code and Output Example.&gt;&gt;********/

  /* Code */
   call SysFileTree 'c:\os2*.', 'file', 'B'
   do i=1 to file.0
     say file.i
   end

 /* Actual Output */
12:15:89  12:00a        4096  A-HRS  C:\OS2LDR
12:15:89  12:00a       29477  A-HRS  C:\OS2KRNL
 5:24:89   4:59p           0  -D---  C:\OS2
</PRE>
<!-- lm: 0x2 1 -->
</UL> 

<P><HR>

<A HREF="049_L2_SysFileDelete.html">[Back: SysFileDelete]</A> <BR>
<A HREF="051_L2_SysFileSearch.html">[Next: SysFileSearch]</A> 
</BODY>
</HTML>
