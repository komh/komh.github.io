<HTML>
<HEAD>
<TITLE>DOS Environment</TITLE>
</HEAD>
<BODY>
<H1>DOS Environment</H1><!-- entering slot 332 -->
<P>
The following settings affect the behavior of the DOS emulation environment
within a virtual DOS machine.
<P>
<B>DOS_BACKGROUND_EXECUTION</B><!-- lm: 0x2 0 -->
<P>
<B>Function:</B><!-- lm: 0x12 13 -->
<UL> When set off, suspends execution
of the program when it is in the background.<!-- lm: 0x2 0 -->
</UL><B> Advantages:
</B><!-- lm: 0x12 13 -->
<UL>Many DOS applications are written on the assumption
that they are single tasking and that all the resources of the workstation
can be monopolized. It is not uncommon  for a DOS program to continually
poll for keyboard input (Examples are WordPerfect 5.1 and Lotus 1-2-3 R2.2).
In a multitasking environment, this can impact system performance, especially
when more than one such program is running. Turning the DOS application
off when its virtual DOS machine is in the background reduces its demands
on the system.
<P>
Also see IDLE_SENSITIVITY and IDLE_SECONDS in <A HREF="295_L3_IdleDetection.html">Idle
Detection</A>.<!-- lm: 0x2 0 -->
</UL><B> Drawbacks:</B><!-- lm: 0x12 13 -->
<UL> Communications
programs will fail if background execution is turned off, as will DDE for
Windows applications.
<P>
Try changing the values of<I> IDLE_SECONDS</I> and<I> IDLE_SENSITIVITY</I> before
turning<I> DOS_BACKGROUND_EXECUTION</I> off.<!-- lm: 0x2 0 -->
</UL><B> Default:
</B><!-- lm: 0x12 13 -->
<UL>On (Background execution is enabled).<!-- lm: 0x2 0 -->
</UL><B> Settable:
</B><!-- lm: 0x12 13 -->
<UL>At any time.<!-- lm: 0x2 0 -->
</UL><B> Examples:
</B><!-- lm: 0x12 13 -->
<UL>If more than two DOS programs are running and
tuning with<I> IDLE_SENSITIVITY</I> and<I> IDLE_SECONDS</I> does not provide
sufficient improvement, turn<I> DOS_BACKGROUND_EXECUTION</I> off for the
least used application.<!-- lm: 0x2 0 -->
</UL>
<P>
<B>DOS_BREAK</B><!-- lm: 0x2 0 -->
<P>
<B>Function:</B><!-- lm: 0x12 13 -->
<UL> Enables or disables Ctrl+Break
for the specified VDM. Also check for the<I> BREAK</I> statement in the
CONFIG.SYS. Set<I> BREAK=ON</I> in the CONFIG.SYS to make Ctrl+Break and
Ctrl+C working in addition to setting<I> DOS_BREAK</I> on.<!-- lm: 0x2 0 -->
</UL><B> Advantages:
</B><!-- lm: 0x12 13 -->
<UL>Enables a DOS application running in the VDM
to be interrupted using the Ctrl+Break or Ctrl+C key sequences.<!-- lm: 0x2 0 -->
</UL><B> Drawbacks:
</B><!-- lm: 0x12 13 -->
<UL>This setting is useful only if an application
must be quickly interrupted; the user may easily terminate a VDM by closing
it from the Window List.<!-- lm: 0x2 0 -->
</UL><B> Default:</B><!-- lm: 0x12 13 -->
<UL> Off
(Ctrl+Break is disabled).<!-- lm: 0x2 0 -->
</UL> Settable:<!-- lm: 0x12 13 -->
<UL> At
VDM creation only.<!-- lm: 0x2 0 -->
</UL><B> Examples:</B><!-- lm: 0x12 13 -->
<UL> If
the user wishes to have the option to interrupt a DOS batch file running
in a virtual DOS machine, this setting should be turned on.<!-- lm: 0x2 0 -->
</UL>
<P>
<B>DOS_DEVICE</B><!-- lm: 0x2 0 -->
<P>
<B>Function:</B><!-- lm: 0x12 13 -->
<UL> This setting can be used to add
or modify information about DOS device drivers for the specified VDM, in
addition to the information specified in CONFIG.SYS.<!-- lm: 0x2 0 -->
</UL><B> Default:
</B><!-- lm: 0x12 13 -->
<UL>When this setting is selected, a list is displayed
which contains information about each DOS device driver specified in CONFIG.SYS.
 The information consists of the path and file name of each DOS device driver
and its current parameters, if applicable.  For example:
<PRE>c:\os2\mdos\ansi.sys</PRE>

<P>
The user may:<!-- lm: 0x2 3 -->
</UL> <!-- lm: 0x2 5 -->
<UL>Type the name
of a DOS device driver to add it. Typing should begin on a new line.<!-- lm: 0x2 3 -->
</UL><!-- lm: 0x2 5 -->
<UL>Delete all the information about a device driver
to remove it.<!-- lm: 0x2 3 -->
</UL><!-- lm: 0x2 5 -->
<UL>Type or delete to add, change, or delete a
value.<!-- lm: 0x2 13 -->
<UL><!-- lm: 0x2 0 -->
</UL><B> Settable:</B><!-- lm: 0x12 13 -->
<UL> At
VDM creation only.<!-- lm: 0x2 0 -->
</UL><B> Examples:</B><!-- lm: 0x12 13 -->
<UL> A
program to support hardware such as a scanner may include a device driver
that is needed only for itself. The device driver should be loaded with
the<I> DOS_DEVICE</I> setting instead of in the CONFIG.SYS.<!-- lm: 0x2 0 -->
</UL>
<P>
<B>DOS_FCBS</B><!-- lm: 0x2 0 -->
<P>
<B>Function:</B><!-- lm: 0x12 13 -->
<UL> Specifies the maximum number of
file control blocks (FCBs) which may be opened by applications running in
the VDM. Note that this setting affects only those modules which use file-sharing.
<!-- lm: 0x2 0 -->
</UL><B>Advantages:</B><!-- lm: 0x12 13 -->
<UL> Reducing
this setting may improve DOS application performance in a resource-constrained
<!-- entering slot 333 -->networking environment.  When the maximum number
of FCBs is opened by an application, the least recently used FCB is closed
to allow additional files to be opened; see DOS_FCBS_KEEP below.<!-- lm: 0x2 0 -->
</UL><B> Drawbacks:
</B><!-- lm: 0x12 13 -->
<UL>Reducing this setting to an excessively low
number may inhibit the performance of applications which use large numbers
of files.  Check application documentation for recommended FCB settings.
<!-- lm: 0x2 0 -->
</UL><B>Default:</B><!-- lm: 0x12 13 -->
<UL> 16.<!-- lm: 0x2 0 -->
</UL><B> Settable:
</B><!-- lm: 0x12 13 -->
<UL>At VDM creation only.<!-- lm: 0x2 0 -->
</UL><B> Examples:
</B><!-- lm: 0x12 13 -->
<UL>None.<!-- lm: 0x2 0 -->
</UL>
<P>
<B>DOS_FCBS_KEEP</B><!-- lm: 0x2 0 -->
<P>
<B>Function:</B><!-- lm: 0x12 13 -->
<UL> Specifies the number of FCBs that
will be protected against automatic closure.<!-- lm: 0x2 0 -->
</UL><B> Advantages:
</B><!-- lm: 0x12 13 -->
<UL>If this setting is specified as "n", the first
"n" files are protected against automatic closure as described in DOS_FCBS
above. This may improve application performance.<!-- lm: 0x2 0 -->
</UL><B> Default:
</B><!-- lm: 0x12 13 -->
<UL>8.<!-- lm: 0x2 0 -->
</UL><B> Settable:</B><!-- lm: 0x12 13 -->
<UL> At
VDM creation only.<!-- lm: 0x2 0 -->
</UL><B> Examples:</B><!-- lm: 0x12 13 -->
<UL> None.
<!-- lm: 0x2 0 -->
</UL>
<P>
<B>DOS_FILES</B><!-- lm: 0x2 0 -->
<P>
<B>Function:</B><!-- lm: 0x12 13 -->
<UL> Specifies the maximum number of
file handles which may be opened in a VDM.<!-- lm: 0x2 0 -->
</UL><B> Advantages:
</B><!-- lm: 0x12 13 -->
<UL>Setting this value higher than the default
may improve performance for applications which use a large number of files.
 Check application documentation for recommended settings.<!-- lm: 0x2 0 -->
</UL><B> Drawbacks:
</B><!-- lm: 0x12 13 -->
<UL>Setting the number of file handles higher than
necessary reduces the available memory.<!-- lm: 0x2 0 -->
</UL><B> Default:
</B><!-- lm: 0x12 13 -->
<UL>20.<!-- lm: 0x2 0 -->
</UL><B> Settable:</B><!-- lm: 0x12 13 -->
<UL> At
any time.<!-- lm: 0x2 0 -->
</UL><B> Examples:</B><!-- lm: 0x12 13 -->
<UL> DBASE
IV requires a<I> DOS_FILES</I> setting of at least 40.<!-- lm: 0x2 0 -->
</UL>
<P>
<B>DOS_HIGH</B><!-- lm: 0x2 0 -->
<P>
<B>Function:</B><!-- lm: 0x12 13 -->
<UL> Determines whether DOS is loaded
outside the 640KB low memory address space.<!-- lm: 0x2 0 -->
</UL><B> Advantages:
</B><!-- lm: 0x12 13 -->
<UL>Loading DOS into high memory allows more available
memory for application code and data within the 640KB address space.<!-- lm: 0x2 0 -->
</UL><B> Drawbacks:
</B><!-- lm: 0x12 13 -->
<UL>Applications which require access to DOS internal
control structures require DOS to be loaded into low memory, and therefore
cannot use this setting.<!-- lm: 0x2 0 -->
</UL><B> Default:</B><!-- lm: 0x12 13 -->
<UL> Off
(DOS is loaded into low memory).<!-- lm: 0x2 0 -->
</UL><B> Settable:</B><!-- lm: 0x12 13 -->
<UL> At
VDM creation only.<!-- lm: 0x2 0 -->
</UL><B> Examples:</B><!-- lm: 0x12 13 -->
<UL> None.
<!-- lm: 0x2 0 -->
</UL>
<P>
<B>DOS_LASTDRIVE</B><!-- lm: 0x2 0 -->
<P>
<B>Function:</B><!-- lm: 0x12 13 -->
<UL> Specifies the highest available
logical drive letter for the specified VDM. This setting is similar to the
<I>LASTDRIVE=</I> statement in a DOS CONFIG.SYS.<!-- lm: 0x2 0 -->
</UL><B> Default:
</B><!-- lm: 0x12 13 -->
<UL>Z.<!-- lm: 0x2 0 -->
</UL><B> Settable:</B><!-- lm: 0x12 13 -->
<UL> At
VDM creation only.<!-- lm: 0x2 0 -->
</UL><B> Examples:</B><!-- lm: 0x12 13 -->
<UL> Each
additional drive letter uses about 100 bytes. Setting the<I> LAST_DRIVE
</I>to a lower letter such as J or K provides more conventional memory for
an application.<!-- lm: 0x2 0 -->
</UL>
<P>
<B>DOS_RMSIZE</B><!-- lm: 0x2 0 -->
<P>
<B>Function:</B><!-- lm: 0x12 13 -->
<UL> Specifies the DOS memory size.
 This is the amount of memory which is available to DOS applications.<!-- lm: 0x2 0 -->
</UL><B> Advantages:
</B><!-- lm: 0x12 13 -->
<UL>The virtual video device driver uses this setting
on certain video adapters to set even more than 640KB.<!-- lm: 0x2 0 -->
</UL><B> Drawbacks:
</B><!-- lm: 0x12 13 -->
<UL>This setting is of little use to most users
as there is no point specifying less than 640KB.<!-- lm: 0x2 0 -->
</UL><B> Default:
</B><!-- lm: 0x12 13 -->
<UL>The default is 640KB.<!-- lm: 0x2 0 -->
</UL><B> Settable:
</B><!-- lm: 0x12 13 -->
<UL>At VDM creation only.<!-- lm: 0x2 0 -->
</UL><B> Examples:
</B><!-- lm: 0x12 13 -->
<UL>None.<!-- lm: 0x2 0 -->
</UL>
<P>
<B>DOS_SHELL</B><!-- lm: 0x2 0 -->
<P>
<B>Function:</B><!-- lm: 0x12 13 -->
<UL> To specify the DOS command processor,
or to add parameters to affect the command processor.  This setting points
by default to COMMAND.COM.  If a user has a different command processor,
it should be specified here.<!-- lm: 0x2 0 -->
</UL><B> Advantages:</B><!-- lm: 0x12 13 -->
<UL> The
user may specify a command processor other than the default COMMAND.COM,
if required by a specialized application, or may alter the environment space
available for the VDM.<!-- lm: 0x2 0 -->
</UL><B> Default:</B><!-- lm: 0x12 13 -->
<UL> C:\OS2\MDOS\COMMAND.COM
C:\OS2\MDOS /P<!-- lm: 0x2 0 -->
</UL><B> Settable:</B><!-- lm: 0x12 13 -->
<UL> At
VDM creation only.<!-- lm: 0x2 0 -->
</UL><B> Examples:</B><!-- lm: 0x12 13 -->
<UL> C:\OS2\MDOS\COMMAND.COM
/E:1024 /P<!-- lm: 0x2 0 -->
</UL>
<P>
<B>DOS_STARTUP_DRIVE</B><!-- lm: 0x2 0 -->
<P>
<B>Function:</B><!-- lm: 0x12 13 -->
<UL> Specifies the location of the
DOS kernel to be loaded into the VDM.<!-- lm: 0x2 0 -->
</UL><B> Advantages:
</B><!-- lm: 0x12 13 -->
<UL>Allows specific versions of DOS to be loaded
into a VDM using the VMB facility, allowing the execution of version-dependent
DOS applications.<!-- lm: 0x2 0 -->
</UL><B> Drawbacks:</B><!-- lm: 0x12 13 -->
<UL> Performance
may not be as good as the VDM kernel, which is optimized for the OS/2 V2.0
environment.<!-- lm: 0x2 0 -->
</UL><B> Default:</B><!-- lm: 0x12 13 -->
<UL> The
DOS Emulation kernel is loaded.<!-- lm: 0x2 0 -->
</UL><B> Settable:</B><!-- lm: 0x12 13 -->
<UL> At
VDM creation only.<!-- lm: 0x2 0 -->
</UL><B> Examples:</B><!-- lm: 0x12 13 -->
<UL> See
<A HREF="304_L1_VirtualMachineBoot.html">Virtual Machine Boot</A>.<!-- lm: 0x2 0 -->
</UL>
<P>
<B>DOS_UMB</B><!-- lm: 0x2 0 -->
<P>
<B>Function:</B><!-- lm: 0x12 13 -->
<UL> Specifies whether DOS owns Upper
Memory Blocks (UMBs) and manages the loading of device drivers and TSR<!-- entering slot 334 --> programs.
<!-- lm: 0x2 0 -->
</UL><B>Advantages:</B><!-- lm: 0x12 13 -->
<UL> Setting
DOS_UMB on allows use of the DEVICEHIGH= and LOADHIGH statements, to load
device drivers and TSR programs into Upper Memory Blocks, thereby preserving
space in low memory for use by applications.<!-- lm: 0x2 0 -->
</UL><B> Drawbacks:
</B><!-- lm: 0x12 13 -->
<UL>Certain applications which make use of UMBs
need to access and manage the UMBs directly; such applications will not
run when DOS_UMB is set on, because DOS owns the UMBs.<!-- lm: 0x2 0 -->
</UL><B> Default:
</B><!-- lm: 0x12 13 -->
<UL>Off (UMBs are owned by certain types of TSR
programs and DOS device drivers if necessary).<!-- lm: 0x2 0 -->
</UL><B> Settable
</B><!-- lm: 0x12 13 -->
<UL>At VDM creation only.<!-- lm: 0x2 0 -->
</UL><B> Examples:
</B><!-- lm: 0x12 13 -->
<UL>None.<!-- lm: 0x2 0 -->
</UL>
<P>
<B>DOS_VERSION</B><!-- lm: 0x2 0 -->
<P>
<B>Function:</B><!-- lm: 0x12 13 -->
<UL> Allows the operating system to
report a "fake" DOS version number in response to a request from a program
in the VDM, in order to support applications which check for a DOS version
number.<!-- lm: 0x2 0 -->
</UL><B> Advantages:</B><!-- lm: 0x12 13 -->
<UL> Allows
some programs that will not start unless they detect a prerequisite DOS
version to run in DOS Emulation<!-- lm: 0x2 0 -->
</UL><B> Default:</B><!-- lm: 0x12 13 -->
<UL> 20
<!-- lm: 0x2 0 -->
</UL><B>Settable:</B><!-- lm: 0x12 13 -->
<UL> Before
application initiation.<!-- lm: 0x2 0 -->
</UL><B> Examples:</B><!-- lm: 0x12 13 -->
<UL> Lotus
1-2-3 R3+ will run in DOS Emulation if it is "fooled" into thinking that
it is running under DOS 3.3 by putting the following lines into the<I> DOS_Version
</I>list box:<!-- lm: 0x2 3 -->
</UL> <!-- lm: 0x2 5 -->
<UL>123DOS.EXE,3,30,255
<!-- lm: 0x2 3 -->
</UL><!-- lm: 0x2 5 -->
<UL>123.EXE,3,30,255<!-- lm: 0x2 3 -->
</UL><!-- lm: 0x2 5 -->
<UL>LOTUS.EXE,3,30,255<!-- lm: 0x2 13 -->
<UL><!-- lm: 0x2 0 -->
</UL>

<P><HR>

<A HREF="290_L3_Communications.html">[Back: Communications]</A> <BR>
<A HREF="292_L3_DPMI.html">[Next: DPMI]</A> 
</BODY>
</HTML>
